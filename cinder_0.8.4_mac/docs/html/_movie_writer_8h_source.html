<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Cinder</title>
		<link rel="stylesheet" href="cinder_doxygen.css" type="text/css" media="screen" />
		<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
		<script type="text/javascript" src="jquery.lightbox-0.5.pack.js"></script>		
	</head>
<body>	
<div class="wrapper">
	<div id="header">
		<h1><a href="http://libcinder.org">Cinder</a></h1>
	</div>

<!-- Generated by Doxygen 1.8.0 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">include/cinder/qtime/MovieWriter.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_movie_writer_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> Copyright (c) 2010, The Barbarian Group</span>
<a name="l00003"></a>00003 <span class="comment"> All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> </span>
<a name="l00005"></a>00005 <span class="comment"> Redistribution and use in source and binary forms, with or without modification, are permitted provided that</span>
<a name="l00006"></a>00006 <span class="comment"> the following conditions are met:</span>
<a name="l00007"></a>00007 <span class="comment"> </span>
<a name="l00008"></a>00008 <span class="comment"> * Redistributions of source code must retain the above copyright notice, this list of conditions and</span>
<a name="l00009"></a>00009 <span class="comment"> the following disclaimer.</span>
<a name="l00010"></a>00010 <span class="comment"> * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and</span>
<a name="l00011"></a>00011 <span class="comment"> the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00012"></a>00012 <span class="comment"> </span>
<a name="l00013"></a>00013 <span class="comment"> THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED</span>
<a name="l00014"></a>00014 <span class="comment"> WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A</span>
<a name="l00015"></a>00015 <span class="comment"> PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR</span>
<a name="l00016"></a>00016 <span class="comment"> ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED</span>
<a name="l00017"></a>00017 <span class="comment"> TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span>
<a name="l00018"></a>00018 <span class="comment"> HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</span>
<a name="l00019"></a>00019 <span class="comment"> NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<a name="l00020"></a>00020 <span class="comment"> POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00021"></a>00021 <span class="comment"> */</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#pragma once</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="_cinder_8h.html">cinder/Cinder.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="_quick_time_8h.html">cinder/qtime/QuickTime.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="_image_io_8h.html">cinder/ImageIo.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="_stream_8h.html">cinder/Stream.h</a>&quot;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="comment">// These forward declarations prevent us from having to bring all of QuickTime into the global namespace in MSW</span>
<a name="l00034"></a>00034 <span class="comment"></span><span class="preprocessor">#if defined( CINDER_MSW )</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>    <span class="keyword">typedef</span> <span class="keyword">struct </span>ComponentInstanceRecord      ComponentInstanceRecord;
<a name="l00036"></a>00036     <span class="keyword">typedef</span> ComponentInstanceRecord *           ComponentInstance;
<a name="l00037"></a>00037     <span class="keyword">typedef</span> ComponentInstance                   DataHandler;
<a name="l00038"></a>00038     <span class="keyword">typedef</span> <span class="keyword">struct </span>TrackType**                  Track;
<a name="l00039"></a>00039     <span class="keyword">typedef</span> <span class="keyword">struct </span>MediaType**                  Media;
<a name="l00040"></a>00040     <span class="keyword">typedef</span> <span class="keyword">struct </span>OpaqueICMCompressionSession*         ICMCompressionSessionRef;
<a name="l00041"></a>00041     <span class="keyword">typedef</span> <span class="keyword">struct </span>OpaqueICMCompressionSessionOptions*  ICMCompressionSessionOptionsRef;
<a name="l00042"></a>00042     <span class="keyword">typedef</span> <span class="keyword">const</span> <span class="keyword">struct </span>OpaqueICMEncodedFrame* ICMEncodedFrameRef;
<a name="l00043"></a>00043     <span class="keyword">typedef</span> <span class="keywordtype">signed</span> <span class="keywordtype">long</span>                         OSStatus;
<a name="l00044"></a>00044     <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                       CodecType;
<a name="l00045"></a>00045     <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                       ICMCompressionPassModeFlags;
<a name="l00046"></a>00046 <span class="preprocessor">#else</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span><span class="preprocessor">    #include &lt;QuickTime/QuickTime.h&gt;</span>
<a name="l00048"></a>00048 <span class="preprocessor">    #include &lt;QuickTime/ImageCompression.h&gt;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#endif // defined( CINDER_MSW )</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00051"></a>00051 
<a name="l00052"></a><a class="code" href="namespacecinder_1_1qtime.html">00052</a> <span class="keyword">namespace </span>cinder { <span class="keyword">namespace </span>qtime {
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html">00054</a> <span class="keyword">class </span><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html" title="Outputs QuickTime movies.">MovieWriter</a> {
<a name="l00055"></a>00055     <span class="keyword">struct </span>Obj;
<a name="l00056"></a>00056 
<a name="l00057"></a>00057   <span class="keyword">public</span>:
<a name="l00059"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html">00059</a>     <span class="keyword">class </span><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a> {
<a name="l00060"></a>00060       <span class="keyword">public</span>:
<a name="l00061"></a>00061         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#ae8e2dab4327148af8d755a358ecccc99">Format</a>();
<a name="l00062"></a>00062         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#ae8e2dab4327148af8d755a358ecccc99">Format</a>( uint32_t codec, <span class="keywordtype">float</span> quality );
<a name="l00063"></a>00063         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#ae8e2dab4327148af8d755a358ecccc99">Format</a>( <span class="keyword">const</span> ICMCompressionSessionOptionsRef settings, uint32_t codec, <span class="keywordtype">float</span> quality, <span class="keywordtype">float</span> frameRate, <span class="keywordtype">bool</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a128666c829fb5b5d6c526a68d1405914" title="Enables multiPass encoding. Defaults to false. While multiPass encoding can result in significantly s...">enableMultiPass</a> );
<a name="l00064"></a>00064         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#ae8e2dab4327148af8d755a358ecccc99">Format</a>( <span class="keyword">const</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a> &amp;format );
<a name="l00065"></a>00065         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#ac49b3eaa5047a6178e153c48ba5a73a7">~Format</a>();
<a name="l00066"></a>00066 
<a name="l00067"></a>00067         <span class="keyword">const</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp; <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a330c2f53a8d2a40497db09f042b1f440">operator=</a>( <span class="keyword">const</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a> &amp;format );
<a name="l00068"></a>00068 
<a name="l00070"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#af82b4406913f2391b6f400e0c7742698">00070</a>         uint32_t    <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#af82b4406913f2391b6f400e0c7742698" title="Returns the four character code for the QuickTime codec. Types can be found in QuickTime&#39;s ImageCompr...">getCodec</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mCodec; }
<a name="l00072"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a08a2b918227f2a0a6eaf1f7c7017586f">00072</a>         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a08a2b918227f2a0a6eaf1f7c7017586f" title="Sets the four character code for the QuickTime codec. Defaults to PNG (&#39;png &#39;). Additional types can ...">setCodec</a>( uint32_t codec ) { mCodec = codec; <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00074"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a5fa9487a0e43e1db150a634ba36d8d5a">00074</a>         <span class="keywordtype">float</span>       <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a5fa9487a0e43e1db150a634ba36d8d5a" title="Returns the overall quality for encoding in the range of [0,1.0]. Defaults to 0.99. 1.0 corresponds to lossless.">getQuality</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mQualityFloat; }
<a name="l00076"></a>00076         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a4d4402b55ab8e4b8dafc76b37f75025e" title="Sets the overall quality for encoding. Must be in a range of [0,1.0]. Defaults to 0...">setQuality</a>( <span class="keywordtype">float</span> quality );
<a name="l00078"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a65584cd89876d95f408fcfc6c33c6640">00078</a>         <span class="keywordtype">float</span>       <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a65584cd89876d95f408fcfc6c33c6640" title="Returns the standard duration of a frame measured in seconds.">getDefaultDuration</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mDefaultTime; }
<a name="l00080"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a4047a2a2dda16df76a948c218f1bb4e9">00080</a>         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a4047a2a2dda16df76a948c218f1bb4e9" title="Sets the default duration of a frame, measured in seconds. Defaults to 1/30 sec, meaning 30 FPS...">setDefaultDuration</a>( <span class="keywordtype">float</span> defaultDuration ) { mDefaultTime = defaultDuration; <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00082"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#aedf0cd565ff50b4f1dd3e66f871cd33a">00082</a>         <span class="keywordtype">long</span>        <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#aedf0cd565ff50b4f1dd3e66f871cd33a" title="Returns the integer base value for the encoding time scale. Defaults to 600.">getTimeScale</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mTimeBase; }
<a name="l00084"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a77bf84940ab6a0ac63b0c2da5c96cace">00084</a>         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a77bf84940ab6a0ac63b0c2da5c96cace" title="Sets the integer base value for encoding time scale. Defaults to 600.">setTimeScale</a>( <span class="keywordtype">long</span> timeScale ) { mTimeBase = timeScale; <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00086"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a8558f262073296deda99db91eb94d02d">00086</a>         <span class="keywordtype">float</span>       <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a8558f262073296deda99db91eb94d02d" title="Returns the gamma value by which image data is encoded.">getGamma</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mGamma; }
<a name="l00088"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a8bea7df7fe6dd7f4eaef3753631584ed">00088</a>         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a8bea7df7fe6dd7f4eaef3753631584ed" title="Sets the gamma value by which image data is encoded. Defaults to 2.5 on MSW and 2.2 on Mac OS X.">setGamma</a>( <span class="keywordtype">float</span> gamma ) { mGamma = gamma; <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00090"></a>00090         <span class="keywordtype">bool</span>        <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a76db0563388468124a894da270b5f562" title="Returns if temporal compression (allowing P or B frames) is enabled. Defaults to true.">isTemporal</a>() <span class="keyword">const</span>;
<a name="l00092"></a>00092         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a09328cd66edc5d88cf7146883dfb9473" title="Enables temporal compression (allowing P or B frames). Defaults to true.">enableTemporal</a>( <span class="keywordtype">bool</span> <a class="code" href="namespacecinder_1_1gl.html#ad661cc5c41727eaca6cb2b8bee32bc0f" title="Enables the OpenGL State state. Equivalent to calling to glEnable( state );.">enable</a> = <span class="keyword">true</span> );
<a name="l00094"></a>00094         <span class="keywordtype">bool</span>        <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#aeaa3d035f43b2ec48c1447e5a1d7f7eb" title="Returns if frame reordering is enabled. Defaults to true. In order to encode B frames, a compressor must reorder frames, which means that the order in which they will be emitted and stored (the decode order) is different from the order in which they were presented to the compressor (the display order).">isReordering</a>() <span class="keyword">const</span>;
<a name="l00096"></a>00096         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#acee96e287a55431ba7c4ff2ef0b2350b" title="Enables frame reordering. Defaults to true. In order to encode B frames, a compressor must reorder fr...">enableReordering</a>( <span class="keywordtype">bool</span> <a class="code" href="namespacecinder_1_1gl.html#ad661cc5c41727eaca6cb2b8bee32bc0f" title="Enables the OpenGL State state. Equivalent to calling to glEnable( state );.">enable</a> = <span class="keyword">true</span> );
<a name="l00098"></a>00098         int32_t     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a3a438fb88c28b571c4ff171c506731f6" title="Gets the maximum number of frames between key frames. Default is 0, which indicates that the compress...">getMaxKeyFrameRate</a>() <span class="keyword">const</span>;
<a name="l00100"></a>00100         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a396656e5ab8ed005f2b0f01382d29584" title="Sets the maximum number of frames between key frames. Default is 0, which indicates that the compress...">setMaxKeyFrameRate</a>( int32_t rate );
<a name="l00102"></a>00102         <span class="keywordtype">bool</span>        <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a0984caa6b9abeb41a526ea21174166cf" title="Returns whether a codec is allowed to change frame times. Defaults to true. Some compressors are able...">isFrameTimeChanges</a>() <span class="keyword">const</span>;
<a name="l00104"></a>00104         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#af89eff219b9bec57c7eaf8d0f942cea0" title="Sets whether a codec is allowed to change frame times. Defaults to true. Some compressors are able to...">enableFrameTimeChanges</a>( <span class="keywordtype">bool</span> <a class="code" href="namespacecinder_1_1gl.html#ad661cc5c41727eaca6cb2b8bee32bc0f" title="Enables the OpenGL State state. Equivalent to calling to glEnable( state );.">enable</a> = <span class="keyword">true</span> );
<a name="l00106"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#adda15a36a199b036424f6629a2179f05">00106</a>         <span class="keywordtype">bool</span>        <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#adda15a36a199b036424f6629a2179f05" title="Returns whether multiPass encoding is enabled. Defaults to false.">isMultiPass</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mEnableMultiPass; }
<a name="l00108"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a128666c829fb5b5d6c526a68d1405914">00108</a>         <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a128666c829fb5b5d6c526a68d1405914" title="Enables multiPass encoding. Defaults to false. While multiPass encoding can result in significantly s...">enableMultiPass</a>( <span class="keywordtype">bool</span> <a class="code" href="namespacecinder_1_1gl.html#ad661cc5c41727eaca6cb2b8bee32bc0f" title="Enables the OpenGL State state. Equivalent to calling to glEnable( state );.">enable</a> = <span class="keyword">true</span> ) { mEnableMultiPass = <a class="code" href="namespacecinder_1_1gl.html#ad661cc5c41727eaca6cb2b8bee32bc0f" title="Enables the OpenGL State state. Equivalent to calling to glEnable( state );.">enable</a>; <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110       <span class="keyword">private</span>:
<a name="l00111"></a>00111         <span class="keywordtype">void</span>        initDefaults();
<a name="l00112"></a>00112 
<a name="l00113"></a>00113         uint32_t    mCodec;
<a name="l00114"></a>00114         <span class="keywordtype">long</span>        mTimeBase;
<a name="l00115"></a>00115         <span class="keywordtype">float</span>       mDefaultTime;
<a name="l00116"></a>00116         <span class="keywordtype">float</span>       mQualityFloat;
<a name="l00117"></a>00117         <span class="keywordtype">float</span>       mGamma;
<a name="l00118"></a>00118         <span class="keywordtype">bool</span>        mEnableMultiPass;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120         ICMCompressionSessionOptionsRef     mOptions;
<a name="l00121"></a>00121 
<a name="l00122"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#ad8df23e2bef21579eb2943551047dbec">00122</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html" title="Outputs QuickTime movies.">MovieWriter</a>;
<a name="l00123"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a25555bebf354140e42fe725c030a50cc">00123</a>         <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#a25555bebf354140e42fe725c030a50cc">Obj</a>;
<a name="l00124"></a>00124     };
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 
<a name="l00127"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a171364944fdca4aaec886f06d5924516">00127</a>     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a171364944fdca4aaec886f06d5924516">MovieWriter</a>() {}
<a name="l00128"></a>00128     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a171364944fdca4aaec886f06d5924516">MovieWriter</a>( <span class="keyword">const</span> fs::path &amp;path, int32_t width, int32_t height, <span class="keyword">const</span> Format &amp;format = <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html#ae8e2dab4327148af8d755a358ecccc99">Format::Format</a>() );
<a name="l00129"></a>00129 
<a name="l00131"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a11a667df85e395175303dd304d82a3a3">00131</a>     <span class="keywordtype">float</span>   <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a11a667df85e395175303dd304d82a3a3" title="Returns the Movie&#39;s default frame duration measured in seconds. You can also think of this as the Mov...">getDefaultDuration</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mObj-&gt;mFormat.mDefaultTime; }
<a name="l00133"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a7cabb2fd1b70aa8a4599854768d2b1d2">00133</a>     int32_t <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a7cabb2fd1b70aa8a4599854768d2b1d2" title="Returns the width of the Movie in pixels.">getWidth</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mObj-&gt;mWidth; }
<a name="l00135"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a80edfc2538964efcf728ff44667f4102">00135</a>     int32_t <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a80edfc2538964efcf728ff44667f4102" title="Returns the height of the Movie in pixels.">getHeight</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mObj-&gt;mHeight; }
<a name="l00137"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aff3bc4ba1b90864116129e155a831a03">00137</a>     <a class="code" href="classcinder_1_1_vec2.html">Vec2i</a>   <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aff3bc4ba1b90864116129e155a831a03" title="Returns the size of the Movie in pixels.">getSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacecinder.html#a856f2784df30e9b72860f0fa3ca059cb">Vec2i</a>( <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a7cabb2fd1b70aa8a4599854768d2b1d2" title="Returns the width of the Movie in pixels.">getWidth</a>(), <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a80edfc2538964efcf728ff44667f4102" title="Returns the height of the Movie in pixels.">getHeight</a>() ); }
<a name="l00139"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aa39e46df517749c3d43a2d86ee935fb8">00139</a>     <span class="keywordtype">float</span>   <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aa39e46df517749c3d43a2d86ee935fb8" title="Returns the Movie&#39;s aspect ratio, which is its width / height.">getAspectRatio</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a7cabb2fd1b70aa8a4599854768d2b1d2" title="Returns the width of the Movie in pixels.">getWidth</a>() / (float)<a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a80edfc2538964efcf728ff44667f4102" title="Returns the height of the Movie in pixels.">getHeight</a>(); }
<a name="l00141"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a12786b553ae896473a2c50fb9adc5cd0">00141</a>     <a class="code" href="classcinder_1_1_area_t.html">Area</a>    <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a12786b553ae896473a2c50fb9adc5cd0" title="Returns the bounding Area of the Movie in pixels: [0,0]-(width,height)">getBounds</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacecinder.html#a157f7d1781706c0affefe6063e9bd24e">Area</a>( 0, 0, <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a7cabb2fd1b70aa8a4599854768d2b1d2" title="Returns the width of the Movie in pixels.">getWidth</a>(), <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a80edfc2538964efcf728ff44667f4102" title="Returns the height of the Movie in pixels.">getHeight</a>() ); }
<a name="l00142"></a>00142 
<a name="l00144"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a5d415542c446deb35feed9f0be0498a8">00144</a>     <span class="keyword">const</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_1_1_format.html" title="Defines the encoding parameters of a MovieWriter.">Format</a>&amp;   <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a5d415542c446deb35feed9f0be0498a8" title="Returns the Movie&#39;s Format.">getFormat</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mObj-&gt;mFormat; }
<a name="l00145"></a>00145 
<a name="l00148"></a>00148     <span class="keyword">static</span> <span class="keywordtype">bool</span>     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aaae6074825b2e8acfdfec51124ad4675" title="Presents the user with the standard compression options dialog. Optional previewImage provides a stil...">getUserCompressionSettings</a>( Format *result, <a class="code" href="namespacecinder.html#aca11590d504e68de86f3a57444c2eb70">ImageSourceRef</a> previewImage = <a class="code" href="namespacecinder.html#aca11590d504e68de86f3a57444c2eb70">ImageSourceRef</a>() );
<a name="l00149"></a>00149 
<a name="l00152"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#ab0e78cf4f22cf5ce4dd9db87ba34b9e9">00152</a>     <span class="keywordtype">void</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#ab0e78cf4f22cf5ce4dd9db87ba34b9e9" title="Appends a frame to the Movie. The optional duration parameter allows a frame to be inserted for a tim...">addFrame</a>( <span class="keyword">const</span> <a class="code" href="namespacecinder.html#aca11590d504e68de86f3a57444c2eb70">ImageSourceRef</a> &amp;imageSource, <span class="keywordtype">float</span> duration = -1.0f ) { mObj-&gt;addFrame( imageSource, duration ); }
<a name="l00153"></a>00153     
<a name="l00155"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#abc3c639402f1cad93665c0a2d82e1148">00155</a>     uint32_t    <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#abc3c639402f1cad93665c0a2d82e1148" title="Returns the number of frames in the movie.">getNumFrames</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mObj-&gt;mNumFrames; }
<a name="l00156"></a>00156 
<a name="l00158"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a00c46b387ad4fb0d1fea32668170694d">00158</a>     <span class="keywordtype">void</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a00c46b387ad4fb0d1fea32668170694d" title="Completes the encoding of the movie and closes the file. Calling finish() more than once has no effec...">finish</a>() { mObj-&gt;finish(); }
<a name="l00159"></a>00159     
<a name="l00160"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aae61a0cffd9c5da9bac639b84d41e7c7accf52a21d3fb10a99c2cbb59764b9f53">00160</a>     <span class="keyword">enum</span> { <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aae61a0cffd9c5da9bac639b84d41e7c7a621b453377233c619ec2aed289a6f2e9">CODEC_H264</a> = <span class="stringliteral">&#39;avc1&#39;</span>, <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aae61a0cffd9c5da9bac639b84d41e7c7aaf838ff7898432bad0646bd14174656e">CODEC_JPEG</a> = <span class="stringliteral">&#39;jpeg&#39;</span>, <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aae61a0cffd9c5da9bac639b84d41e7c7a54ac23f6e3c7351ea59ac8cd25fac571">CODEC_MP4</a> = <span class="stringliteral">&#39;mp4v&#39;</span>, <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aae61a0cffd9c5da9bac639b84d41e7c7a3bcfa3cdd48f56697e9841c220c219ff">CODEC_PNG</a> = <span class="stringliteral">&#39;png &#39;</span>, <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aae61a0cffd9c5da9bac639b84d41e7c7accf52a21d3fb10a99c2cbb59764b9f53">CODEC_RAW</a> = <span class="stringliteral">&#39;raw &#39;</span>, <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#aae61a0cffd9c5da9bac639b84d41e7c7a72f1ba3ea2ac9810ce32c305cac3c51b">CODEC_ANIMATION</a> = <span class="stringliteral">&#39;rle &#39;</span> };
<a name="l00161"></a>00161 
<a name="l00162"></a>00162   <span class="keyword">private</span>:
<a name="l00164"></a>00164     <span class="keyword">struct </span>Obj {
<a name="l00165"></a>00165         Obj( <span class="keyword">const</span> fs::path &amp;path, int32_t width, int32_t height, <span class="keyword">const</span> Format &amp;format );
<a name="l00166"></a>00166         ~Obj();
<a name="l00167"></a>00167         
<a name="l00168"></a>00168         <span class="keywordtype">void</span>    <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#ab0e78cf4f22cf5ce4dd9db87ba34b9e9" title="Appends a frame to the Movie. The optional duration parameter allows a frame to be inserted for a tim...">addFrame</a>( <span class="keyword">const</span> <a class="code" href="namespacecinder.html#aca11590d504e68de86f3a57444c2eb70">ImageSourceRef</a> &amp;imageSource, <span class="keywordtype">float</span> duration );
<a name="l00169"></a>00169         <span class="keywordtype">void</span>    createCompressionSession();
<a name="l00170"></a>00170         <span class="keywordtype">void</span>    <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a00c46b387ad4fb0d1fea32668170694d" title="Completes the encoding of the movie and closes the file. Calling finish() more than once has no effec...">finish</a>();
<a name="l00171"></a>00171         
<a name="l00172"></a>00172         <span class="keyword">static</span> OSStatus encodedFrameOutputCallback( <span class="keywordtype">void</span> *refCon, ::ICMCompressionSessionRef session, OSStatus err, ICMEncodedFrameRef encodedFrame, <span class="keywordtype">void</span> *reserved );
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         <a class="code" href="_quick_time_8h.html#ae197fd87aea41d38f38692888b6aefc6">::Movie</a>                         mMovie;
<a name="l00175"></a>00175         ::DataHandler                   mDataHandler;
<a name="l00176"></a>00176         ::Track                         mTrack;
<a name="l00177"></a>00177         ::Media                         mMedia;
<a name="l00178"></a>00178         ::ICMCompressionSessionRef      mCompressionSession;
<a name="l00179"></a>00179         ::ICMCompressionPassModeFlags   mMultiPassModeFlags;        
<a name="l00180"></a>00180         fs::path        mPath;
<a name="l00181"></a>00181         uint32_t        mNumFrames;
<a name="l00182"></a>00182         int64_t         mCurrentTimeValue;
<a name="l00183"></a>00183         
<a name="l00184"></a>00184         int32_t     mWidth, mHeight;
<a name="l00185"></a>00185         Format      mFormat;
<a name="l00186"></a>00186         <span class="keywordtype">bool</span>        mRequestedMultiPass, mDoingMultiPass, mFinished;        
<a name="l00187"></a>00187 
<a name="l00188"></a>00188         <a class="code" href="namespacecinder.html#a26cce2f9e91eabde2c66c4597d6d394e">IoStreamRef</a>     mMultiPassFrameCache;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190         std::vector&lt;std::pair&lt;int64_t,int64_t&gt; &gt;    mFrameTimes;
<a name="l00191"></a>00191     };
<a name="l00193"></a>00193     
<a name="l00194"></a>00194     std::shared_ptr&lt;Obj&gt;        mObj;  
<a name="l00195"></a>00195 
<a name="l00196"></a>00196   <span class="keyword">public</span>:
<a name="l00198"></a>00198 
<a name="l00199"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a29b3ff8a957f9949bd0a1371f41fd3f4">00199</a>     <span class="keyword">typedef</span> std::shared_ptr&lt;Obj&gt; <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html" title="Outputs QuickTime movies.">MovieWriter</a>::*<a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#a29b3ff8a957f9949bd0a1371f41fd3f4" title="Emulates shared_ptr-like behavior.">unspecified_bool_type</a>;
<a name="l00200"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#ad3f347f087a35466de0a5e187708d3e1">00200</a>     <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#ad3f347f087a35466de0a5e187708d3e1" title="Emulates shared_ptr-like behavior.">operator unspecified_bool_type</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> ( mObj.get() == 0 ) ? 0 : &amp;MovieWriter::mObj; }
<a name="l00201"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#ac08f83f66fe584af52e1a66c6ce19180">00201</a>     <span class="keywordtype">void</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer.html#ac08f83f66fe584af52e1a66c6ce19180" title="Emulates shared_ptr-like behavior.">reset</a>() { mObj.reset(); }
<a name="l00203"></a>00203 };
<a name="l00204"></a>00204 
<a name="l00205"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc.html">00205</a> <span class="keyword">class </span><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc.html">MovieWriterExc</a> : <span class="keyword">public</span> <a class="code" href="classcinder_1_1_exception.html">Exception</a> {
<a name="l00206"></a>00206 };
<a name="l00207"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc_invalid_path.html">00207</a> <span class="keyword">class </span><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc_invalid_path.html">MovieWriterExcInvalidPath</a> : <span class="keyword">public</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc.html">MovieWriterExc</a> {
<a name="l00208"></a>00208 };
<a name="l00209"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc_frame_encode.html">00209</a> <span class="keyword">class </span><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc_frame_encode.html">MovieWriterExcFrameEncode</a> : <span class="keyword">public</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc.html">MovieWriterExc</a> {
<a name="l00210"></a>00210 };
<a name="l00211"></a><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc_already_finished.html">00211</a> <span class="keyword">class </span><a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc_already_finished.html">MovieWriterExcAlreadyFinished</a> : <span class="keyword">public</span> <a class="code" href="classcinder_1_1qtime_1_1_movie_writer_exc.html">MovieWriterExc</a> {
<a name="l00212"></a>00212 };
<a name="l00213"></a>00213 
<a name="l00214"></a>00214 } } <span class="comment">// namespace cinder::qtime</span>
</pre></div></div><!-- contents -->
	<div class="footer">
		<p> </p>
	</div>
</div>	
</body>
</html>
