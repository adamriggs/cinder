<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Cinder</title>
		<link rel="stylesheet" href="cinder_doxygen.css" type="text/css" media="screen" />
	</head>
<body>	
<div class="wrapper">
	<div id="header">
		<h1><a href="http://libcinder.org">Cinder</a></h1>
	</div>

<!-- Generated by Doxygen 1.8.0 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">include/opencv2/features2d/features2d.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="features2d_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*M///////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.</span>
<a name="l00004"></a>00004 <span class="comment">//</span>
<a name="l00005"></a>00005 <span class="comment">//  By downloading, copying, installing or using the software you agree to this license.</span>
<a name="l00006"></a>00006 <span class="comment">//  If you do not agree to this license, do not download, install,</span>
<a name="l00007"></a>00007 <span class="comment">//  copy or use the software.</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">//</span>
<a name="l00010"></a>00010 <span class="comment">//                           License Agreement</span>
<a name="l00011"></a>00011 <span class="comment">//                For Open Source Computer Vision Library</span>
<a name="l00012"></a>00012 <span class="comment">//</span>
<a name="l00013"></a>00013 <span class="comment">// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.</span>
<a name="l00014"></a>00014 <span class="comment">// Copyright (C) 2009, Willow Garage Inc., all rights reserved.</span>
<a name="l00015"></a>00015 <span class="comment">// Third party copyrights are property of their respective owners.</span>
<a name="l00016"></a>00016 <span class="comment">//</span>
<a name="l00017"></a>00017 <span class="comment">// Redistribution and use in source and binary forms, with or without modification,</span>
<a name="l00018"></a>00018 <span class="comment">// are permitted provided that the following conditions are met:</span>
<a name="l00019"></a>00019 <span class="comment">//</span>
<a name="l00020"></a>00020 <span class="comment">//   * Redistribution&#39;s of source code must retain the above copyright notice,</span>
<a name="l00021"></a>00021 <span class="comment">//     this list of conditions and the following disclaimer.</span>
<a name="l00022"></a>00022 <span class="comment">//</span>
<a name="l00023"></a>00023 <span class="comment">//   * Redistribution&#39;s in binary form must reproduce the above copyright notice,</span>
<a name="l00024"></a>00024 <span class="comment">//     this list of conditions and the following disclaimer in the documentation</span>
<a name="l00025"></a>00025 <span class="comment">//     and/or other materials provided with the distribution.</span>
<a name="l00026"></a>00026 <span class="comment">//</span>
<a name="l00027"></a>00027 <span class="comment">//   * The name of the copyright holders may not be used to endorse or promote products</span>
<a name="l00028"></a>00028 <span class="comment">//     derived from this software without specific prior written permission.</span>
<a name="l00029"></a>00029 <span class="comment">//</span>
<a name="l00030"></a>00030 <span class="comment">// This software is provided by the copyright holders and contributors &quot;as is&quot; and</span>
<a name="l00031"></a>00031 <span class="comment">// any express or implied warranties, including, but not limited to, the implied</span>
<a name="l00032"></a>00032 <span class="comment">// warranties of merchantability and fitness for a particular purpose are disclaimed.</span>
<a name="l00033"></a>00033 <span class="comment">// In no event shall the Intel Corporation or contributors be liable for any direct,</span>
<a name="l00034"></a>00034 <span class="comment">// indirect, incidental, special, exemplary, or consequential damages</span>
<a name="l00035"></a>00035 <span class="comment">// (including, but not limited to, procurement of substitute goods or services;</span>
<a name="l00036"></a>00036 <span class="comment">// loss of use, data, or profits; or business interruption) however caused</span>
<a name="l00037"></a>00037 <span class="comment">// and on any theory of liability, whether in contract, strict liability,</span>
<a name="l00038"></a>00038 <span class="comment">// or tort (including negligence or otherwise) arising in any way out of</span>
<a name="l00039"></a>00039 <span class="comment">// the use of this software, even if advised of the possibility of such damage.</span>
<a name="l00040"></a>00040 <span class="comment">//</span>
<a name="l00041"></a>00041 <span class="comment">//M*/</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#ifndef __OPENCV_FEATURES_2D_HPP__</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#define __OPENCV_FEATURES_2D_HPP__</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="core_8hpp.html" title="The Core Functionality.">opencv2/core/core.hpp</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="flann_8hpp.html">opencv2/flann/flann.hpp</a>&quot;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#include &lt;limits&gt;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00053"></a>00053 <span class="preprocessor">#endif</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00055"></a><a class="code" href="struct_cv_s_u_r_f_point.html">00055</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_cv_s_u_r_f_point.html">CvSURFPoint</a>
<a name="l00056"></a>00056 {
<a name="l00057"></a><a class="code" href="struct_cv_s_u_r_f_point.html#a60dfd069a42d57a2259d862b14f287c1">00057</a>     <a class="code" href="struct_cv_point2_d32f.html">CvPoint2D32f</a> <a class="code" href="struct_cv_s_u_r_f_point.html#a60dfd069a42d57a2259d862b14f287c1">pt</a>;
<a name="l00058"></a>00058 
<a name="l00059"></a><a class="code" href="struct_cv_s_u_r_f_point.html#a584a2aa3e1c046b3e57b2a9c0d82c73d">00059</a>     <span class="keywordtype">int</span>          <a class="code" href="struct_cv_s_u_r_f_point.html#a584a2aa3e1c046b3e57b2a9c0d82c73d">laplacian</a>;
<a name="l00060"></a><a class="code" href="struct_cv_s_u_r_f_point.html#a0f46678907ba7a867a9eb2ade22a80eb">00060</a>     <span class="keywordtype">int</span>          <a class="code" href="struct_cv_s_u_r_f_point.html#a0f46678907ba7a867a9eb2ade22a80eb">size</a>;
<a name="l00061"></a><a class="code" href="struct_cv_s_u_r_f_point.html#a08e42d76fd78454974c1a2ce38e05c53">00061</a>     <span class="keywordtype">float</span>        <a class="code" href="struct_cv_s_u_r_f_point.html#a08e42d76fd78454974c1a2ce38e05c53">dir</a>;
<a name="l00062"></a><a class="code" href="struct_cv_s_u_r_f_point.html#ae24f023d123a23323684928d6bb423c6">00062</a>     <span class="keywordtype">float</span>        <a class="code" href="struct_cv_s_u_r_f_point.html#ae24f023d123a23323684928d6bb423c6">hessian</a>;
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 } <a class="code" href="features2d_8hpp.html#a34a8e145a6b9530daf392c79f263dfb3">CvSURFPoint</a>;
<a name="l00065"></a>00065 
<a name="l00066"></a><a class="code" href="features2d_8hpp.html#a43ee74763557157d5deb0259585bb006">00066</a> CV_INLINE <a class="code" href="struct_cv_s_u_r_f_point.html">CvSURFPoint</a> <a class="code" href="features2d_8hpp.html#a43ee74763557157d5deb0259585bb006">cvSURFPoint</a>( <a class="code" href="struct_cv_point2_d32f.html">CvPoint2D32f</a> <a class="code" href="imgproc__c_8h.html#ad6eaac986b8d4303fcae83fc3a05724d">pt</a>, <span class="keywordtype">int</span> laplacian,
<a name="l00067"></a>00067                                    <span class="keywordtype">int</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <span class="keywordtype">float</span> dir <a class="code" href="calib3d_8hpp.html#a726902e5e18dc93fc15fb57cca02e646">CV_DEFAULT</a>(0),
<a name="l00068"></a>00068                                    <span class="keywordtype">float</span> hessian <a class="code" href="calib3d_8hpp.html#a726902e5e18dc93fc15fb57cca02e646">CV_DEFAULT</a>(0))
<a name="l00069"></a>00069 {
<a name="l00070"></a>00070     <a class="code" href="struct_cv_s_u_r_f_point.html">CvSURFPoint</a> kp;
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     kp.<a class="code" href="struct_cv_s_u_r_f_point.html#a60dfd069a42d57a2259d862b14f287c1">pt</a>        = <a class="code" href="imgproc__c_8h.html#ad6eaac986b8d4303fcae83fc3a05724d">pt</a>;
<a name="l00073"></a>00073     kp.<a class="code" href="struct_cv_s_u_r_f_point.html#a584a2aa3e1c046b3e57b2a9c0d82c73d">laplacian</a> = laplacian;
<a name="l00074"></a>00074     kp.<a class="code" href="struct_cv_s_u_r_f_point.html#a0f46678907ba7a867a9eb2ade22a80eb">size</a>      = <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>;
<a name="l00075"></a>00075     kp.<a class="code" href="struct_cv_s_u_r_f_point.html#a08e42d76fd78454974c1a2ce38e05c53">dir</a>       = dir;
<a name="l00076"></a>00076     kp.<a class="code" href="struct_cv_s_u_r_f_point.html#ae24f023d123a23323684928d6bb423c6">hessian</a>   = hessian;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     <span class="keywordflow">return</span> kp;
<a name="l00079"></a>00079 }
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="struct_cv_s_u_r_f_params.html">00081</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_cv_s_u_r_f_params.html">CvSURFParams</a>
<a name="l00082"></a>00082 {
<a name="l00083"></a><a class="code" href="struct_cv_s_u_r_f_params.html#ae5ee86578ccbc8a56ad0174735404479">00083</a>     <span class="keywordtype">int</span>    <a class="code" href="struct_cv_s_u_r_f_params.html#ae5ee86578ccbc8a56ad0174735404479">extended</a>;
<a name="l00084"></a><a class="code" href="struct_cv_s_u_r_f_params.html#a0cbaaf84ed071756eb0c1354bf05ed79">00084</a>     <span class="keywordtype">int</span>    <a class="code" href="struct_cv_s_u_r_f_params.html#a0cbaaf84ed071756eb0c1354bf05ed79">upright</a>;
<a name="l00085"></a><a class="code" href="struct_cv_s_u_r_f_params.html#a57e3919e8bda581f2c7f8d2120056c40">00085</a>     <span class="keywordtype">double</span> <a class="code" href="struct_cv_s_u_r_f_params.html#a57e3919e8bda581f2c7f8d2120056c40">hessianThreshold</a>;
<a name="l00086"></a>00086 
<a name="l00087"></a><a class="code" href="struct_cv_s_u_r_f_params.html#a5d5f0670389c197ece9b188775600ce6">00087</a>     <span class="keywordtype">int</span>    <a class="code" href="struct_cv_s_u_r_f_params.html#a5d5f0670389c197ece9b188775600ce6">nOctaves</a>;
<a name="l00088"></a><a class="code" href="struct_cv_s_u_r_f_params.html#a6be1eb644274f0ba5fd650e656dc2524">00088</a>     <span class="keywordtype">int</span>    <a class="code" href="struct_cv_s_u_r_f_params.html#a6be1eb644274f0ba5fd650e656dc2524">nOctaveLayers</a>;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 } <a class="code" href="features2d_8hpp.html#a314165e79b8b61f6aa4f9293f95a01c3">CvSURFParams</a>;
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 <a class="code" href="calib3d_8hpp.html#ab3ff078a73ec6fb00e8e5dc21dbf5593">CVAPI</a>(<a class="code" href="struct_cv_s_u_r_f_params.html">CvSURFParams</a>) cvSURFParams( <span class="keywordtype">double</span> hessianThreshold, <span class="keywordtype">int</span> extended <a class="code" href="calib3d_8hpp.html#a726902e5e18dc93fc15fb57cca02e646">CV_DEFAULT</a>(0) );
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="comment">// If useProvidedKeyPts!=0, keypoints are not detected, but descriptors are computed</span>
<a name="l00095"></a>00095 <span class="comment">//  at the locations provided in keypoints (a CvSeq of CvSURFPoint).</span>
<a name="l00096"></a><a class="code" href="features2d_8hpp.html#ab35a5bdcc2a473820b807911b2c26b8b">00096</a> <a class="code" href="calib3d_8hpp.html#ab3ff078a73ec6fb00e8e5dc21dbf5593">CVAPI</a>(<span class="keywordtype">void</span>) cvExtractSURF( const <a class="code" href="core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* <a class="code" href="legacy_8hpp.html#a5349238b3772bed6eae0fda3117ccfef">img</a>, const <a class="code" href="core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>,
<a name="l00097"></a>00097                            <a class="code" href="struct_cv_seq.html">CvSeq</a>** <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <a class="code" href="struct_cv_seq.html">CvSeq</a>** <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a>,
<a name="l00098"></a>00098                            <a class="code" href="struct_cv_mem_storage.html">CvMemStorage</a>* <a class="code" href="core__c_8h.html#a970a07e901e339b08d59ffd66f372bc4">storage</a>, <a class="code" href="struct_cv_s_u_r_f_params.html">CvSURFParams</a> <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a>, <span class="keywordtype">int</span> useProvidedKeyPts CV_DEFAULT(0)  );
<a name="l00099"></a>00099 
<a name="l00103"></a><a class="code" href="struct_cv_m_s_e_r_params.html">00103</a> typedef struct <a class="code" href="struct_cv_m_s_e_r_params.html" title="Maximal Stable Regions Parameters.">CvMSERParams</a>
<a name="l00104"></a>00104 {
<a name="l00106"></a><a class="code" href="struct_cv_m_s_e_r_params.html#a9a8574af934f1efe0aacb610fd273f04">00106</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_m_s_e_r_params.html#a9a8574af934f1efe0aacb610fd273f04" title="delta, in the code, it compares (size_{i}-size_{i-delta})/size_{i-delta}">delta</a>;
<a name="l00108"></a><a class="code" href="struct_cv_m_s_e_r_params.html#a4f2be25b22dd08ebf741240d9b5a445e">00108</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_m_s_e_r_params.html#a4f2be25b22dd08ebf741240d9b5a445e" title="prune the area which bigger than maxArea">maxArea</a>;
<a name="l00110"></a><a class="code" href="struct_cv_m_s_e_r_params.html#aa05b341d994d1fd85e199f5c4fe41db0">00110</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_m_s_e_r_params.html#aa05b341d994d1fd85e199f5c4fe41db0" title="prune the area which smaller than minArea">minArea</a>;
<a name="l00112"></a><a class="code" href="struct_cv_m_s_e_r_params.html#acb769f970c8804c122db9c5dbbc9a37d">00112</a>     <span class="keywordtype">float</span> <a class="code" href="struct_cv_m_s_e_r_params.html#acb769f970c8804c122db9c5dbbc9a37d" title="prune the area have simliar size to its children">maxVariation</a>;
<a name="l00114"></a><a class="code" href="struct_cv_m_s_e_r_params.html#addc1cf6caebd85fa2eee45be5cafe613">00114</a>     <span class="keywordtype">float</span> <a class="code" href="struct_cv_m_s_e_r_params.html#addc1cf6caebd85fa2eee45be5cafe613" title="trace back to cut off mser with diversity &lt; min_diversity">minDiversity</a>;
<a name="l00115"></a>00115     
<a name="l00117"></a>00117     
<a name="l00119"></a><a class="code" href="struct_cv_m_s_e_r_params.html#ae2c65c573f5749809ae5cf426a4bd311">00119</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_m_s_e_r_params.html#ae2c65c573f5749809ae5cf426a4bd311" title="for color image, the evolution steps">maxEvolution</a>;
<a name="l00121"></a><a class="code" href="struct_cv_m_s_e_r_params.html#a2da123e24b459290065e7714bd7c1833">00121</a>     <span class="keywordtype">double</span> <a class="code" href="struct_cv_m_s_e_r_params.html#a2da123e24b459290065e7714bd7c1833" title="the area threshold to cause re-initialize">areaThreshold</a>;
<a name="l00123"></a><a class="code" href="struct_cv_m_s_e_r_params.html#ad06b0684eab5f764baf1ddcb9627dbe0">00123</a>     <span class="keywordtype">double</span> <a class="code" href="struct_cv_m_s_e_r_params.html#ad06b0684eab5f764baf1ddcb9627dbe0" title="ignore too small margin">minMargin</a>;
<a name="l00125"></a><a class="code" href="struct_cv_m_s_e_r_params.html#a968af0c998169f789c72f7c1320fd029">00125</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_m_s_e_r_params.html#a968af0c998169f789c72f7c1320fd029" title="the aperture size for edge blur">edgeBlurSize</a>;
<a name="l00126"></a>00126 } <a class="code" href="features2d_8hpp.html#af87750117989c8128fd6eb6a54c7d706" title="Maximal Stable Regions Parameters.">CvMSERParams</a>;
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 <a class="code" href="calib3d_8hpp.html#ab3ff078a73ec6fb00e8e5dc21dbf5593">CVAPI</a>(<a class="code" href="struct_cv_m_s_e_r_params.html" title="Maximal Stable Regions Parameters.">CvMSERParams</a>) cvMSERParams( <span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#a5763d62f5c6f37e64f38d25dddcc10fa">delta</a> <a class="code" href="calib3d_8hpp.html#a726902e5e18dc93fc15fb57cca02e646">CV_DEFAULT</a>(5), <span class="keywordtype">int</span> min_area CV_DEFAULT(60),
<a name="l00129"></a>00129                            <span class="keywordtype">int</span> max_area CV_DEFAULT(14400), <span class="keywordtype">float</span> max_variation CV_DEFAULT(.25f),
<a name="l00130"></a>00130                            <span class="keywordtype">float</span> min_diversity CV_DEFAULT(.2f), <span class="keywordtype">int</span> max_evolution CV_DEFAULT(200),
<a name="l00131"></a>00131                            <span class="keywordtype">double</span> area_threshold CV_DEFAULT(1.01),
<a name="l00132"></a>00132                            <span class="keywordtype">double</span> min_margin CV_DEFAULT(.003),
<a name="l00133"></a>00133                            <span class="keywordtype">int</span> edge_blur_size CV_DEFAULT(5) );
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 <span class="comment">// Extracts the contours of Maximally Stable Extremal Regions</span>
<a name="l00136"></a><a class="code" href="features2d_8hpp.html#a04f5d307711b17326d069621f0288f40">00136</a> <a class="code" href="calib3d_8hpp.html#ab3ff078a73ec6fb00e8e5dc21dbf5593">CVAPI</a>(<span class="keywordtype">void</span>) cvExtractMSER( <a class="code" href="core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* _img, <a class="code" href="core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* <a class="code" href="features2d_8hpp.html#a2189d8eeeb1db1f788f140ef73979f60">_mask</a>, <a class="code" href="struct_cv_seq.html">CvSeq</a>** <a class="code" href="core__c_8h.html#ad2730ea8d331d56b653a9bd464800705">contours</a>, <a class="code" href="struct_cv_mem_storage.html">CvMemStorage</a>* <a class="code" href="core__c_8h.html#a970a07e901e339b08d59ffd66f372bc4">storage</a>, <a class="code" href="struct_cv_m_s_e_r_params.html" title="Maximal Stable Regions Parameters.">CvMSERParams</a> <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a> );
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 
<a name="l00139"></a><a class="code" href="struct_cv_star_keypoint.html">00139</a> typedef struct <a class="code" href="struct_cv_star_keypoint.html">CvStarKeypoint</a>
<a name="l00140"></a>00140 {
<a name="l00141"></a><a class="code" href="struct_cv_star_keypoint.html#a11e9bdef9f976cd6efd52f15528202f7">00141</a>     <a class="code" href="struct_cv_point.html">CvPoint</a> <a class="code" href="struct_cv_star_keypoint.html#a11e9bdef9f976cd6efd52f15528202f7">pt</a>;
<a name="l00142"></a><a class="code" href="struct_cv_star_keypoint.html#a484ba003548660389a9b547618f23a8b">00142</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_keypoint.html#a484ba003548660389a9b547618f23a8b">size</a>;
<a name="l00143"></a><a class="code" href="struct_cv_star_keypoint.html#a1f824a700a88dd7f8c0114292626cae0">00143</a>     <span class="keywordtype">float</span> <a class="code" href="struct_cv_star_keypoint.html#a1f824a700a88dd7f8c0114292626cae0">response</a>;
<a name="l00144"></a>00144 } <a class="code" href="features2d_8hpp.html#a3a861c677fca07583e7c2cefb9923c4c">CvStarKeypoint</a>;
<a name="l00145"></a>00145 
<a name="l00146"></a><a class="code" href="features2d_8hpp.html#a2f99191cda0700de3f89b88fd939fdaf">00146</a> CV_INLINE <a class="code" href="struct_cv_star_keypoint.html">CvStarKeypoint</a> <a class="code" href="features2d_8hpp.html#a2f99191cda0700de3f89b88fd939fdaf">cvStarKeypoint</a>(<a class="code" href="struct_cv_point.html">CvPoint</a> pt, <span class="keywordtype">int</span> size, <span class="keywordtype">float</span> response)
<a name="l00147"></a>00147 {
<a name="l00148"></a>00148     <a class="code" href="struct_cv_star_keypoint.html">CvStarKeypoint</a> kpt;
<a name="l00149"></a>00149     kpt.<a class="code" href="struct_cv_star_keypoint.html#a11e9bdef9f976cd6efd52f15528202f7">pt</a> = <a class="code" href="imgproc__c_8h.html#ad6eaac986b8d4303fcae83fc3a05724d">pt</a>;
<a name="l00150"></a>00150     kpt.<a class="code" href="struct_cv_star_keypoint.html#a484ba003548660389a9b547618f23a8b">size</a> = <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>;
<a name="l00151"></a>00151     kpt.<a class="code" href="struct_cv_star_keypoint.html#a1f824a700a88dd7f8c0114292626cae0">response</a> = response;
<a name="l00152"></a>00152     <span class="keywordflow">return</span> kpt;
<a name="l00153"></a>00153 }
<a name="l00154"></a>00154 
<a name="l00155"></a><a class="code" href="struct_cv_star_detector_params.html">00155</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a>
<a name="l00156"></a>00156 {
<a name="l00157"></a><a class="code" href="struct_cv_star_detector_params.html#ae4a5645ee251bf0b6bcfef97972b00ed">00157</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_detector_params.html#ae4a5645ee251bf0b6bcfef97972b00ed">maxSize</a>;
<a name="l00158"></a><a class="code" href="struct_cv_star_detector_params.html#a612e4bed30e8dbbda35f61c2b869360b">00158</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_detector_params.html#a612e4bed30e8dbbda35f61c2b869360b">responseThreshold</a>;
<a name="l00159"></a><a class="code" href="struct_cv_star_detector_params.html#ac6c399320ca6052b0767dafc2273f3c6">00159</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_detector_params.html#ac6c399320ca6052b0767dafc2273f3c6">lineThresholdProjected</a>;
<a name="l00160"></a><a class="code" href="struct_cv_star_detector_params.html#af8dddfad7b61bb6ce1bc3f3cc9b663a6">00160</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_detector_params.html#af8dddfad7b61bb6ce1bc3f3cc9b663a6">lineThresholdBinarized</a>;
<a name="l00161"></a><a class="code" href="struct_cv_star_detector_params.html#a213ff31a306fcf3fbace6939d8154cd4">00161</a>     <span class="keywordtype">int</span> <a class="code" href="struct_cv_star_detector_params.html#a213ff31a306fcf3fbace6939d8154cd4">suppressNonmaxSize</a>;
<a name="l00162"></a>00162 } <a class="code" href="features2d_8hpp.html#a8ec546e3ea4eb7a000b3eb77c0649fed">CvStarDetectorParams</a>;
<a name="l00163"></a>00163 
<a name="l00164"></a><a class="code" href="features2d_8hpp.html#a06c87c7caa7c4baf9c36a9909f735de3">00164</a> CV_INLINE <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a> <a class="code" href="features2d_8hpp.html#a06c87c7caa7c4baf9c36a9909f735de3">cvStarDetectorParams</a>(
<a name="l00165"></a>00165     <span class="keywordtype">int</span> maxSize <a class="code" href="calib3d_8hpp.html#a726902e5e18dc93fc15fb57cca02e646">CV_DEFAULT</a>(45),
<a name="l00166"></a>00166     <span class="keywordtype">int</span> responseThreshold <a class="code" href="calib3d_8hpp.html#a726902e5e18dc93fc15fb57cca02e646">CV_DEFAULT</a>(30),
<a name="l00167"></a>00167     <span class="keywordtype">int</span> lineThresholdProjected <a class="code" href="calib3d_8hpp.html#a726902e5e18dc93fc15fb57cca02e646">CV_DEFAULT</a>(10),
<a name="l00168"></a>00168     <span class="keywordtype">int</span> lineThresholdBinarized <a class="code" href="calib3d_8hpp.html#a726902e5e18dc93fc15fb57cca02e646">CV_DEFAULT</a>(8),
<a name="l00169"></a>00169     <span class="keywordtype">int</span> suppressNonmaxSize <a class="code" href="calib3d_8hpp.html#a726902e5e18dc93fc15fb57cca02e646">CV_DEFAULT</a>(5))
<a name="l00170"></a>00170 {
<a name="l00171"></a>00171     <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a> <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a>;
<a name="l00172"></a>00172     params.<a class="code" href="struct_cv_star_detector_params.html#ae4a5645ee251bf0b6bcfef97972b00ed">maxSize</a> = maxSize;
<a name="l00173"></a>00173     params.<a class="code" href="struct_cv_star_detector_params.html#a612e4bed30e8dbbda35f61c2b869360b">responseThreshold</a> = responseThreshold;
<a name="l00174"></a>00174     params.<a class="code" href="struct_cv_star_detector_params.html#ac6c399320ca6052b0767dafc2273f3c6">lineThresholdProjected</a> = lineThresholdProjected;
<a name="l00175"></a>00175     params.<a class="code" href="struct_cv_star_detector_params.html#af8dddfad7b61bb6ce1bc3f3cc9b663a6">lineThresholdBinarized</a> = lineThresholdBinarized;
<a name="l00176"></a>00176     params.<a class="code" href="struct_cv_star_detector_params.html#a213ff31a306fcf3fbace6939d8154cd4">suppressNonmaxSize</a> = suppressNonmaxSize;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     <span class="keywordflow">return</span> <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a>;
<a name="l00179"></a>00179 }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 <a class="code" href="calib3d_8hpp.html#ab3ff078a73ec6fb00e8e5dc21dbf5593">CVAPI</a>(<a class="code" href="struct_cv_seq.html">CvSeq</a>*) cvGetStarKeypoints( const <a class="code" href="core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* <a class="code" href="legacy_8hpp.html#a5349238b3772bed6eae0fda3117ccfef">img</a>, <a class="code" href="struct_cv_mem_storage.html">CvMemStorage</a>* <a class="code" href="core__c_8h.html#a970a07e901e339b08d59ffd66f372bc4">storage</a>,
<a name="l00182"></a>00182         <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a> <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a> <a class="code" href="calib3d_8hpp.html#a726902e5e18dc93fc15fb57cca02e646">CV_DEFAULT</a>(<a class="code" href="features2d_8hpp.html#a06c87c7caa7c4baf9c36a9909f735de3">cvStarDetectorParams</a>()));
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00185"></a>00185 <span class="preprocessor"></span>}
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 <span class="keyword">namespace </span>cv
<a name="l00188"></a>00188 {
<a name="l00189"></a><a class="code" href="structcv_1_1_default_rng_auto.html">00189</a>     <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_default_rng_auto.html">DefaultRngAuto</a>
<a name="l00190"></a>00190     {
<a name="l00191"></a><a class="code" href="structcv_1_1_default_rng_auto.html#a185253a8da68974e317c361affe1178b">00191</a>         <span class="keyword">const</span> <a class="code" href="core_2types__c_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a> <a class="code" href="structcv_1_1_default_rng_auto.html#a185253a8da68974e317c361affe1178b">old_state</a>;
<a name="l00192"></a>00192 
<a name="l00193"></a><a class="code" href="structcv_1_1_default_rng_auto.html#ad5eebc8c7e2fe7ecd913814bc2737914">00193</a>         <a class="code" href="structcv_1_1_default_rng_auto.html#ad5eebc8c7e2fe7ecd913814bc2737914">DefaultRngAuto</a>() : old_state(<a class="code" href="namespacecv.html#a7486e8baca835c4a4b57e689b9a01c23" title="returns the thread-local Random number generator">theRNG</a>().<a class="code" href="calib3d_8hpp.html#ae1a2f77ed661441e31e2edb273c66845">state</a>) { <a class="code" href="namespacecv.html#a7486e8baca835c4a4b57e689b9a01c23" title="returns the thread-local Random number generator">theRNG</a>().<a class="code" href="classcv_1_1_r_n_g.html#a993bd2e6a5a9b8f3b37ba6049b523136">state</a> = (<a class="code" href="core_2types__c_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a>)-1; }
<a name="l00194"></a><a class="code" href="structcv_1_1_default_rng_auto.html#aa32c09ce5a436ef33211da5cd85744bb">00194</a>         <a class="code" href="structcv_1_1_default_rng_auto.html#aa32c09ce5a436ef33211da5cd85744bb">~DefaultRngAuto</a>() { <a class="code" href="namespacecv.html#a7486e8baca835c4a4b57e689b9a01c23" title="returns the thread-local Random number generator">theRNG</a>().<a class="code" href="classcv_1_1_r_n_g.html#a993bd2e6a5a9b8f3b37ba6049b523136">state</a> = old_state; }
<a name="l00195"></a>00195 
<a name="l00196"></a>00196         <a class="code" href="structcv_1_1_default_rng_auto.html">DefaultRngAuto</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="structcv_1_1_default_rng_auto.html">DefaultRngAuto</a>&amp;);
<a name="l00197"></a>00197     };
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="comment">// CvAffinePose: defines a parameterized affine transformation of an image patch.</span>
<a name="l00201"></a>00201 <span class="comment">// An image patch is rotated on angle phi (in degrees), then scaled lambda1 times</span>
<a name="l00202"></a>00202 <span class="comment">// along horizontal and lambda2 times along vertical direction, and then rotated again</span>
<a name="l00203"></a>00203 <span class="comment">// on angle (theta - phi).</span>
<a name="l00204"></a><a class="code" href="classcv_1_1_cv_affine_pose.html">00204</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_cv_affine_pose.html">CvAffinePose</a>
<a name="l00205"></a>00205 {
<a name="l00206"></a>00206 <span class="keyword">public</span>:
<a name="l00207"></a><a class="code" href="classcv_1_1_cv_affine_pose.html#a6935fab7cdae0323cee00d35d6b68db8">00207</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_cv_affine_pose.html#a6935fab7cdae0323cee00d35d6b68db8">phi</a>;
<a name="l00208"></a><a class="code" href="classcv_1_1_cv_affine_pose.html#a07bc5cfd27a73950aee42c4392cab5f5">00208</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_cv_affine_pose.html#a07bc5cfd27a73950aee42c4392cab5f5">theta</a>;
<a name="l00209"></a><a class="code" href="classcv_1_1_cv_affine_pose.html#aa040397c98c023b75530db70004cd50f">00209</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_cv_affine_pose.html#aa040397c98c023b75530db70004cd50f">lambda1</a>;
<a name="l00210"></a><a class="code" href="classcv_1_1_cv_affine_pose.html#a9868b77bc608b26c168a306dc0a20131">00210</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_cv_affine_pose.html#a9868b77bc608b26c168a306dc0a20131">lambda2</a>;
<a name="l00211"></a>00211 };
<a name="l00212"></a>00212 
<a name="l00225"></a><a class="code" href="classcv_1_1_key_point.html">00225</a> <span class="keyword">class </span>CV_EXPORTS_W_SIMPLE <a class="code" href="classcv_1_1_key_point.html" title="The Keypoint Class.">KeyPoint</a>
<a name="l00226"></a>00226 {
<a name="l00227"></a>00227 <span class="keyword">public</span>:
<a name="l00229"></a><a class="code" href="classcv_1_1_key_point.html#a2fadd76d5cfe880fdfd3343d09c9903d">00229</a>     CV_WRAP <a class="code" href="classcv_1_1_key_point.html#a2fadd76d5cfe880fdfd3343d09c9903d" title="the default constructor">KeyPoint</a>() : pt(0,0), size(0), <a class="code" href="core__c_8h.html#a00147158cd32c0f762ad7d5917e6d8fd">angle</a>(-1), response(0), octave(0), class_id(-1) {}
<a name="l00231"></a><a class="code" href="classcv_1_1_key_point.html#a8ce2d246f9dbd4ce3f1539bf40be9533">00231</a>     <a class="code" href="classcv_1_1_key_point.html" title="The Keypoint Class.">KeyPoint</a>(<a class="code" href="classcv_1_1_point__.html">Point2f</a> _pt, <span class="keywordtype">float</span> _size, <span class="keywordtype">float</span> _angle=-1,
<a name="l00232"></a>00232             <span class="keywordtype">float</span> _response=0, <span class="keywordtype">int</span> _octave=0, <span class="keywordtype">int</span> _class_id=-1)
<a name="l00233"></a>00233             : pt(_pt), size(_size), <a class="code" href="core__c_8h.html#a00147158cd32c0f762ad7d5917e6d8fd">angle</a>(_angle),
<a name="l00234"></a>00234             response(_response), octave(_octave), class_id(_class_id) {}
<a name="l00236"></a><a class="code" href="classcv_1_1_key_point.html#a8c43060b2e28f13ae25f49bcecc9c090">00236</a>     CV_WRAP <a class="code" href="classcv_1_1_key_point.html" title="The Keypoint Class.">KeyPoint</a>(<span class="keywordtype">float</span> <a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <span class="keywordtype">float</span> <a class="code" href="highgui__c_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>, <span class="keywordtype">float</span> _size, <span class="keywordtype">float</span> _angle=-1,
<a name="l00237"></a>00237             <span class="keywordtype">float</span> _response=0, <span class="keywordtype">int</span> _octave=0, <span class="keywordtype">int</span> _class_id=-1)
<a name="l00238"></a>00238             : pt(x, y), size(_size), <a class="code" href="core__c_8h.html#a00147158cd32c0f762ad7d5917e6d8fd">angle</a>(_angle),
<a name="l00239"></a>00239             response(_response), octave(_octave), class_id(_class_id) {}
<a name="l00240"></a>00240     
<a name="l00241"></a>00241     <span class="keywordtype">size_t</span> hash() <span class="keyword">const</span>;
<a name="l00242"></a>00242     
<a name="l00244"></a>00244     <span class="keyword">static</span> <span class="keywordtype">void</span> convert(<span class="keyword">const</span> std::vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>,
<a name="l00245"></a>00245                         CV_OUT std::vector&lt;Point2f&gt;&amp; points2f,
<a name="l00246"></a>00246                         <span class="keyword">const</span> std::vector&lt;int&gt;&amp; keypointIndexes=std::vector&lt;int&gt;());
<a name="l00248"></a>00248     <span class="keyword">static</span> <span class="keywordtype">void</span> convert(<span class="keyword">const</span> std::vector&lt;Point2f&gt;&amp; points2f,
<a name="l00249"></a>00249                         CV_OUT std::vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00250"></a>00250                         <span class="keywordtype">float</span> size=1, <span class="keywordtype">float</span> response=1, <span class="keywordtype">int</span> octave=0, <span class="keywordtype">int</span> class_id=-1);
<a name="l00251"></a>00251 
<a name="l00255"></a>00255     <span class="keyword">static</span> <span class="keywordtype">float</span> overlap(<span class="keyword">const</span> <a class="code" href="classcv_1_1_key_point.html" title="The Keypoint Class.">KeyPoint</a>&amp; kp1, <span class="keyword">const</span> <a class="code" href="classcv_1_1_key_point.html" title="The Keypoint Class.">KeyPoint</a>&amp; kp2);
<a name="l00256"></a>00256 
<a name="l00257"></a><a class="code" href="classcv_1_1_key_point.html#a8410f718cb06603edfb06a597ecdd853">00257</a>     CV_PROP_RW <a class="code" href="classcv_1_1_point__.html">Point2f</a> <a class="code" href="classcv_1_1_key_point.html#a8410f718cb06603edfb06a597ecdd853" title="coordinates of the keypoints">pt</a>; 
<a name="l00258"></a><a class="code" href="classcv_1_1_key_point.html#ae3d0ccdfaa4b8e277d40d4ce2e5a11c2">00258</a>     CV_PROP_RW <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_key_point.html#ae3d0ccdfaa4b8e277d40d4ce2e5a11c2" title="diameter of the meaningful keypoint neighborhood">size</a>; 
<a name="l00259"></a><a class="code" href="classcv_1_1_key_point.html#a6b5e108ec030c0caf016fda4b4ca688f">00259</a>     CV_PROP_RW <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_key_point.html#a6b5e108ec030c0caf016fda4b4ca688f" title="computed orientation of the keypoint (-1 if not applicable)">angle</a>; 
<a name="l00260"></a><a class="code" href="classcv_1_1_key_point.html#acbb7a7d1608c7b14edec418f5098f2d7">00260</a>     CV_PROP_RW <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_key_point.html#acbb7a7d1608c7b14edec418f5098f2d7" title="the response by which the most strong keypoints have been selected.">response</a>; 
<a name="l00261"></a><a class="code" href="classcv_1_1_key_point.html#abe25c6483d8db938d0cd15e0b4649720">00261</a>     CV_PROP_RW <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_key_point.html#abe25c6483d8db938d0cd15e0b4649720" title="octave (pyramid layer) from which the keypoint has been extracted">octave</a>; 
<a name="l00262"></a><a class="code" href="classcv_1_1_key_point.html#adcb6d1aa47b2e8d29b0b302982127269">00262</a>     CV_PROP_RW <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_key_point.html#adcb6d1aa47b2e8d29b0b302982127269" title="object class (if the keypoints need to be clustered by an object they belong to)">class_id</a>; 
<a name="l00263"></a>00263 };
<a name="l00264"></a>00264     
<a name="l00266"></a>00266 CV_EXPORTS <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; <a class="code" href="core__c_8h.html#add928d8eb85ea33a25a67db3406d4887">name</a>, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>);
<a name="l00268"></a>00268 CV_EXPORTS <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; <a class="code" href="core__c_8h.html#a4e145da43d8cadc65b69ce0c2a2cc76a">node</a>, CV_OUT vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>);    
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 <span class="comment">/*</span>
<a name="l00271"></a>00271 <span class="comment"> * A class filters a vector of keypoints.</span>
<a name="l00272"></a>00272 <span class="comment"> * Because now it is difficult to provide a convenient interface for all usage scenarios of the keypoints filter class,</span>
<a name="l00273"></a>00273 <span class="comment"> * it has only 4 needed by now static methods.</span>
<a name="l00274"></a>00274 <span class="comment"> */</span>
<a name="l00275"></a><a class="code" href="classcv_1_1_key_points_filter.html">00275</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_key_points_filter.html">KeyPointsFilter</a>
<a name="l00276"></a>00276 {
<a name="l00277"></a>00277 <span class="keyword">public</span>:
<a name="l00278"></a><a class="code" href="classcv_1_1_key_points_filter.html#a30034e37cc543bcec5d29ca1a14a0ae5">00278</a>     <a class="code" href="classcv_1_1_key_points_filter.html#a30034e37cc543bcec5d29ca1a14a0ae5">KeyPointsFilter</a>(){}
<a name="l00279"></a>00279 
<a name="l00280"></a>00280     <span class="comment">/*</span>
<a name="l00281"></a>00281 <span class="comment">     * Remove keypoints within borderPixels of an image edge.</span>
<a name="l00282"></a>00282 <span class="comment">     */</span>
<a name="l00283"></a>00283     <span class="keyword">static</span> <span class="keywordtype">void</span> runByImageBorder( vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <a class="code" href="classcv_1_1_size__.html" title="The 2D size class.">Size</a> <a class="code" href="legacy_8hpp.html#a190127ac383c0871da9bddc06739c5d6">imageSize</a>, <span class="keywordtype">int</span> borderSize );
<a name="l00284"></a>00284     <span class="comment">/*</span>
<a name="l00285"></a>00285 <span class="comment">     * Remove keypoints of sizes out of range.</span>
<a name="l00286"></a>00286 <span class="comment">     */</span>
<a name="l00287"></a>00287     <span class="keyword">static</span> <span class="keywordtype">void</span> runByKeypointSize( vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keywordtype">float</span> minSize, <span class="keywordtype">float</span> maxSize=<a class="code" href="namespacecv.html#a22a8f8afb6090a66a771348b658dcebd" title="computes per-element maximum of two arrays (dst = max(src1, src2))">std::numeric_limits&lt;float&gt;::max</a>() );
<a name="l00288"></a>00288     <span class="comment">/*</span>
<a name="l00289"></a>00289 <span class="comment">     * Remove keypoints from some image by mask for pixels of this image.</span>
<a name="l00290"></a>00290 <span class="comment">     */</span>
<a name="l00291"></a>00291     <span class="keyword">static</span> <span class="keywordtype">void</span> runByPixelsMask( vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a> );
<a name="l00292"></a>00292     <span class="comment">/*</span>
<a name="l00293"></a>00293 <span class="comment">     * Remove duplicated keypoints.</span>
<a name="l00294"></a>00294 <span class="comment">     */</span>
<a name="l00295"></a>00295     <span class="keyword">static</span> <span class="keywordtype">void</span> removeDuplicated( vector&lt;KeyPoint&gt;&amp; keypoints );
<a name="l00296"></a>00296 };
<a name="l00297"></a>00297 
<a name="l00304"></a><a class="code" href="classcv_1_1_s_i_f_t.html">00304</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_s_i_f_t.html" title="SIFT implementation.">SIFT</a>
<a name="l00305"></a>00305 {
<a name="l00306"></a>00306 <span class="keyword">public</span>:
<a name="l00307"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">00307</a>     <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a>
<a name="l00308"></a>00308     {
<a name="l00309"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a3516d8027be21337d54fa9f342f0de12">00309</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_NOCTAVES = 4;
<a name="l00310"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#ac5b52d9fb2a3670b2a1e118635997d83">00310</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_NOCTAVE_LAYERS = 3;
<a name="l00311"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a1c06d5c17c1a277d3ab7331a2e1d6032">00311</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_FIRST_OCTAVE = -1;
<a name="l00312"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#af098535fb60243e12778736e3a962381a1c0fbeaa6583f475bcf560370d779071">00312</a>         <span class="keyword">enum</span> { FIRST_ANGLE = 0, AVERAGE_ANGLE = 1 };
<a name="l00313"></a>00313 
<a name="l00314"></a>00314         <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a>();
<a name="l00315"></a>00315         <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a>( <span class="keywordtype">int</span> _nOctaves, <span class="keywordtype">int</span> _nOctaveLayers, <span class="keywordtype">int</span> <span class="comment">/*_firstOctave*/</span>, <span class="keywordtype">int</span> <span class="comment">/*_angleMode*/</span> );
<a name="l00316"></a>00316         <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a>( <span class="keywordtype">int</span> _nOctaves, <span class="keywordtype">int</span> _nOctaveLayers );
<a name="l00317"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a4d293014ad69e9fc9057b7772c07b5e0">00317</a>         <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a4d293014ad69e9fc9057b7772c07b5e0">nOctaves</a>, nOctaveLayers;
<a name="l00318"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#ae8c3854bdc8f65048fea179dcf1bc614">00318</a>         <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#ae8c3854bdc8f65048fea179dcf1bc614">firstOctave</a>; <span class="comment">// it is not used now (firstOctave == 0 always)</span>
<a name="l00319"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a55d88b1227e72f90db941c9b4973298e">00319</a>         <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a55d88b1227e72f90db941c9b4973298e">angleMode</a>;   <span class="comment">// it is not used now</span>
<a name="l00320"></a>00320     };
<a name="l00321"></a>00321 
<a name="l00322"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">00322</a>     <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a>
<a name="l00323"></a>00323     {
<a name="l00324"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a4d7ba322238dc0feb3af2f63960e27ef">00324</a>         <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a4d7ba322238dc0feb3af2f63960e27ef">GET_DEFAULT_THRESHOLD</a>() { <span class="keywordflow">return</span> 0.04; }
<a name="l00325"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a7fc13c52f74349ae32fa66add5f5b85c">00325</a>         <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a7fc13c52f74349ae32fa66add5f5b85c">GET_DEFAULT_EDGE_THRESHOLD</a>() { <span class="keywordflow">return</span> 10.0; }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327         <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a>();
<a name="l00328"></a>00328         <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a>( <span class="keywordtype">double</span> _threshold, <span class="keywordtype">double</span> _edgeThreshold );
<a name="l00329"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a9b82821034692cc3e1f9bd0c51da9dda">00329</a>         <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html#a9b82821034692cc3e1f9bd0c51da9dda">threshold</a>, edgeThreshold;
<a name="l00330"></a>00330     };
<a name="l00331"></a>00331 
<a name="l00332"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">00332</a>     <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>
<a name="l00333"></a>00333     {
<a name="l00334"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a995de2653d08ebbc7b606e6eab895145">00334</a>         <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a995de2653d08ebbc7b606e6eab895145">GET_DEFAULT_MAGNIFICATION</a>() { <span class="keywordflow">return</span> 3.0; }
<a name="l00335"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a2e7d8c1179c021886b67074908479027">00335</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> DEFAULT_IS_NORMALIZE = <span class="keyword">true</span>;
<a name="l00336"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#aac9f852285f283f0d8575877044120c4">00336</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DESCRIPTOR_SIZE = 128;
<a name="l00337"></a>00337 
<a name="l00338"></a>00338         <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>();
<a name="l00339"></a>00339         <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>( <span class="keywordtype">double</span> _magnification, <span class="keywordtype">bool</span> <span class="comment">/*_isNormalize*/</span>, <span class="keywordtype">bool</span> _recalculateAngles );
<a name="l00340"></a>00340         <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>( <span class="keywordtype">bool</span> _recalculateAngles );
<a name="l00341"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#acf5186e782419603de311665a12c9c1e">00341</a>         <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#acf5186e782419603de311665a12c9c1e">magnification</a>;
<a name="l00342"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a306280ea3b3e4808b6539f685a7819d5">00342</a>         <span class="keywordtype">bool</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a306280ea3b3e4808b6539f685a7819d5">isNormalize</a>; <span class="comment">// it is not used now (true always)</span>
<a name="l00343"></a><a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a129cd968f84cfe977c58d2c240efff8d">00343</a>         <span class="keywordtype">bool</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html#a129cd968f84cfe977c58d2c240efff8d">recalculateAngles</a>;
<a name="l00344"></a>00344     };
<a name="l00345"></a>00345 
<a name="l00346"></a>00346     <a class="code" href="classcv_1_1_s_i_f_t.html" title="SIFT implementation.">SIFT</a>();
<a name="l00348"></a>00348     <a class="code" href="classcv_1_1_s_i_f_t.html" title="SIFT implementation.">SIFT</a>( <span class="keywordtype">double</span> _threshold, <span class="keywordtype">double</span> _edgeThreshold,
<a name="l00349"></a>00349           <span class="keywordtype">int</span> _nOctaves=CommonParams::DEFAULT_NOCTAVES,
<a name="l00350"></a>00350           <span class="keywordtype">int</span> _nOctaveLayers=CommonParams::DEFAULT_NOCTAVE_LAYERS,
<a name="l00351"></a>00351           <span class="keywordtype">int</span> _firstOctave=CommonParams::DEFAULT_FIRST_OCTAVE,
<a name="l00352"></a>00352           <span class="keywordtype">int</span> _angleMode=CommonParams::FIRST_ANGLE );
<a name="l00354"></a>00354     <a class="code" href="classcv_1_1_s_i_f_t.html" title="SIFT implementation.">SIFT</a>( <span class="keywordtype">double</span> _magnification, <span class="keywordtype">bool</span> _isNormalize=<span class="keyword">true</span>,
<a name="l00355"></a>00355           <span class="keywordtype">bool</span> _recalculateAngles = <span class="keyword">true</span>,
<a name="l00356"></a>00356           <span class="keywordtype">int</span> _nOctaves=CommonParams::DEFAULT_NOCTAVES,
<a name="l00357"></a>00357           <span class="keywordtype">int</span> _nOctaveLayers=CommonParams::DEFAULT_NOCTAVE_LAYERS,
<a name="l00358"></a>00358           <span class="keywordtype">int</span> _firstOctave=CommonParams::DEFAULT_FIRST_OCTAVE,
<a name="l00359"></a>00359           <span class="keywordtype">int</span> _angleMode=CommonParams::FIRST_ANGLE );
<a name="l00360"></a>00360     <a class="code" href="classcv_1_1_s_i_f_t.html" title="SIFT implementation.">SIFT</a>( <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a>&amp; _commParams,
<a name="l00361"></a>00361           <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a>&amp; _detectorParams = <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a>(),
<a name="l00362"></a>00362           <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>&amp; _descriptorParams = <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a>() );
<a name="l00363"></a>00363 
<a name="l00365"></a>00365     <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l00367"></a>00367     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="legacy_8hpp.html#a5349238b3772bed6eae0fda3117ccfef">img</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>,
<a name="l00368"></a>00368                     vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>) <span class="keyword">const</span>;
<a name="l00371"></a>00371     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="legacy_8hpp.html#a5349238b3772bed6eae0fda3117ccfef">img</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>,
<a name="l00372"></a>00372                     vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>,
<a name="l00373"></a>00373                     <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a>,
<a name="l00374"></a>00374                     <span class="keywordtype">bool</span> useProvidedKeypoints=<span class="keyword">false</span>) <span class="keyword">const</span>;
<a name="l00375"></a>00375 
<a name="l00376"></a>00376     <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a> getCommonParams () <span class="keyword">const</span>;
<a name="l00377"></a>00377     <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a> getDetectorParams () <span class="keyword">const</span>;
<a name="l00378"></a>00378     <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a> getDescriptorParams () <span class="keyword">const</span>;
<a name="l00379"></a>00379 
<a name="l00380"></a>00380 <span class="keyword">protected</span>:
<a name="l00381"></a><a class="code" href="classcv_1_1_s_i_f_t.html#a8143aa7ba1cb7ecba205419e26469d0e">00381</a>     <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">CommonParams</a> <a class="code" href="classcv_1_1_s_i_f_t.html#a8143aa7ba1cb7ecba205419e26469d0e">commParams</a>;
<a name="l00382"></a><a class="code" href="classcv_1_1_s_i_f_t.html#af586f6e4aa41844cabdbf578906fc5ec">00382</a>     <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">DetectorParams</a> <a class="code" href="classcv_1_1_s_i_f_t.html#af586f6e4aa41844cabdbf578906fc5ec">detectorParams</a>;
<a name="l00383"></a><a class="code" href="classcv_1_1_s_i_f_t.html#a8c290ccabfbfaad28ffcf1ff473e3cf5">00383</a>     <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">DescriptorParams</a> <a class="code" href="classcv_1_1_s_i_f_t.html#a8c290ccabfbfaad28ffcf1ff473e3cf5">descriptorParams</a>;
<a name="l00384"></a>00384 };
<a name="l00385"></a>00385 
<a name="l00386"></a>00386     
<a name="l00392"></a><a class="code" href="classcv_1_1_s_u_r_f.html">00392</a> <span class="keyword">class </span>CV_EXPORTS_W <a class="code" href="classcv_1_1_s_u_r_f.html" title="SURF implementation.">SURF</a> : <span class="keyword">public</span> <a class="code" href="struct_cv_s_u_r_f_params.html">CvSURFParams</a>
<a name="l00393"></a>00393 {
<a name="l00394"></a>00394 <span class="keyword">public</span>:
<a name="l00396"></a>00396     CV_WRAP <a class="code" href="classcv_1_1_s_u_r_f.html" title="SURF implementation.">SURF</a>();
<a name="l00398"></a>00398     CV_WRAP SURF(<span class="keywordtype">double</span> _hessianThreshold, <span class="keywordtype">int</span> _nOctaves=4,
<a name="l00399"></a>00399          <span class="keywordtype">int</span> _nOctaveLayers=2, <span class="keywordtype">bool</span> _extended=<span class="keyword">false</span>, <span class="keywordtype">bool</span> _upright=<span class="keyword">false</span>);
<a name="l00400"></a>00400 
<a name="l00402"></a>00402     CV_WRAP <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l00404"></a><a class="code" href="classcv_1_1_s_u_r_f.html#a8f388811fa14865451b44f42f6603346">00404</a>     CV_WRAP_AS(detect) <a class="code" href="highgui__c_8h.html#ad1f9461adaad33556b3a01c7f2c6ceab">void</a> operator()(const <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="legacy_8hpp.html#a5349238b3772bed6eae0fda3117ccfef">img</a>, const <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>,
<a name="l00405"></a>00405                     CV_OUT vector&lt;<a class="code" href="classcv_1_1_key_point.html" title="The Keypoint Class.">KeyPoint</a>&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>) const;
<a name="l00407"></a><a class="code" href="classcv_1_1_s_u_r_f.html#afb012976cceb9f842cd34ad54283ff6b">00407</a>     CV_WRAP_AS(detect) <span class="keywordtype">void</span> operator()(const <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; img, const <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; mask,
<a name="l00408"></a>00408                     CV_OUT vector&lt;<a class="code" href="classcv_1_1_key_point.html" title="The Keypoint Class.">KeyPoint</a>&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>,
<a name="l00409"></a>00409                     CV_OUT vector&lt;<span class="keywordtype">float</span>&gt;&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a>,
<a name="l00410"></a><a class="code" href="classcv_1_1_s_u_r_f.html#a649bce43365654281c2e84045b2e7cca">00410</a>                     <span class="keywordtype">bool</span> useProvidedKeypoints=false) const;
<a name="l00411"></a>00411 };
<a name="l00412"></a>00412 
<a name="l00416"></a><a class="code" href="classcv_1_1_o_r_b.html">00416</a> class CV_EXPORTS <a class="code" href="classcv_1_1_o_r_b.html" title="ORB implementation.">ORB</a>
<a name="l00417"></a>00417 {
<a name="l00418"></a>00418 <span class="keyword">public</span>:
<a name="l00419"></a>00419 
<a name="l00421"></a><a class="code" href="classcv_1_1_o_r_b.html#a3998fb9ef8e0dd991ffdf9740dd0b235a6a9099ec08f3f2dd64cb848af560bb53">00421</a>   <span class="keyword">enum</span> { kBytes = 32 };
<a name="l00422"></a>00422 
<a name="l00423"></a><a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">00423</a>   <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">CommonParams</a>
<a name="l00424"></a>00424   {
<a name="l00425"></a><a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#ac424f326ef5981796d2e0f511edcdb52a83a0e2ea54d6894d8743b561e4808255">00425</a>     <span class="keyword">enum</span> { DEFAULT_N_LEVELS = 3, DEFAULT_FIRST_LEVEL = 0};
<a name="l00426"></a>00426 
<a name="l00428"></a><a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#a23c5f0738f6f29c896d56ddf63065f4f">00428</a>     <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">CommonParams</a>(<span class="keywordtype">float</span> scale_factor = 1.2f, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_levels = DEFAULT_N_LEVELS, <span class="keywordtype">int</span> edge_threshold = 31,
<a name="l00429"></a>00429                  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> first_level = DEFAULT_FIRST_LEVEL) :
<a name="l00430"></a>00430       scale_factor_(scale_factor), n_levels_(n_levels), first_level_(first_level &gt;= n_levels ? 0 : first_level),
<a name="l00431"></a>00431       edge_threshold_(edge_threshold)
<a name="l00432"></a>00432     {
<a name="l00433"></a>00433       <span class="comment">// No other patch size is supported right now</span>
<a name="l00434"></a>00434       patch_size_ = 31;
<a name="l00435"></a>00435     }
<a name="l00436"></a>00436     <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; fn);
<a name="l00437"></a>00437     <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs) <span class="keyword">const</span>;
<a name="l00438"></a>00438 
<a name="l00440"></a><a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#a071393b3fac82103606c294e4851719d">00440</a>     <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#a071393b3fac82103606c294e4851719d">scale_factor_</a>;
<a name="l00442"></a><a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#a751e51437f554cafadf6f17aa5a91e0b">00442</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#a751e51437f554cafadf6f17aa5a91e0b">n_levels_</a>;
<a name="l00446"></a><a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#add2d651e1635220b8703ad1ae0f250a0">00446</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#add2d651e1635220b8703ad1ae0f250a0">first_level_</a>;
<a name="l00448"></a><a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#aeeac5fb20f3e5e3fcba1a876d66dd4c8">00448</a>     <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#aeeac5fb20f3e5e3fcba1a876d66dd4c8">edge_threshold_</a>;
<a name="l00449"></a>00449 
<a name="l00450"></a><a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#a42ba3a6389261f9c90e44b0254f4caad">00450</a>     <span class="keyword">friend</span> <span class="keyword">class </span>ORB;
<a name="l00451"></a>00451   <span class="keyword">protected</span>:
<a name="l00453"></a><a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#ae56e9faf0c5e1f39bef53f26c42860b9">00453</a>     <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html#ae56e9faf0c5e1f39bef53f26c42860b9">patch_size_</a>;
<a name="l00454"></a>00454   };
<a name="l00455"></a>00455 
<a name="l00460"></a>00460   ORB(<span class="keywordtype">size_t</span> n_features = 500, <span class="keyword">const</span> <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">CommonParams</a> &amp; detector_params = <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">CommonParams</a>());
<a name="l00461"></a>00461 
<a name="l00463"></a>00463   ~ORB();
<a name="l00464"></a>00464 
<a name="l00466"></a>00466   <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l00467"></a>00467 
<a name="l00473"></a>00473   <span class="keywordtype">void</span>
<a name="l00474"></a>00474   operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp;<a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp;mask, std::vector&lt;cv::KeyPoint&gt; &amp; keypoints);
<a name="l00475"></a>00475 
<a name="l00483"></a>00483   <span class="keywordtype">void</span>
<a name="l00484"></a>00484   operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp;<a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp;mask, std::vector&lt;cv::KeyPoint&gt; &amp; keypoints, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp; descriptors,
<a name="l00485"></a>00485              <span class="keywordtype">bool</span> useProvidedKeypoints = <span class="keyword">false</span>);
<a name="l00486"></a>00486 
<a name="l00487"></a>00487 <span class="keyword">private</span>:
<a name="l00489"></a>00489   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kKernelWidth = 5;
<a name="l00490"></a>00490 
<a name="l00499"></a>00499   <span class="keywordtype">void</span>
<a name="l00500"></a>00500   operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp;<a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp;mask, std::vector&lt;cv::KeyPoint&gt; &amp; keypoints, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp; descriptors,
<a name="l00501"></a>00501              <span class="keywordtype">bool</span> do_keypoints, <span class="keywordtype">bool</span> do_descriptors);
<a name="l00502"></a>00502 
<a name="l00508"></a>00508   <span class="keywordtype">void</span> computeKeyPoints(<span class="keyword">const</span> std::vector&lt;cv::Mat&gt;&amp; image_pyramid, <span class="keyword">const</span> std::vector&lt;cv::Mat&gt;&amp; mask_pyramid,
<a name="l00509"></a>00509                         std::vector&lt;std::vector&lt;cv::KeyPoint&gt; &gt;&amp; keypoints) <span class="keyword">const</span>;
<a name="l00510"></a>00510 
<a name="l00517"></a>00517   <span class="keywordtype">void</span>
<a name="l00518"></a>00518   computeOrientation(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>&amp; integral_image, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="imgproc__c_8h.html#ac693e272fb1883fe0343f55a14d72b22">level</a>,
<a name="l00519"></a>00519                      std::vector&lt;cv::KeyPoint&gt;&amp; keypoints) <span class="keyword">const</span>;
<a name="l00520"></a>00520 
<a name="l00528"></a>00528   <span class="keywordtype">void</span>
<a name="l00529"></a>00529   computeDescriptors(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>&amp; integral_image, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="imgproc__c_8h.html#ac693e272fb1883fe0343f55a14d72b22">level</a>,
<a name="l00530"></a>00530                      std::vector&lt;cv::KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp; descriptors) <span class="keyword">const</span>;
<a name="l00531"></a>00531 
<a name="l00537"></a>00537   <span class="keywordtype">void</span> computeIntegralImage(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="imgproc__c_8h.html#ac693e272fb1883fe0343f55a14d72b22">level</a>, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp;integral_image);
<a name="l00538"></a>00538 
<a name="l00540"></a>00540   <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">CommonParams</a> params_;
<a name="l00541"></a>00541 
<a name="l00543"></a>00543   <span class="keywordtype">int</span> half_patch_size_;
<a name="l00544"></a>00544 
<a name="l00546"></a>00546   std::vector&lt;std::vector&lt;int&gt; &gt; orientation_horizontal_offsets_;
<a name="l00547"></a>00547   std::vector&lt;std::vector&lt;int&gt; &gt; orientation_vertical_offsets_;
<a name="l00548"></a>00548 
<a name="l00550"></a>00550   std::vector&lt;size_t&gt; integral_image_steps_;
<a name="l00551"></a>00551 
<a name="l00553"></a>00553   std::vector&lt;size_t&gt; n_features_per_level_;
<a name="l00554"></a>00554 
<a name="l00556"></a>00556   <span class="keywordtype">size_t</span> n_features_;
<a name="l00557"></a>00557 
<a name="l00559"></a>00559   std::vector&lt;int&gt; u_max_;
<a name="l00560"></a>00560 
<a name="l00562"></a>00562   <span class="keyword">class </span>OrbPatterns;
<a name="l00563"></a>00563   std::vector&lt;OrbPatterns*&gt; patterns_;
<a name="l00564"></a>00564 };
<a name="l00565"></a>00565 
<a name="l00575"></a><a class="code" href="classcv_1_1_m_s_e_r.html">00575</a> <span class="keyword">class </span>CV_EXPORTS_W <a class="code" href="classcv_1_1_m_s_e_r.html" title="Maximal Stable Extremal Regions class.">MSER</a> : <span class="keyword">public</span> <a class="code" href="struct_cv_m_s_e_r_params.html" title="Maximal Stable Regions Parameters.">CvMSERParams</a>
<a name="l00576"></a>00576 {
<a name="l00577"></a>00577 <span class="keyword">public</span>:
<a name="l00579"></a>00579     CV_WRAP <a class="code" href="classcv_1_1_m_s_e_r.html" title="Maximal Stable Extremal Regions class.">MSER</a>();
<a name="l00581"></a>00581     CV_WRAP MSER( <span class="keywordtype">int</span> _delta, <span class="keywordtype">int</span> _min_area, <span class="keywordtype">int</span> _max_area,
<a name="l00582"></a>00582           <span class="keywordtype">double</span> _max_variation, <span class="keywordtype">double</span> _min_diversity,
<a name="l00583"></a>00583           <span class="keywordtype">int</span> _max_evolution, <span class="keywordtype">double</span> _area_threshold,
<a name="l00584"></a>00584           <span class="keywordtype">double</span> _min_margin, <span class="keywordtype">int</span> _edge_blur_size );
<a name="l00586"></a>00586     CV_WRAP_AS(detect) <span class="keywordtype">void</span> operator()( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>,
<a name="l00587"></a><a class="code" href="classcv_1_1_m_s_e_r.html#a68c34f7c00ab0f9ac1f61f20e521d152">00587</a>         CV_OUT vector&lt;vector&lt;Point&gt; &gt;&amp; msers, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; mask ) <span class="keyword">const</span>;
<a name="l00588"></a>00588 };
<a name="l00589"></a>00589 
<a name="l00595"></a><a class="code" href="classcv_1_1_star_detector.html">00595</a> <span class="keyword">class </span>CV_EXPORTS_W <a class="code" href="classcv_1_1_star_detector.html" title="The &quot;Star&quot; Detector.">StarDetector</a> : <span class="keyword">public</span> <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a>
<a name="l00596"></a>00596 {
<a name="l00597"></a>00597 <span class="keyword">public</span>:
<a name="l00599"></a>00599     CV_WRAP <a class="code" href="classcv_1_1_star_detector.html" title="The &quot;Star&quot; Detector.">StarDetector</a>();
<a name="l00601"></a>00601     CV_WRAP StarDetector(<span class="keywordtype">int</span> _maxSize, <span class="keywordtype">int</span> _responseThreshold,
<a name="l00602"></a>00602                  <span class="keywordtype">int</span> _lineThresholdProjected,
<a name="l00603"></a>00603                  <span class="keywordtype">int</span> _lineThresholdBinarized,
<a name="l00604"></a>00604                  <span class="keywordtype">int</span> _suppressNonmaxSize);
<a name="l00606"></a>00606     CV_WRAP_AS(detect) <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>,
<a name="l00607"></a><a class="code" href="classcv_1_1_star_detector.html#a8225f5809abb2f6009f867e9134ac082">00607</a>                 CV_OUT vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>) <span class="keyword">const</span>;
<a name="l00608"></a>00608 };
<a name="l00609"></a>00609 
<a name="l00611"></a>00611 CV_EXPORTS <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a4b044160b6400f76e36c22276f99395b" title="detects corners using FAST algorithm by E. Rosten">FAST</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, CV_OUT vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>,
<a name="l00612"></a>00612                       <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#abd93e7119f2b85135109ab4b1f4f9eaf" title="applies fixed threshold to the image">threshold</a>, <span class="keywordtype">bool</span> nonmaxSupression=<span class="keyword">true</span> );
<a name="l00613"></a>00613 
<a name="l00617"></a><a class="code" href="classcv_1_1_patch_generator.html">00617</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>
<a name="l00618"></a>00618 {
<a name="l00619"></a>00619 <span class="keyword">public</span>:
<a name="l00620"></a>00620     <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>();
<a name="l00621"></a>00621     <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>(<span class="keywordtype">double</span> _backgroundMin, <span class="keywordtype">double</span> _backgroundMax,
<a name="l00622"></a>00622                    <span class="keywordtype">double</span> _noiseRange, <span class="keywordtype">bool</span> _randomBlur=<span class="keyword">true</span>,
<a name="l00623"></a>00623                    <span class="keywordtype">double</span> _lambdaMin=0.6, <span class="keywordtype">double</span> _lambdaMax=1.5,
<a name="l00624"></a>00624                    <span class="keywordtype">double</span> _thetaMin=-CV_PI, <span class="keywordtype">double</span> _thetaMax=CV_PI,
<a name="l00625"></a>00625                    <span class="keywordtype">double</span> _phiMin=-CV_PI, <span class="keywordtype">double</span> _phiMax=CV_PI );
<a name="l00626"></a>00626     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, <a class="code" href="classcv_1_1_point__.html">Point2f</a> pt, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; patch, <a class="code" href="classcv_1_1_size__.html" title="The 2D size class.">Size</a> patchSize, <a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a>&amp; <a class="code" href="core__c_8h.html#a8d3f239dca9d5c72c8a66d7a1c142efd">rng</a>) <span class="keyword">const</span>;
<a name="l00627"></a>00627     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; image, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="namespacecv.html#a1fde6d7b2bc077001501b8c201f2ec09" title="performs affine transformation of each element of multi-channel input matrix">transform</a>, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; patch,
<a name="l00628"></a>00628                     <a class="code" href="classcv_1_1_size__.html" title="The 2D size class.">Size</a> patchSize, <a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a>&amp; rng) <span class="keyword">const</span>;
<a name="l00629"></a>00629     <span class="keywordtype">void</span> warpWholeImage(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; image, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; matT, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; buf,
<a name="l00630"></a>00630                         CV_OUT <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; warped, <span class="keywordtype">int</span> border, <a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a>&amp; rng) <span class="keyword">const</span>;
<a name="l00631"></a>00631     <span class="keywordtype">void</span> generateRandomTransform(<a class="code" href="classcv_1_1_point__.html">Point2f</a> srcCenter, <a class="code" href="classcv_1_1_point__.html">Point2f</a> dstCenter,
<a name="l00632"></a>00632                                  CV_OUT <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; transform, <a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a>&amp; rng,
<a name="l00633"></a>00633                                  <span class="keywordtype">bool</span> inverse=<span class="keyword">false</span>) <span class="keyword">const</span>;
<a name="l00634"></a>00634     <span class="keywordtype">void</span> setAffineParam(<span class="keywordtype">double</span> <a class="code" href="tracking_8hpp.html#a2b2a31d8b9a3be743757541bf16e5801">lambda</a>, <span class="keywordtype">double</span> <a class="code" href="imgproc__c_8h.html#a90ba48f41646a904a861746079d43f17">theta</a>, <span class="keywordtype">double</span> phi);
<a name="l00635"></a>00635     
<a name="l00636"></a><a class="code" href="classcv_1_1_patch_generator.html#a3c2b6aca2c406e7617dbd5fd83ec5a0a">00636</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_patch_generator.html#a3c2b6aca2c406e7617dbd5fd83ec5a0a">backgroundMin</a>, backgroundMax;
<a name="l00637"></a><a class="code" href="classcv_1_1_patch_generator.html#a3c8dcaf83943fb23d3f92aeda91d9c96">00637</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_patch_generator.html#a3c8dcaf83943fb23d3f92aeda91d9c96">noiseRange</a>;
<a name="l00638"></a><a class="code" href="classcv_1_1_patch_generator.html#ade5abfe6a85cace20395aed14ffece51">00638</a>     <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_patch_generator.html#ade5abfe6a85cace20395aed14ffece51">randomBlur</a>;
<a name="l00639"></a><a class="code" href="classcv_1_1_patch_generator.html#a22ea3826cd7c440b966330b112889ee6">00639</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_patch_generator.html#a22ea3826cd7c440b966330b112889ee6">lambdaMin</a>, lambdaMax;
<a name="l00640"></a><a class="code" href="classcv_1_1_patch_generator.html#a5177046d4572deffe9cb86786bcea262">00640</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_patch_generator.html#a5177046d4572deffe9cb86786bcea262">thetaMin</a>, thetaMax;
<a name="l00641"></a><a class="code" href="classcv_1_1_patch_generator.html#a7d9f41b65e2b2e8f55297588361bc55b">00641</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_patch_generator.html#a7d9f41b65e2b2e8f55297588361bc55b">phiMin</a>, phiMax;
<a name="l00642"></a>00642 };
<a name="l00643"></a>00643 
<a name="l00644"></a>00644 
<a name="l00645"></a><a class="code" href="classcv_1_1_l_detector.html">00645</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_l_detector.html">LDetector</a>
<a name="l00646"></a>00646 {
<a name="l00647"></a>00647 <span class="keyword">public</span>:
<a name="l00648"></a>00648     <a class="code" href="classcv_1_1_l_detector.html">LDetector</a>();
<a name="l00649"></a>00649     <a class="code" href="classcv_1_1_l_detector.html">LDetector</a>(<span class="keywordtype">int</span> _radius, <span class="keywordtype">int</span> _threshold, <span class="keywordtype">int</span> _nOctaves,
<a name="l00650"></a>00650               <span class="keywordtype">int</span> _nViews, <span class="keywordtype">double</span> _baseFeatureSize, <span class="keywordtype">double</span> _clusteringDistance);
<a name="l00651"></a>00651     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>,
<a name="l00652"></a>00652                     CV_OUT vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>,
<a name="l00653"></a>00653                     <span class="keywordtype">int</span> maxCount=0, <span class="keywordtype">bool</span> scaleCoords=<span class="keyword">true</span>) <span class="keyword">const</span>;
<a name="l00654"></a>00654     <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> vector&lt;Mat&gt;&amp; pyr,
<a name="l00655"></a>00655                     CV_OUT vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00656"></a>00656                     <span class="keywordtype">int</span> maxCount=0, <span class="keywordtype">bool</span> scaleCoords=<span class="keyword">true</span>) <span class="keyword">const</span>;
<a name="l00657"></a>00657     <span class="keywordtype">void</span> getMostStable2D(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; image, CV_OUT vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l00658"></a>00658                          <span class="keywordtype">int</span> maxCount, <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>&amp; patchGenerator) <span class="keyword">const</span>;
<a name="l00659"></a>00659     <span class="keywordtype">void</span> setVerbose(<span class="keywordtype">bool</span> verbose);
<a name="l00660"></a>00660     
<a name="l00661"></a>00661     <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; <a class="code" href="core__c_8h.html#a4e145da43d8cadc65b69ce0c2a2cc76a">node</a>);
<a name="l00662"></a>00662     <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs, <span class="keyword">const</span> <a class="code" href="namespacecv.html#a1f6634802eeadfd7245bc75cf3e216c2">String</a>&amp; <a class="code" href="core__c_8h.html#add928d8eb85ea33a25a67db3406d4887">name</a>=<a class="code" href="namespacecv.html#a1f6634802eeadfd7245bc75cf3e216c2">String</a>()) <span class="keyword">const</span>;
<a name="l00663"></a>00663     
<a name="l00664"></a><a class="code" href="classcv_1_1_l_detector.html#aafdeb086edf9c1d3f03134d98facddf1">00664</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_l_detector.html#aafdeb086edf9c1d3f03134d98facddf1">radius</a>;
<a name="l00665"></a><a class="code" href="classcv_1_1_l_detector.html#a372dcd920ed343bb20a3b6f2799555f4">00665</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_l_detector.html#a372dcd920ed343bb20a3b6f2799555f4">threshold</a>;
<a name="l00666"></a><a class="code" href="classcv_1_1_l_detector.html#a13838093a3d39f8013f756c165f0d7ae">00666</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_l_detector.html#a13838093a3d39f8013f756c165f0d7ae">nOctaves</a>;
<a name="l00667"></a><a class="code" href="classcv_1_1_l_detector.html#adf2f18a509af4b7491fa84618d1c7a35">00667</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_l_detector.html#adf2f18a509af4b7491fa84618d1c7a35">nViews</a>;
<a name="l00668"></a><a class="code" href="classcv_1_1_l_detector.html#a42b927a3a8a1d463e4aff0cdfd87250d">00668</a>     <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_l_detector.html#a42b927a3a8a1d463e4aff0cdfd87250d">verbose</a>;
<a name="l00669"></a>00669     
<a name="l00670"></a><a class="code" href="classcv_1_1_l_detector.html#a4eca668768bb9da7a20ad1d8ceac2824">00670</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_l_detector.html#a4eca668768bb9da7a20ad1d8ceac2824">baseFeatureSize</a>;
<a name="l00671"></a><a class="code" href="classcv_1_1_l_detector.html#a897c277c3e229558a9b2e127ddab2884">00671</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_l_detector.html#a897c277c3e229558a9b2e127ddab2884">clusteringDistance</a>;
<a name="l00672"></a>00672 };
<a name="l00673"></a>00673 
<a name="l00674"></a><a class="code" href="namespacecv.html#ac1744a010c8adb6f5ce848b9b2f8b42b">00674</a> <span class="keyword">typedef</span> <a class="code" href="classcv_1_1_l_detector.html">LDetector</a> <a class="code" href="namespacecv.html#ac1744a010c8adb6f5ce848b9b2f8b42b">YAPE</a>;
<a name="l00675"></a>00675 
<a name="l00676"></a><a class="code" href="classcv_1_1_fern_classifier.html">00676</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>
<a name="l00677"></a>00677 {
<a name="l00678"></a>00678 <span class="keyword">public</span>:
<a name="l00679"></a>00679     <a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>();
<a name="l00680"></a>00680     <a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; <a class="code" href="core__c_8h.html#a4e145da43d8cadc65b69ce0c2a2cc76a">node</a>);
<a name="l00681"></a>00681     <a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>(<span class="keyword">const</span> vector&lt;vector&lt;Point2f&gt; &gt;&amp; <a class="code" href="legacy_8hpp.html#a8c4b676395bf614cc92b782d12f18847">points</a>,
<a name="l00682"></a>00682                    <span class="keyword">const</span> vector&lt;Mat&gt;&amp; refimgs,
<a name="l00683"></a>00683                    <span class="keyword">const</span> vector&lt;vector&lt;int&gt; &gt;&amp; <a class="code" href="core__c_8h.html#a1342f74a0f7dd7c20ab7e79b2e6e5af5">labels</a>=vector&lt;vector&lt;int&gt; &gt;(),
<a name="l00684"></a>00684                    <span class="keywordtype">int</span> _nclasses=0, <span class="keywordtype">int</span> _patchSize=PATCH_SIZE,
<a name="l00685"></a>00685                    <span class="keywordtype">int</span> _signatureSize=DEFAULT_SIGNATURE_SIZE,
<a name="l00686"></a>00686                    <span class="keywordtype">int</span> _nstructs=DEFAULT_STRUCTS,
<a name="l00687"></a>00687                    <span class="keywordtype">int</span> _structSize=DEFAULT_STRUCT_SIZE,
<a name="l00688"></a>00688                    <span class="keywordtype">int</span> _nviews=DEFAULT_VIEWS,
<a name="l00689"></a>00689                    <span class="keywordtype">int</span> _compressionMethod=COMPRESSION_NONE,
<a name="l00690"></a>00690                    <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>());
<a name="l00691"></a>00691     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_fern_classifier.html">FernClassifier</a>();
<a name="l00692"></a>00692     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; <a class="code" href="imgproc__c_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>);
<a name="l00693"></a>00693     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs, <span class="keyword">const</span> <a class="code" href="namespacecv.html#a1f6634802eeadfd7245bc75cf3e216c2">String</a>&amp; <a class="code" href="core__c_8h.html#add928d8eb85ea33a25a67db3406d4887">name</a>=<a class="code" href="namespacecv.html#a1f6634802eeadfd7245bc75cf3e216c2">String</a>()) <span class="keyword">const</span>;
<a name="l00694"></a>00694     <span class="keyword">virtual</span> <span class="keywordtype">void</span> trainFromSingleView(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>,
<a name="l00695"></a>00695                                      <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>,
<a name="l00696"></a>00696                                      <span class="keywordtype">int</span> _patchSize=PATCH_SIZE,
<a name="l00697"></a>00697                                      <span class="keywordtype">int</span> _signatureSize=DEFAULT_SIGNATURE_SIZE,
<a name="l00698"></a>00698                                      <span class="keywordtype">int</span> _nstructs=DEFAULT_STRUCTS,
<a name="l00699"></a>00699                                      <span class="keywordtype">int</span> _structSize=DEFAULT_STRUCT_SIZE,
<a name="l00700"></a>00700                                      <span class="keywordtype">int</span> _nviews=DEFAULT_VIEWS,
<a name="l00701"></a>00701                                      <span class="keywordtype">int</span> _compressionMethod=COMPRESSION_NONE,
<a name="l00702"></a>00702                                      <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>());
<a name="l00703"></a>00703     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train(<span class="keyword">const</span> vector&lt;vector&lt;Point2f&gt; &gt;&amp; <a class="code" href="legacy_8hpp.html#a8c4b676395bf614cc92b782d12f18847">points</a>,
<a name="l00704"></a>00704                        <span class="keyword">const</span> vector&lt;Mat&gt;&amp; refimgs,
<a name="l00705"></a>00705                        <span class="keyword">const</span> vector&lt;vector&lt;int&gt; &gt;&amp; <a class="code" href="core__c_8h.html#a1342f74a0f7dd7c20ab7e79b2e6e5af5">labels</a>=vector&lt;vector&lt;int&gt; &gt;(),
<a name="l00706"></a>00706                        <span class="keywordtype">int</span> _nclasses=0, <span class="keywordtype">int</span> _patchSize=PATCH_SIZE,
<a name="l00707"></a>00707                        <span class="keywordtype">int</span> _signatureSize=DEFAULT_SIGNATURE_SIZE,
<a name="l00708"></a>00708                        <span class="keywordtype">int</span> _nstructs=DEFAULT_STRUCTS,
<a name="l00709"></a>00709                        <span class="keywordtype">int</span> _structSize=DEFAULT_STRUCT_SIZE,
<a name="l00710"></a>00710                        <span class="keywordtype">int</span> _nviews=DEFAULT_VIEWS,
<a name="l00711"></a>00711                        <span class="keywordtype">int</span> _compressionMethod=COMPRESSION_NONE,
<a name="l00712"></a>00712                        <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>());
<a name="l00713"></a>00713     <span class="keyword">virtual</span> <span class="keywordtype">int</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="legacy_8hpp.html#a5349238b3772bed6eae0fda3117ccfef">img</a>, <a class="code" href="classcv_1_1_point__.html">Point2f</a> kpt, vector&lt;float&gt;&amp; signature) <span class="keyword">const</span>;
<a name="l00714"></a>00714     <span class="keyword">virtual</span> <span class="keywordtype">int</span> operator()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; patch, vector&lt;float&gt;&amp; signature) <span class="keyword">const</span>;
<a name="l00715"></a>00715     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="codeRef" doxygen="cinder.tag:../../../../docs/html/" href="../../../../docs/html/namespacecinder_1_1gl.html#a2fbfcc011e3992ebe4a239464a97d896">clear</a>();
<a name="l00716"></a>00716     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l00717"></a>00717     <span class="keywordtype">void</span> setVerbose(<span class="keywordtype">bool</span> verbose);
<a name="l00718"></a>00718     
<a name="l00719"></a>00719     <span class="keywordtype">int</span> getClassCount() <span class="keyword">const</span>;
<a name="l00720"></a>00720     <span class="keywordtype">int</span> getStructCount() <span class="keyword">const</span>;
<a name="l00721"></a>00721     <span class="keywordtype">int</span> getStructSize() <span class="keyword">const</span>;
<a name="l00722"></a>00722     <span class="keywordtype">int</span> getSignatureSize() <span class="keyword">const</span>;
<a name="l00723"></a>00723     <span class="keywordtype">int</span> getCompressionMethod() <span class="keyword">const</span>;
<a name="l00724"></a>00724     <a class="code" href="classcv_1_1_size__.html" title="The 2D size class.">Size</a> getPatchSize() <span class="keyword">const</span>;
<a name="l00725"></a>00725     
<a name="l00726"></a><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html">00726</a>     <span class="keyword">struct </span><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html">Feature</a>
<a name="l00727"></a>00727     {
<a name="l00728"></a><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#ab6e52584abe52841dbe48135df7f25a5">00728</a>         <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> x1, y1, x2, <a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#ab6e52584abe52841dbe48135df7f25a5">y2</a>;
<a name="l00729"></a><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#a10210adfba0d3f8e702755689c4be8c3">00729</a>         <a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#a10210adfba0d3f8e702755689c4be8c3">Feature</a>() : x1(0), y1(0), x2(0), y2(0) {}
<a name="l00730"></a><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#aca2f2cbc953bb99e9fee4bb27ce8cdc9">00730</a>         <a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html">Feature</a>(<span class="keywordtype">int</span> _x1, <span class="keywordtype">int</span> _y1, <span class="keywordtype">int</span> _x2, <span class="keywordtype">int</span> _y2)
<a name="l00731"></a>00731         : x1((<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)_x1), y1((<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)_y1), x2((<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)_x2), y2((<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)_y2)
<a name="l00732"></a>00732         {}
<a name="l00733"></a><a class="code" href="structcv_1_1_fern_classifier_1_1_feature.html#a9580650396e1258d2d26e047c0786e4f">00733</a>         <span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Tp&gt; <span class="keywordtype">bool</span> operator ()(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat__.html" title="Template matrix class derived from Mat.">Mat_&lt;_Tp&gt;</a>&amp; patch)<span class="keyword"> const</span>
<a name="l00734"></a>00734 <span class="keyword">        </span>{ <span class="keywordflow">return</span> patch(y1,x1) &gt; patch(y2, x2); }
<a name="l00735"></a>00735     };
<a name="l00736"></a>00736     
<a name="l00737"></a>00737     <span class="keyword">enum</span>
<a name="l00738"></a>00738     {
<a name="l00739"></a><a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54a24404de82f8919357a5f8e79ebbd9d1a">00739</a>         PATCH_SIZE = 31,
<a name="l00740"></a><a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54ab6933cb0baa7f1218196052c4dbfe66c">00740</a>         DEFAULT_STRUCTS = 50,
<a name="l00741"></a><a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54ae6b19b111a3c9a6fd339907e6118d707">00741</a>         DEFAULT_STRUCT_SIZE = 9,
<a name="l00742"></a><a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54a333a37941aa3a8a7039ad179cb124216">00742</a>         DEFAULT_VIEWS = 5000,
<a name="l00743"></a><a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54a4278805e49ddbabb97b52e29973b9d85">00743</a>         DEFAULT_SIGNATURE_SIZE = 176,
<a name="l00744"></a><a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54acc4c78b39eb783cc2b4fdd9fe1e87588">00744</a>         COMPRESSION_NONE = 0,
<a name="l00745"></a><a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54a07c39baad3b4a32a32ad9961113f6bb7">00745</a>         COMPRESSION_RANDOM_PROJ = 1,
<a name="l00746"></a><a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54a77a99c3ce4424b798cb14c330d02159c">00746</a>         COMPRESSION_PCA = 2,
<a name="l00747"></a><a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54ad64e17809b9e5ee5918a064499a792d1">00747</a>         DEFAULT_COMPRESSION_METHOD = COMPRESSION_NONE
<a name="l00748"></a>00748     };
<a name="l00749"></a>00749     
<a name="l00750"></a>00750 <span class="keyword">protected</span>:
<a name="l00751"></a>00751     <span class="keyword">virtual</span> <span class="keywordtype">void</span> prepare(<span class="keywordtype">int</span> _nclasses, <span class="keywordtype">int</span> _patchSize, <span class="keywordtype">int</span> _signatureSize,
<a name="l00752"></a>00752                          <span class="keywordtype">int</span> _nstructs, <span class="keywordtype">int</span> _structSize,
<a name="l00753"></a>00753                          <span class="keywordtype">int</span> _nviews, <span class="keywordtype">int</span> _compressionMethod);
<a name="l00754"></a>00754     <span class="keyword">virtual</span> <span class="keywordtype">void</span> finalize(<a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a>&amp; <a class="code" href="core__c_8h.html#a8d3f239dca9d5c72c8a66d7a1c142efd">rng</a>);
<a name="l00755"></a>00755     <span class="keyword">virtual</span> <span class="keywordtype">int</span> getLeaf(<span class="keywordtype">int</span> fidx, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; patch) <span class="keyword">const</span>;
<a name="l00756"></a>00756     
<a name="l00757"></a><a class="code" href="classcv_1_1_fern_classifier.html#a6c07d0e7d6c0f4408da2262bd45ad74b">00757</a>     <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_fern_classifier.html#a6c07d0e7d6c0f4408da2262bd45ad74b">verbose</a>;
<a name="l00758"></a><a class="code" href="classcv_1_1_fern_classifier.html#a3f703df096262e6af708e96cf234f0dc">00758</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#a3f703df096262e6af708e96cf234f0dc">nstructs</a>;
<a name="l00759"></a><a class="code" href="classcv_1_1_fern_classifier.html#ab4c1c62685a2876bc06c689cd2822d03">00759</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#ab4c1c62685a2876bc06c689cd2822d03">structSize</a>;
<a name="l00760"></a><a class="code" href="classcv_1_1_fern_classifier.html#a606e0788c21e756270064eb80b8bd571">00760</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#a606e0788c21e756270064eb80b8bd571">nclasses</a>;
<a name="l00761"></a><a class="code" href="classcv_1_1_fern_classifier.html#ab75e2d78282d0091c8f0b594e8e4a7e3">00761</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#ab75e2d78282d0091c8f0b594e8e4a7e3">signatureSize</a>;
<a name="l00762"></a><a class="code" href="classcv_1_1_fern_classifier.html#af2ddf7ec72fba5326368f21124e571a7">00762</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#af2ddf7ec72fba5326368f21124e571a7">compressionMethod</a>;
<a name="l00763"></a><a class="code" href="classcv_1_1_fern_classifier.html#a877995a528d36b6c5635a45fa76ca959">00763</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_classifier.html#a877995a528d36b6c5635a45fa76ca959">leavesPerStruct</a>;
<a name="l00764"></a><a class="code" href="classcv_1_1_fern_classifier.html#a9448ad453cb1577457630f2f7dd4a8cf">00764</a>     <a class="code" href="classcv_1_1_size__.html" title="The 2D size class.">Size</a> <a class="code" href="classcv_1_1_fern_classifier.html#a9448ad453cb1577457630f2f7dd4a8cf">patchSize</a>;
<a name="l00765"></a><a class="code" href="classcv_1_1_fern_classifier.html#ae9268efb7ccb5c8965f56937a7e7736e">00765</a>     vector&lt;Feature&gt; <a class="code" href="classcv_1_1_fern_classifier.html#ae9268efb7ccb5c8965f56937a7e7736e">features</a>;
<a name="l00766"></a><a class="code" href="classcv_1_1_fern_classifier.html#a0e10ac13813115fa193c55805f73617a">00766</a>     vector&lt;int&gt; <a class="code" href="classcv_1_1_fern_classifier.html#a0e10ac13813115fa193c55805f73617a">classCounters</a>;
<a name="l00767"></a><a class="code" href="classcv_1_1_fern_classifier.html#a334a16efca9071fe403437829857ebbb">00767</a>     vector&lt;float&gt; <a class="code" href="classcv_1_1_fern_classifier.html#a334a16efca9071fe403437829857ebbb">posteriors</a>;
<a name="l00768"></a>00768 };
<a name="l00769"></a>00769 
<a name="l00770"></a>00770 
<a name="l00771"></a>00771 <span class="comment">/****************************************************************************************\</span>
<a name="l00772"></a>00772 <span class="comment">*                                 Calonder Classifier                                    *</span>
<a name="l00773"></a>00773 <span class="comment">\****************************************************************************************/</span>
<a name="l00774"></a>00774 
<a name="l00775"></a>00775 <span class="keyword">struct </span><a class="code" href="structcv_1_1_r_tree_node.html">RTreeNode</a>;
<a name="l00776"></a>00776 
<a name="l00777"></a><a class="code" href="structcv_1_1_base_keypoint.html">00777</a> <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_base_keypoint.html">BaseKeypoint</a>
<a name="l00778"></a>00778 {
<a name="l00779"></a><a class="code" href="structcv_1_1_base_keypoint.html#a1adf9982422ff76aa637cb3e6d069885">00779</a>   <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_base_keypoint.html#a1adf9982422ff76aa637cb3e6d069885">x</a>;
<a name="l00780"></a><a class="code" href="structcv_1_1_base_keypoint.html#ad05c29448786838668d343ef79d0550a">00780</a>   <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_base_keypoint.html#ad05c29448786838668d343ef79d0550a">y</a>;
<a name="l00781"></a><a class="code" href="structcv_1_1_base_keypoint.html#af88fb5bce071314497d2cf7d5e62cd53">00781</a>   <a class="code" href="struct___ipl_image.html">IplImage</a>* <a class="code" href="structcv_1_1_base_keypoint.html#af88fb5bce071314497d2cf7d5e62cd53">image</a>;
<a name="l00782"></a>00782 
<a name="l00783"></a><a class="code" href="structcv_1_1_base_keypoint.html#a0cdda18f300e1eab00a5b0ffca60e097">00783</a>   <a class="code" href="structcv_1_1_base_keypoint.html">BaseKeypoint</a>()
<a name="l00784"></a>00784     : <a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>(0), <a class="code" href="highgui__c_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>(0), <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>(NULL)
<a name="l00785"></a>00785   {}
<a name="l00786"></a>00786 
<a name="l00787"></a><a class="code" href="structcv_1_1_base_keypoint.html#a9e6e3072dbd59cd5cf8b8fa5781c8f03">00787</a>   <a class="code" href="structcv_1_1_base_keypoint.html">BaseKeypoint</a>(<span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>, <a class="code" href="struct___ipl_image.html">IplImage</a>* <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>)
<a name="l00788"></a>00788     : x(x), y(y), image(image)
<a name="l00789"></a>00789   {}
<a name="l00790"></a>00790 };
<a name="l00791"></a>00791 
<a name="l00792"></a><a class="code" href="classcv_1_1_randomized_tree.html">00792</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_randomized_tree.html">RandomizedTree</a>
<a name="l00793"></a>00793 {
<a name="l00794"></a>00794 <span class="keyword">public</span>:
<a name="l00795"></a><a class="code" href="classcv_1_1_randomized_tree.html#aeb98f95be17120e69be499c069f656d3">00795</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classcv_1_1_r_tree_classifier.html">RTreeClassifier</a>;
<a name="l00796"></a>00796 
<a name="l00797"></a><a class="code" href="classcv_1_1_randomized_tree.html#ad3a9c3171db3e1e0c95bdcce58335825">00797</a>   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> PATCH_SIZE = 32;
<a name="l00798"></a><a class="code" href="classcv_1_1_randomized_tree.html#ad33ce7fc2686881b40229005833fca65">00798</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_DEPTH = 9;
<a name="l00799"></a><a class="code" href="classcv_1_1_randomized_tree.html#a5f814be6f4a671b547f954b3f503002b">00799</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_VIEWS = 5000;
<a name="l00800"></a><a class="code" href="classcv_1_1_randomized_tree.html#af0c6755cb63bfb25f0cf8b0d8381df4f">00800</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> DEFAULT_REDUCED_NUM_DIM = 176;
<a name="l00801"></a><a class="code" href="classcv_1_1_randomized_tree.html#aad675bf2b9214bb4e15f31f782340276">00801</a>   <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_randomized_tree.html#aad675bf2b9214bb4e15f31f782340276">GET_LOWER_QUANT_PERC</a>() { <span class="keywordflow">return</span> .03f; }
<a name="l00802"></a><a class="code" href="classcv_1_1_randomized_tree.html#ad1bc14577b2373ec5984dc32f2c7d58e">00802</a>   <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_randomized_tree.html#ad1bc14577b2373ec5984dc32f2c7d58e">GET_UPPER_QUANT_PERC</a>() { <span class="keywordflow">return</span> .92f; }
<a name="l00803"></a>00803 
<a name="l00804"></a>00804   <a class="code" href="classcv_1_1_randomized_tree.html">RandomizedTree</a>();
<a name="l00805"></a>00805   ~<a class="code" href="classcv_1_1_randomized_tree.html">RandomizedTree</a>();
<a name="l00806"></a>00806 
<a name="l00807"></a>00807   <span class="keywordtype">void</span> train(std::vector&lt;BaseKeypoint&gt; <span class="keyword">const</span>&amp; base_set, <a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a> &amp;<a class="code" href="core__c_8h.html#a8d3f239dca9d5c72c8a66d7a1c142efd">rng</a>,
<a name="l00808"></a>00808              <span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#acb5ba97551079e0b072c62c21d784ac5">depth</a>, <span class="keywordtype">int</span> views, <span class="keywordtype">size_t</span> reduced_num_dim, <span class="keywordtype">int</span> num_quant_bits);
<a name="l00809"></a>00809   <span class="keywordtype">void</span> train(std::vector&lt;BaseKeypoint&gt; <span class="keyword">const</span>&amp; base_set, <a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a> &amp;<a class="code" href="core__c_8h.html#a8d3f239dca9d5c72c8a66d7a1c142efd">rng</a>,
<a name="l00810"></a>00810              <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a> &amp;make_patch, <span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#acb5ba97551079e0b072c62c21d784ac5">depth</a>, <span class="keywordtype">int</span> views, <span class="keywordtype">size_t</span> reduced_num_dim,
<a name="l00811"></a>00811              <span class="keywordtype">int</span> num_quant_bits);
<a name="l00812"></a>00812 
<a name="l00813"></a>00813   <span class="comment">// following two funcs are EXPERIMENTAL (do not use unless you know exactly what you do)</span>
<a name="l00814"></a>00814   <span class="keyword">static</span> <span class="keywordtype">void</span> quantizeVector(<span class="keywordtype">float</span> *vec, <span class="keywordtype">int</span> dim, <span class="keywordtype">int</span> N, <span class="keywordtype">float</span> bnds[2], <span class="keywordtype">int</span> clamp_mode=0);
<a name="l00815"></a>00815   <span class="keyword">static</span> <span class="keywordtype">void</span> quantizeVector(<span class="keywordtype">float</span> *<a class="code" href="core__c_8h.html#ab0b75e5f1b08602f0483c963a92330b2">src</a>, <span class="keywordtype">int</span> dim, <span class="keywordtype">int</span> N, <span class="keywordtype">float</span> bnds[2], <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *<a class="code" href="calib3d_8hpp.html#a78aaadd1cb9f7f67b26a449708a71f8d">dst</a>);
<a name="l00816"></a>00816 
<a name="l00817"></a>00817   <span class="comment">// patch_data must be a 32x32 array (no row padding)</span>
<a name="l00818"></a>00818   <span class="keywordtype">float</span>* getPosterior(<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data);
<a name="l00819"></a>00819   <span class="keyword">const</span> <span class="keywordtype">float</span>* getPosterior(<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data) <span class="keyword">const</span>;
<a name="l00820"></a>00820   <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* getPosterior2(<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data);
<a name="l00821"></a>00821   <span class="keyword">const</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* getPosterior2(<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data) <span class="keyword">const</span>;
<a name="l00822"></a>00822 
<a name="l00823"></a>00823   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="core__c_8h.html#aed1a5f21df6c3f600d6c313493dde694">file_name</a>, <span class="keywordtype">int</span> num_quant_bits);
<a name="l00824"></a>00824   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(std::istream &amp;is, <span class="keywordtype">int</span> num_quant_bits);
<a name="l00825"></a>00825   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="core__c_8h.html#aed1a5f21df6c3f600d6c313493dde694">file_name</a>) <span class="keyword">const</span>;
<a name="l00826"></a>00826   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(std::ostream &amp;os) <span class="keyword">const</span>;
<a name="l00827"></a>00827 
<a name="l00828"></a><a class="code" href="classcv_1_1_randomized_tree.html#ace332f8d2d288c7268069a4f6653c27d">00828</a>   <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_randomized_tree.html#ace332f8d2d288c7268069a4f6653c27d">classes</a>() { <span class="keywordflow">return</span> classes_; }
<a name="l00829"></a><a class="code" href="classcv_1_1_randomized_tree.html#a79be804b3938a574143e1e0f840964d2">00829</a>   <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_randomized_tree.html#a79be804b3938a574143e1e0f840964d2">depth</a>() { <span class="keywordflow">return</span> depth_; }
<a name="l00830"></a>00830 
<a name="l00831"></a>00831   <span class="comment">//void setKeepFloatPosteriors(bool b) { keep_float_posteriors_ = b; }</span>
<a name="l00832"></a><a class="code" href="classcv_1_1_randomized_tree.html#a496f3b2b27c53a8bcf74a0b9148d719c">00832</a>   <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_randomized_tree.html#a496f3b2b27c53a8bcf74a0b9148d719c">discardFloatPosteriors</a>() { freePosteriors(1); }
<a name="l00833"></a>00833 
<a name="l00834"></a><a class="code" href="classcv_1_1_randomized_tree.html#a89f2b604f8148347037d70055f96f1b7">00834</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_randomized_tree.html#a89f2b604f8148347037d70055f96f1b7">applyQuantization</a>(<span class="keywordtype">int</span> num_quant_bits) { makePosteriors2(num_quant_bits); }
<a name="l00835"></a>00835 
<a name="l00836"></a>00836   <span class="comment">// debug</span>
<a name="l00837"></a>00837   <span class="keywordtype">void</span> savePosteriors(std::string url, <span class="keywordtype">bool</span> append=<span class="keyword">false</span>);
<a name="l00838"></a>00838   <span class="keywordtype">void</span> savePosteriors2(std::string url, <span class="keywordtype">bool</span> append=<span class="keyword">false</span>);
<a name="l00839"></a>00839 
<a name="l00840"></a>00840 <span class="keyword">private</span>:
<a name="l00841"></a>00841   <span class="keywordtype">int</span> classes_;
<a name="l00842"></a>00842   <span class="keywordtype">int</span> depth_;
<a name="l00843"></a>00843   <span class="keywordtype">int</span> num_leaves_;
<a name="l00844"></a>00844   std::vector&lt;RTreeNode&gt; nodes_;
<a name="l00845"></a>00845   <span class="keywordtype">float</span> **posteriors_;        <span class="comment">// 16-bytes aligned posteriors</span>
<a name="l00846"></a>00846   <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> **posteriors2_;     <span class="comment">// 16-bytes aligned posteriors</span>
<a name="l00847"></a>00847   std::vector&lt;int&gt; leaf_counts_;
<a name="l00848"></a>00848 
<a name="l00849"></a>00849   <span class="keywordtype">void</span> createNodes(<span class="keywordtype">int</span> num_nodes, <a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a> &amp;<a class="code" href="core__c_8h.html#a8d3f239dca9d5c72c8a66d7a1c142efd">rng</a>);
<a name="l00850"></a>00850   <span class="keywordtype">void</span> allocPosteriorsAligned(<span class="keywordtype">int</span> num_leaves, <span class="keywordtype">int</span> <a class="code" href="ml_8hpp.html#ac5783a418f537b3740623f5bed354ab0">num_classes</a>);
<a name="l00851"></a>00851   <span class="keywordtype">void</span> freePosteriors(<span class="keywordtype">int</span> which);    <span class="comment">// which: 1=posteriors_, 2=posteriors2_, 3=both</span>
<a name="l00852"></a>00852   <span class="keywordtype">void</span> init(<span class="keywordtype">int</span> classes, <span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#acb5ba97551079e0b072c62c21d784ac5">depth</a>, <a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a> &amp;<a class="code" href="core__c_8h.html#a8d3f239dca9d5c72c8a66d7a1c142efd">rng</a>);
<a name="l00853"></a>00853   <span class="keywordtype">void</span> addExample(<span class="keywordtype">int</span> class_id, <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data);
<a name="l00854"></a>00854   <span class="keywordtype">void</span> finalize(<span class="keywordtype">size_t</span> reduced_num_dim, <span class="keywordtype">int</span> num_quant_bits);
<a name="l00855"></a>00855   <span class="keywordtype">int</span> getIndex(<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data) <span class="keyword">const</span>;
<a name="l00856"></a>00856   <span class="keyword">inline</span> <span class="keywordtype">float</span>* getPosteriorByIndex(<span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);
<a name="l00857"></a>00857   <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">float</span>* getPosteriorByIndex(<span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>) <span class="keyword">const</span>;
<a name="l00858"></a>00858   <span class="keyword">inline</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* getPosteriorByIndex2(<span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);
<a name="l00859"></a>00859   <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* getPosteriorByIndex2(<span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>) <span class="keyword">const</span>;
<a name="l00860"></a>00860   <span class="comment">//void makeRandomMeasMatrix(float *cs_phi, PHI_DISTR_TYPE dt, size_t reduced_num_dim);</span>
<a name="l00861"></a>00861   <span class="keywordtype">void</span> convertPosteriorsToChar();
<a name="l00862"></a>00862   <span class="keywordtype">void</span> makePosteriors2(<span class="keywordtype">int</span> num_quant_bits);
<a name="l00863"></a>00863   <span class="keywordtype">void</span> compressLeaves(<span class="keywordtype">size_t</span> reduced_num_dim);
<a name="l00864"></a>00864   <span class="keywordtype">void</span> estimateQuantPercForPosteriors(<span class="keywordtype">float</span> perc[2]);
<a name="l00865"></a>00865 };
<a name="l00866"></a>00866 
<a name="l00867"></a>00867 
<a name="l00868"></a><a class="code" href="namespacecv.html#aa8989c4a6a02595c782b6ce756543f56">00868</a> <span class="keyword">inline</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* <a class="code" href="namespacecv.html#aa8989c4a6a02595c782b6ce756543f56">getData</a>(<a class="code" href="struct___ipl_image.html">IplImage</a>* <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>)
<a name="l00869"></a>00869 {
<a name="l00870"></a>00870   <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*<span class="keyword">&gt;</span>(image-&gt;<a class="code" href="struct___ipl_image.html#a8f494e96def4231c3623eead920b3358">imageData</a>);
<a name="l00871"></a>00871 }
<a name="l00872"></a>00872 
<a name="l00873"></a>00873 <span class="keyword">inline</span> <span class="keywordtype">float</span>* RandomizedTree::getPosteriorByIndex(<span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>)
<a name="l00874"></a>00874 {
<a name="l00875"></a>00875   <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><span class="keywordtype">float</span>*<span class="keyword">&gt;</span>(<span class="keyword">const_cast&lt;</span><span class="keyword">const </span>RandomizedTree*<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;getPosteriorByIndex(index));
<a name="l00876"></a>00876 }
<a name="l00877"></a>00877 
<a name="l00878"></a>00878 <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">float</span>* RandomizedTree::getPosteriorByIndex(<span class="keywordtype">int</span> index)<span class="keyword"> const</span>
<a name="l00879"></a>00879 <span class="keyword"></span>{
<a name="l00880"></a>00880   <span class="keywordflow">return</span> posteriors_[<a class="code" href="core__c_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];
<a name="l00881"></a>00881 }
<a name="l00882"></a>00882 
<a name="l00883"></a>00883 <span class="keyword">inline</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* RandomizedTree::getPosteriorByIndex2(<span class="keywordtype">int</span> index)
<a name="l00884"></a>00884 {
<a name="l00885"></a>00885   <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*<span class="keyword">&gt;</span>(<span class="keyword">const_cast&lt;</span><span class="keyword">const </span>RandomizedTree*<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;getPosteriorByIndex2(index));
<a name="l00886"></a>00886 }
<a name="l00887"></a>00887 
<a name="l00888"></a>00888 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* RandomizedTree::getPosteriorByIndex2(<span class="keywordtype">int</span> index)<span class="keyword"> const</span>
<a name="l00889"></a>00889 <span class="keyword"></span>{
<a name="l00890"></a>00890   <span class="keywordflow">return</span> posteriors2_[<a class="code" href="core__c_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];
<a name="l00891"></a>00891 }
<a name="l00892"></a>00892 
<a name="l00893"></a><a class="code" href="structcv_1_1_r_tree_node.html">00893</a> <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_r_tree_node.html">RTreeNode</a>
<a name="l00894"></a>00894 {
<a name="l00895"></a><a class="code" href="structcv_1_1_r_tree_node.html#aa0302eab27fc2d4998eb150f2aa38a63">00895</a>   <span class="keywordtype">short</span> offset1, <a class="code" href="structcv_1_1_r_tree_node.html#aa0302eab27fc2d4998eb150f2aa38a63">offset2</a>;
<a name="l00896"></a>00896 
<a name="l00897"></a><a class="code" href="structcv_1_1_r_tree_node.html#a28587e537b924b2ce4ef1c4a56821a59">00897</a>   <a class="code" href="structcv_1_1_r_tree_node.html#a28587e537b924b2ce4ef1c4a56821a59">RTreeNode</a>() {}
<a name="l00898"></a><a class="code" href="structcv_1_1_r_tree_node.html#a5858e9b9e8989f2a01c734fa482a5456">00898</a>   <a class="code" href="structcv_1_1_r_tree_node.html">RTreeNode</a>(<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> x1, <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> y1, <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> x2, <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> y2)
<a name="l00899"></a>00899     : offset1(y1*<a class="code" href="classcv_1_1_randomized_tree.html">RandomizedTree</a>::PATCH_SIZE + x1),
<a name="l00900"></a>00900       offset2(y2*<a class="code" href="classcv_1_1_randomized_tree.html">RandomizedTree</a>::PATCH_SIZE + x2)
<a name="l00901"></a>00901   {}
<a name="l00902"></a>00902 
<a name="l00904"></a><a class="code" href="structcv_1_1_r_tree_node.html#ad193beb5a63cb98652fc1413da5dd851">00904</a>   <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator() (<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* patch_data)<span class="keyword"> const</span>
<a name="l00905"></a>00905 <span class="keyword">  </span>{
<a name="l00906"></a>00906     <span class="keywordflow">return</span> patch_data[offset1] &gt; patch_data[offset2];
<a name="l00907"></a>00907   }
<a name="l00908"></a>00908 };
<a name="l00909"></a>00909 
<a name="l00910"></a><a class="code" href="classcv_1_1_r_tree_classifier.html">00910</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_r_tree_classifier.html">RTreeClassifier</a>
<a name="l00911"></a>00911 {
<a name="l00912"></a>00912 <span class="keyword">public</span>:
<a name="l00913"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#aeb7f243009ac21c70c4a7bb3b130d632">00913</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEFAULT_TREES = 48;
<a name="l00914"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#a122e901d6fa5e80235e21c430e3ffbfa">00914</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> DEFAULT_NUM_QUANT_BITS = 4;
<a name="l00915"></a>00915 
<a name="l00916"></a>00916   <a class="code" href="classcv_1_1_r_tree_classifier.html">RTreeClassifier</a>();
<a name="l00917"></a>00917   <span class="keywordtype">void</span> train(std::vector&lt;BaseKeypoint&gt; <span class="keyword">const</span>&amp; base_set,
<a name="l00918"></a>00918              <a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a> &amp;<a class="code" href="core__c_8h.html#a8d3f239dca9d5c72c8a66d7a1c142efd">rng</a>,
<a name="l00919"></a>00919              <span class="keywordtype">int</span> num_trees = <a class="code" href="classcv_1_1_r_tree_classifier.html#aeb7f243009ac21c70c4a7bb3b130d632">RTreeClassifier::DEFAULT_TREES</a>,
<a name="l00920"></a>00920              <span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#acb5ba97551079e0b072c62c21d784ac5">depth</a> = <a class="code" href="classcv_1_1_randomized_tree.html#ad33ce7fc2686881b40229005833fca65">RandomizedTree::DEFAULT_DEPTH</a>,
<a name="l00921"></a>00921              <span class="keywordtype">int</span> views = <a class="code" href="classcv_1_1_randomized_tree.html#a5f814be6f4a671b547f954b3f503002b">RandomizedTree::DEFAULT_VIEWS</a>,
<a name="l00922"></a>00922              <span class="keywordtype">size_t</span> reduced_num_dim = <a class="code" href="classcv_1_1_randomized_tree.html#af0c6755cb63bfb25f0cf8b0d8381df4f">RandomizedTree::DEFAULT_REDUCED_NUM_DIM</a>,
<a name="l00923"></a>00923              <span class="keywordtype">int</span> num_quant_bits = DEFAULT_NUM_QUANT_BITS);
<a name="l00924"></a>00924   <span class="keywordtype">void</span> train(std::vector&lt;BaseKeypoint&gt; <span class="keyword">const</span>&amp; base_set,
<a name="l00925"></a>00925              <a class="code" href="classcv_1_1_r_n_g.html" title="Random Number Generator.">RNG</a> &amp;<a class="code" href="core__c_8h.html#a8d3f239dca9d5c72c8a66d7a1c142efd">rng</a>,
<a name="l00926"></a>00926              <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a> &amp;make_patch,
<a name="l00927"></a>00927              <span class="keywordtype">int</span> num_trees = <a class="code" href="classcv_1_1_r_tree_classifier.html#aeb7f243009ac21c70c4a7bb3b130d632">RTreeClassifier::DEFAULT_TREES</a>,
<a name="l00928"></a>00928              <span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#acb5ba97551079e0b072c62c21d784ac5">depth</a> = <a class="code" href="classcv_1_1_randomized_tree.html#ad33ce7fc2686881b40229005833fca65">RandomizedTree::DEFAULT_DEPTH</a>,
<a name="l00929"></a>00929              <span class="keywordtype">int</span> views = <a class="code" href="classcv_1_1_randomized_tree.html#a5f814be6f4a671b547f954b3f503002b">RandomizedTree::DEFAULT_VIEWS</a>,
<a name="l00930"></a>00930              <span class="keywordtype">size_t</span> reduced_num_dim = <a class="code" href="classcv_1_1_randomized_tree.html#af0c6755cb63bfb25f0cf8b0d8381df4f">RandomizedTree::DEFAULT_REDUCED_NUM_DIM</a>,
<a name="l00931"></a>00931              <span class="keywordtype">int</span> num_quant_bits = DEFAULT_NUM_QUANT_BITS);
<a name="l00932"></a>00932 
<a name="l00933"></a>00933   <span class="comment">// sig must point to a memory block of at least classes()*sizeof(float|uchar) bytes</span>
<a name="l00934"></a>00934   <span class="keywordtype">void</span> getSignature(<a class="code" href="struct___ipl_image.html">IplImage</a> *patch, <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *sig) <span class="keyword">const</span>;
<a name="l00935"></a>00935   <span class="keywordtype">void</span> getSignature(<a class="code" href="struct___ipl_image.html">IplImage</a> *patch, <span class="keywordtype">float</span> *sig) <span class="keyword">const</span>;
<a name="l00936"></a>00936   <span class="keywordtype">void</span> getSparseSignature(<a class="code" href="struct___ipl_image.html">IplImage</a> *patch, <span class="keywordtype">float</span> *sig, <span class="keywordtype">float</span> thresh) <span class="keyword">const</span>;
<a name="l00937"></a>00937   <span class="comment">// TODO: deprecated in favor of getSignature overload, remove</span>
<a name="l00938"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#a4616774caa285fd55c482f4732659194">00938</a>   <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_r_tree_classifier.html#a4616774caa285fd55c482f4732659194">getFloatSignature</a>(<a class="code" href="struct___ipl_image.html">IplImage</a> *patch, <span class="keywordtype">float</span> *sig)<span class="keyword"> const </span>{ getSignature(patch, sig); }
<a name="l00939"></a>00939 
<a name="l00940"></a>00940   <span class="keyword">static</span> <span class="keywordtype">int</span> countNonZeroElements(<span class="keywordtype">float</span> *vec, <span class="keywordtype">int</span> <a class="code" href="imgproc__c_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, <span class="keywordtype">double</span> tol=1e-10);
<a name="l00941"></a>00941   <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> safeSignatureAlloc(<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> **sig, <span class="keywordtype">int</span> num_sig=1, <span class="keywordtype">int</span> sig_len=176);
<a name="l00942"></a>00942   <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* safeSignatureAlloc(<span class="keywordtype">int</span> num_sig=1, <span class="keywordtype">int</span> sig_len=176);
<a name="l00943"></a>00943 
<a name="l00944"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#ab15f3ab847e4a49bea0246a65c89cdd3">00944</a>   <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_r_tree_classifier.html#ab15f3ab847e4a49bea0246a65c89cdd3">classes</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> classes_; }
<a name="l00945"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#a483992edb679e53d0c883f06f83f91fb">00945</a>   <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_r_tree_classifier.html#a483992edb679e53d0c883f06f83f91fb">original_num_classes</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> original_num_classes_; }
<a name="l00946"></a>00946 
<a name="l00947"></a>00947   <span class="keywordtype">void</span> setQuantization(<span class="keywordtype">int</span> num_quant_bits);
<a name="l00948"></a>00948   <span class="keywordtype">void</span> discardFloatPosteriors();
<a name="l00949"></a>00949 
<a name="l00950"></a>00950   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="core__c_8h.html#aed1a5f21df6c3f600d6c313493dde694">file_name</a>);
<a name="l00951"></a>00951   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(std::istream &amp;is);
<a name="l00952"></a>00952   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="core__c_8h.html#aed1a5f21df6c3f600d6c313493dde694">file_name</a>) <span class="keyword">const</span>;
<a name="l00953"></a>00953   <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(std::ostream &amp;os) <span class="keyword">const</span>;
<a name="l00954"></a>00954 
<a name="l00955"></a>00955   <span class="comment">// experimental and debug</span>
<a name="l00956"></a>00956   <span class="keywordtype">void</span> saveAllFloatPosteriors(std::string file_url);
<a name="l00957"></a>00957   <span class="keywordtype">void</span> saveAllBytePosteriors(std::string file_url);
<a name="l00958"></a>00958   <span class="keywordtype">void</span> setFloatPosteriorsFromTextfile_176(std::string url);
<a name="l00959"></a>00959   <span class="keywordtype">float</span> countZeroElements();
<a name="l00960"></a>00960 
<a name="l00961"></a><a class="code" href="classcv_1_1_r_tree_classifier.html#a9c00af90fdf4e7863deee22b85a2c987">00961</a>   std::vector&lt;RandomizedTree&gt; <a class="code" href="classcv_1_1_r_tree_classifier.html#a9c00af90fdf4e7863deee22b85a2c987">trees_</a>;
<a name="l00962"></a>00962 
<a name="l00963"></a>00963 <span class="keyword">private</span>:
<a name="l00964"></a>00964   <span class="keywordtype">int</span> classes_;
<a name="l00965"></a>00965   <span class="keywordtype">int</span> num_quant_bits_;
<a name="l00966"></a>00966   <span class="keyword">mutable</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> **posteriors_;
<a name="l00967"></a>00967   <span class="keyword">mutable</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *ptemp_;
<a name="l00968"></a>00968   <span class="keywordtype">int</span> original_num_classes_;
<a name="l00969"></a>00969   <span class="keywordtype">bool</span> keep_floats_;
<a name="l00970"></a>00970 };
<a name="l00971"></a>00971 
<a name="l00972"></a>00972 <span class="comment">/****************************************************************************************\</span>
<a name="l00973"></a>00973 <span class="comment">*                                     One-Way Descriptor                                 *</span>
<a name="l00974"></a>00974 <span class="comment">\****************************************************************************************/</span>
<a name="l00975"></a>00975 
<a name="l00976"></a><a class="code" href="classcv_1_1_one_way_descriptor.html">00976</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>
<a name="l00977"></a>00977 {
<a name="l00978"></a>00978 <span class="keyword">public</span>:
<a name="l00979"></a>00979     <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>();
<a name="l00980"></a>00980     ~<a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>();
<a name="l00981"></a>00981 
<a name="l00982"></a>00982     <span class="comment">// allocates memory for given descriptor parameters</span>
<a name="l00983"></a>00983     <span class="keywordtype">void</span> Allocate(<span class="keywordtype">int</span> pose_count, <a class="code" href="struct_cv_size.html">CvSize</a> size, <span class="keywordtype">int</span> nChannels);
<a name="l00984"></a>00984 
<a name="l00985"></a>00985     <span class="comment">// GenerateSamples: generates affine transformed patches with averaging them over small transformation variations.</span>
<a name="l00986"></a>00986     <span class="comment">// If external poses and transforms were specified, uses them instead of generating random ones</span>
<a name="l00987"></a>00987     <span class="comment">// - pose_count: the number of poses to be generated</span>
<a name="l00988"></a>00988     <span class="comment">// - frontal: the input patch (can be a roi in a larger image)</span>
<a name="l00989"></a>00989     <span class="comment">// - norm: if nonzero, normalizes the output patch so that the sum of pixel intensities is 1</span>
<a name="l00990"></a>00990     <span class="keywordtype">void</span> GenerateSamples(<span class="keywordtype">int</span> pose_count, <a class="code" href="struct___ipl_image.html">IplImage</a>* frontal, <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a8c4682097beeedbc96cda40409007dfa" title="computes norm of the selected array part">norm</a> = 0);
<a name="l00991"></a>00991 
<a name="l00992"></a>00992     <span class="comment">// GenerateSamplesFast: generates affine transformed patches with averaging them over small transformation variations.</span>
<a name="l00993"></a>00993     <span class="comment">// Uses precalculated transformed pca components.</span>
<a name="l00994"></a>00994     <span class="comment">// - frontal: the input patch (can be a roi in a larger image)</span>
<a name="l00995"></a>00995     <span class="comment">// - pca_hr_avg: pca average vector</span>
<a name="l00996"></a>00996     <span class="comment">// - pca_hr_eigenvectors: pca eigenvectors</span>
<a name="l00997"></a>00997     <span class="comment">// - pca_descriptors: an array of precomputed descriptors of pca components containing their affine transformations</span>
<a name="l00998"></a>00998     <span class="comment">//   pca_descriptors[0] corresponds to the average, pca_descriptors[1]-pca_descriptors[pca_dim] correspond to eigenvectors</span>
<a name="l00999"></a>00999     <span class="keywordtype">void</span> GenerateSamplesFast(<a class="code" href="struct___ipl_image.html">IplImage</a>* frontal, <a class="code" href="struct_cv_mat.html">CvMat</a>* pca_hr_avg,
<a name="l01000"></a>01000                              <a class="code" href="struct_cv_mat.html">CvMat</a>* pca_hr_eigenvectors, <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>* pca_descriptors);
<a name="l01001"></a>01001 
<a name="l01002"></a>01002     <span class="comment">// sets the poses and corresponding transforms</span>
<a name="l01003"></a>01003     <span class="keywordtype">void</span> SetTransforms(<a class="code" href="classcv_1_1_cv_affine_pose.html">CvAffinePose</a>* poses, <a class="code" href="struct_cv_mat.html">CvMat</a>** transforms);
<a name="l01004"></a>01004 
<a name="l01005"></a>01005     <span class="comment">// Initialize: builds a descriptor.</span>
<a name="l01006"></a>01006     <span class="comment">// - pose_count: the number of poses to build. If poses were set externally, uses them rather than generating random ones</span>
<a name="l01007"></a>01007     <span class="comment">// - frontal: input patch. Can be a roi in a larger image</span>
<a name="l01008"></a>01008     <span class="comment">// - feature_name: the feature name to be associated with the descriptor</span>
<a name="l01009"></a>01009     <span class="comment">// - norm: if 1, the affine transformed patches are normalized so that their sum is 1</span>
<a name="l01010"></a>01010     <span class="keywordtype">void</span> Initialize(<span class="keywordtype">int</span> pose_count, <a class="code" href="struct___ipl_image.html">IplImage</a>* frontal, <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_name = 0, <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a8c4682097beeedbc96cda40409007dfa" title="computes norm of the selected array part">norm</a> = 0);
<a name="l01011"></a>01011 
<a name="l01012"></a>01012     <span class="comment">// InitializeFast: builds a descriptor using precomputed descriptors of pca components</span>
<a name="l01013"></a>01013     <span class="comment">// - pose_count: the number of poses to build</span>
<a name="l01014"></a>01014     <span class="comment">// - frontal: input patch. Can be a roi in a larger image</span>
<a name="l01015"></a>01015     <span class="comment">// - feature_name: the feature name to be associated with the descriptor</span>
<a name="l01016"></a>01016     <span class="comment">// - pca_hr_avg: average vector for PCA</span>
<a name="l01017"></a>01017     <span class="comment">// - pca_hr_eigenvectors: PCA eigenvectors (one vector per row)</span>
<a name="l01018"></a>01018     <span class="comment">// - pca_descriptors: precomputed descriptors of PCA components, the first descriptor for the average vector</span>
<a name="l01019"></a>01019     <span class="comment">// followed by the descriptors for eigenvectors</span>
<a name="l01020"></a>01020     <span class="keywordtype">void</span> InitializeFast(<span class="keywordtype">int</span> pose_count, <a class="code" href="struct___ipl_image.html">IplImage</a>* frontal, <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_name,
<a name="l01021"></a>01021                         <a class="code" href="struct_cv_mat.html">CvMat</a>* pca_hr_avg, <a class="code" href="struct_cv_mat.html">CvMat</a>* pca_hr_eigenvectors, <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>* pca_descriptors);
<a name="l01022"></a>01022 
<a name="l01023"></a>01023     <span class="comment">// ProjectPCASample: unwarps an image patch into a vector and projects it into PCA space</span>
<a name="l01024"></a>01024     <span class="comment">// - patch: input image patch</span>
<a name="l01025"></a>01025     <span class="comment">// - avg: PCA average vector</span>
<a name="l01026"></a>01026     <span class="comment">// - eigenvectors: PCA eigenvectors, one per row</span>
<a name="l01027"></a>01027     <span class="comment">// - pca_coeffs: output PCA coefficients</span>
<a name="l01028"></a>01028     <span class="keywordtype">void</span> ProjectPCASample(<a class="code" href="struct___ipl_image.html">IplImage</a>* patch, <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="core__c_8h.html#a92db7c1486bb541ca602670b43c052e8">avg</a>, <a class="code" href="struct_cv_mat.html">CvMat</a>* eigenvectors, <a class="code" href="struct_cv_mat.html">CvMat</a>* pca_coeffs) <span class="keyword">const</span>;
<a name="l01029"></a>01029 
<a name="l01030"></a>01030     <span class="comment">// InitializePCACoeffs: projects all warped patches into PCA space</span>
<a name="l01031"></a>01031     <span class="comment">// - avg: PCA average vector</span>
<a name="l01032"></a>01032     <span class="comment">// - eigenvectors: PCA eigenvectors, one per row</span>
<a name="l01033"></a>01033     <span class="keywordtype">void</span> InitializePCACoeffs(<a class="code" href="struct_cv_mat.html">CvMat</a>* avg, <a class="code" href="struct_cv_mat.html">CvMat</a>* eigenvectors);
<a name="l01034"></a>01034 
<a name="l01035"></a>01035     <span class="comment">// EstimatePose: finds the closest match between an input patch and a set of patches with different poses</span>
<a name="l01036"></a>01036     <span class="comment">// - patch: input image patch</span>
<a name="l01037"></a>01037     <span class="comment">// - pose_idx: the output index of the closest pose</span>
<a name="l01038"></a>01038     <span class="comment">// - distance: the distance to the closest pose (L2 distance)</span>
<a name="l01039"></a>01039     <span class="keywordtype">void</span> EstimatePose(<a class="code" href="struct___ipl_image.html">IplImage</a>* patch, <span class="keywordtype">int</span>&amp; pose_idx, <span class="keywordtype">float</span>&amp; distance) <span class="keyword">const</span>;
<a name="l01040"></a>01040 
<a name="l01041"></a>01041     <span class="comment">// EstimatePosePCA: finds the closest match between an input patch and a set of patches with different poses.</span>
<a name="l01042"></a>01042     <span class="comment">// The distance between patches is computed in PCA space</span>
<a name="l01043"></a>01043     <span class="comment">// - patch: input image patch</span>
<a name="l01044"></a>01044     <span class="comment">// - pose_idx: the output index of the closest pose</span>
<a name="l01045"></a>01045     <span class="comment">// - distance: distance to the closest pose (L2 distance in PCA space)</span>
<a name="l01046"></a>01046     <span class="comment">// - avg: PCA average vector. If 0, matching without PCA is used</span>
<a name="l01047"></a>01047     <span class="comment">// - eigenvectors: PCA eigenvectors, one per row</span>
<a name="l01048"></a>01048     <span class="keywordtype">void</span> EstimatePosePCA(<a class="code" href="core_2types__c_8h.html#ac5046bc0456e9295d80b37774384798c">CvArr</a>* patch, <span class="keywordtype">int</span>&amp; pose_idx, <span class="keywordtype">float</span>&amp; distance, <a class="code" href="struct_cv_mat.html">CvMat</a>* avg, <a class="code" href="struct_cv_mat.html">CvMat</a>* eigenvalues) <span class="keyword">const</span>;
<a name="l01049"></a>01049 
<a name="l01050"></a>01050     <span class="comment">// GetPatchSize: returns the size of each image patch after warping (2 times smaller than the input patch)</span>
<a name="l01051"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a5992533b7b8d56ea6f3571d0485ad96c">01051</a>     <a class="code" href="struct_cv_size.html">CvSize</a> GetPatchSize()<span class="keyword"> const</span>
<a name="l01052"></a>01052 <span class="keyword">    </span>{
<a name="l01053"></a>01053         <span class="keywordflow">return</span> m_patch_size;
<a name="l01054"></a>01054     }
<a name="l01055"></a>01055 
<a name="l01056"></a>01056     <span class="comment">// GetInputPatchSize: returns the required size of the patch that the descriptor is built from</span>
<a name="l01057"></a>01057     <span class="comment">// (2 time larger than the patch after warping)</span>
<a name="l01058"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a699f2ea939913d87c82af19bffaf5564">01058</a>     <a class="code" href="struct_cv_size.html">CvSize</a> GetInputPatchSize()<span class="keyword"> const</span>
<a name="l01059"></a>01059 <span class="keyword">    </span>{
<a name="l01060"></a>01060         <span class="keywordflow">return</span> <a class="code" href="core_2types__c_8h.html#ad25ce7ac18665d5c9b062283ff0204ed">cvSize</a>(m_patch_size.width*2, m_patch_size.height*2);
<a name="l01061"></a>01061     }
<a name="l01062"></a>01062 
<a name="l01063"></a>01063     <span class="comment">// GetPatch: returns a patch corresponding to specified pose index</span>
<a name="l01064"></a>01064     <span class="comment">// - index: pose index</span>
<a name="l01065"></a>01065     <span class="comment">// - return value: the patch corresponding to specified pose index</span>
<a name="l01066"></a>01066     <a class="code" href="struct___ipl_image.html">IplImage</a>* GetPatch(<span class="keywordtype">int</span> index);
<a name="l01067"></a>01067 
<a name="l01068"></a>01068     <span class="comment">// GetPose: returns a pose corresponding to specified pose index</span>
<a name="l01069"></a>01069     <span class="comment">// - index: pose index</span>
<a name="l01070"></a>01070     <span class="comment">// - return value: the pose corresponding to specified pose index</span>
<a name="l01071"></a>01071     <a class="code" href="classcv_1_1_cv_affine_pose.html">CvAffinePose</a> GetPose(<span class="keywordtype">int</span> index) <span class="keyword">const</span>;
<a name="l01072"></a>01072 
<a name="l01073"></a>01073     <span class="comment">// Save: saves all patches with different poses to a specified path</span>
<a name="l01074"></a>01074     <span class="keywordtype">void</span> Save(<span class="keyword">const</span> <span class="keywordtype">char</span>* path);
<a name="l01075"></a>01075 
<a name="l01076"></a>01076     <span class="comment">// ReadByName: reads a descriptor from a file storage</span>
<a name="l01077"></a>01077     <span class="comment">// - fs: file storage</span>
<a name="l01078"></a>01078     <span class="comment">// - parent: parent node</span>
<a name="l01079"></a>01079     <span class="comment">// - name: node name</span>
<a name="l01080"></a>01080     <span class="comment">// - return value: 1 if succeeded, 0 otherwise</span>
<a name="l01081"></a>01081     <span class="keywordtype">int</span> ReadByName(<a class="code" href="core_2types__c_8h.html#a84556d1bb6f1b8b02c04c60246747a7e">CvFileStorage</a>* fs, <a class="code" href="struct_cv_file_node.html">CvFileNode</a>* <a class="code" href="core__c_8h.html#a5f450b216725a37cbc0acd54340144d9">parent</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="core__c_8h.html#add928d8eb85ea33a25a67db3406d4887">name</a>);
<a name="l01082"></a>01082 
<a name="l01083"></a>01083     <span class="comment">// ReadByName: reads a descriptor from a file node</span>
<a name="l01084"></a>01084     <span class="comment">// - parent: parent node</span>
<a name="l01085"></a>01085     <span class="comment">// - name: node name</span>
<a name="l01086"></a>01086     <span class="comment">// - return value: 1 if succeeded, 0 otherwise</span>
<a name="l01087"></a>01087     <span class="keywordtype">int</span> ReadByName(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a> &amp;<a class="code" href="core__c_8h.html#a5f450b216725a37cbc0acd54340144d9">parent</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="core__c_8h.html#add928d8eb85ea33a25a67db3406d4887">name</a>);
<a name="l01088"></a>01088 
<a name="l01089"></a>01089     <span class="comment">// Write: writes a descriptor into a file storage</span>
<a name="l01090"></a>01090     <span class="comment">// - fs: file storage</span>
<a name="l01091"></a>01091     <span class="comment">// - name: node name</span>
<a name="l01092"></a>01092     <span class="keywordtype">void</span> Write(<a class="code" href="core_2types__c_8h.html#a84556d1bb6f1b8b02c04c60246747a7e">CvFileStorage</a>* fs, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="core__c_8h.html#add928d8eb85ea33a25a67db3406d4887">name</a>);
<a name="l01093"></a>01093 
<a name="l01094"></a>01094     <span class="comment">// GetFeatureName: returns a name corresponding to a feature</span>
<a name="l01095"></a>01095     <span class="keyword">const</span> <span class="keywordtype">char</span>* GetFeatureName() <span class="keyword">const</span>;
<a name="l01096"></a>01096 
<a name="l01097"></a>01097     <span class="comment">// GetCenter: returns the center of the feature</span>
<a name="l01098"></a>01098     <a class="code" href="struct_cv_point.html">CvPoint</a> GetCenter() <span class="keyword">const</span>;
<a name="l01099"></a>01099 
<a name="l01100"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a35e49f9cc5b7a7c0330f169d3f8ec8b5">01100</a>     <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#a35e49f9cc5b7a7c0330f169d3f8ec8b5">SetPCADimHigh</a>(<span class="keywordtype">int</span> pca_dim_high) {m_pca_dim_high = pca_dim_high;};
<a name="l01101"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a1bbdc42c887ee69c93031bf0ef146101">01101</a>     <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#a1bbdc42c887ee69c93031bf0ef146101">SetPCADimLow</a>(<span class="keywordtype">int</span> pca_dim_low) {m_pca_dim_low = pca_dim_low;};
<a name="l01102"></a>01102 
<a name="l01103"></a>01103     <span class="keywordtype">int</span> GetPCADimLow() <span class="keyword">const</span>;
<a name="l01104"></a>01104     <span class="keywordtype">int</span> GetPCADimHigh() <span class="keyword">const</span>;
<a name="l01105"></a>01105 
<a name="l01106"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a87f7bf26cea1506d49901d24d49e1628">01106</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>** <a class="code" href="classcv_1_1_one_way_descriptor.html#a87f7bf26cea1506d49901d24d49e1628">GetPCACoeffs</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pca_coeffs;}
<a name="l01107"></a>01107 
<a name="l01108"></a>01108 <span class="keyword">protected</span>:
<a name="l01109"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#ab3bf8eab64e509e4a74269b839424f9a">01109</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#ab3bf8eab64e509e4a74269b839424f9a">m_pose_count</a>; <span class="comment">// the number of poses</span>
<a name="l01110"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#ace2b1edd6bfe6bd412190cb0a82f39fa">01110</a>     <a class="code" href="struct_cv_size.html">CvSize</a> <a class="code" href="classcv_1_1_one_way_descriptor.html#ace2b1edd6bfe6bd412190cb0a82f39fa">m_patch_size</a>; <span class="comment">// size of each image</span>
<a name="l01111"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a9ad25e1d390b30dda0308be33fb1b3c0">01111</a>     <a class="code" href="struct___ipl_image.html">IplImage</a>** <a class="code" href="classcv_1_1_one_way_descriptor.html#a9ad25e1d390b30dda0308be33fb1b3c0">m_samples</a>; <span class="comment">// an array of length m_pose_count containing the patch in different poses</span>
<a name="l01112"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#aee489a0a4d33d9c890f3f9a4fb547ee6">01112</a>     <a class="code" href="struct___ipl_image.html">IplImage</a>* <a class="code" href="classcv_1_1_one_way_descriptor.html#aee489a0a4d33d9c890f3f9a4fb547ee6">m_input_patch</a>;
<a name="l01113"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a34feae0d045492ae83b8d0c839aea171">01113</a>     <a class="code" href="struct___ipl_image.html">IplImage</a>* <a class="code" href="classcv_1_1_one_way_descriptor.html#a34feae0d045492ae83b8d0c839aea171">m_train_patch</a>;
<a name="l01114"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a9bd8d5cda48b5f0882547e3210722ca4">01114</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>** <a class="code" href="classcv_1_1_one_way_descriptor.html#a9bd8d5cda48b5f0882547e3210722ca4">m_pca_coeffs</a>; <span class="comment">// an array of length m_pose_count containing pca decomposition of the patch in different poses</span>
<a name="l01115"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a07484b2ab56bed1fe6a23d78c326f24f">01115</a>     <a class="code" href="classcv_1_1_cv_affine_pose.html">CvAffinePose</a>* <a class="code" href="classcv_1_1_one_way_descriptor.html#a07484b2ab56bed1fe6a23d78c326f24f">m_affine_poses</a>; <span class="comment">// an array of poses</span>
<a name="l01116"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a847634b8efe670b360a45a6fc1b3e938">01116</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>** <a class="code" href="classcv_1_1_one_way_descriptor.html#a847634b8efe670b360a45a6fc1b3e938">m_transforms</a>; <span class="comment">// an array of affine transforms corresponding to poses</span>
<a name="l01117"></a>01117 
<a name="l01118"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#ad812e563a11a145c9370cb4db0e82292">01118</a>     <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#ad812e563a11a145c9370cb4db0e82292">m_feature_name</a>; <span class="comment">// the name of the feature associated with the descriptor</span>
<a name="l01119"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#ab60358ffb33306f1e35bbf37dc94b0dd">01119</a>     <a class="code" href="struct_cv_point.html">CvPoint</a> <a class="code" href="classcv_1_1_one_way_descriptor.html#ab60358ffb33306f1e35bbf37dc94b0dd">m_center</a>; <span class="comment">// the coordinates of the feature (the center of the input image ROI)</span>
<a name="l01120"></a>01120 
<a name="l01121"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#ac6b97d879eb7d81f43dd0fbf87ab14c7">01121</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#ac6b97d879eb7d81f43dd0fbf87ab14c7">m_pca_dim_high</a>; <span class="comment">// the number of descriptor pca components to use for generating affine poses</span>
<a name="l01122"></a><a class="code" href="classcv_1_1_one_way_descriptor.html#a72b9fefad76ad9a218c5b7504e038fa4">01122</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor.html#a72b9fefad76ad9a218c5b7504e038fa4">m_pca_dim_low</a>; <span class="comment">// the number of pca components to use for comparison</span>
<a name="l01123"></a>01123 };
<a name="l01124"></a>01124 
<a name="l01125"></a>01125 
<a name="l01126"></a>01126 <span class="comment">// OneWayDescriptorBase: encapsulates functionality for training/loading a set of one way descriptors</span>
<a name="l01127"></a>01127 <span class="comment">// and finding the nearest closest descriptor to an input feature</span>
<a name="l01128"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html">01128</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_one_way_descriptor_base.html">OneWayDescriptorBase</a>
<a name="l01129"></a>01129 {
<a name="l01130"></a>01130 <span class="keyword">public</span>:
<a name="l01131"></a>01131 
<a name="l01132"></a>01132     <span class="comment">// creates an instance of OneWayDescriptor from a set of training files</span>
<a name="l01133"></a>01133     <span class="comment">// - patch_size: size of the input (large) patch</span>
<a name="l01134"></a>01134     <span class="comment">// - pose_count: the number of poses to generate for each descriptor</span>
<a name="l01135"></a>01135     <span class="comment">// - train_path: path to training files</span>
<a name="l01136"></a>01136     <span class="comment">// - pca_config: the name of the file that contains PCA for small patches (2 times smaller</span>
<a name="l01137"></a>01137     <span class="comment">// than patch_size each dimension</span>
<a name="l01138"></a>01138     <span class="comment">// - pca_hr_config: the name of the file that contains PCA for large patches (of patch_size size)</span>
<a name="l01139"></a>01139     <span class="comment">// - pca_desc_config: the name of the file that contains descriptors of PCA components</span>
<a name="l01140"></a>01140     <a class="code" href="classcv_1_1_one_way_descriptor_base.html">OneWayDescriptorBase</a>(<a class="code" href="struct_cv_size.html">CvSize</a> patch_size, <span class="keywordtype">int</span> pose_count, <span class="keyword">const</span> <span class="keywordtype">char</span>* train_path = 0, <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_config = 0,
<a name="l01141"></a>01141                          <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_hr_config = 0, <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_desc_config = 0, <span class="keywordtype">int</span> pyr_levels = 1,
<a name="l01142"></a>01142                          <span class="keywordtype">int</span> pca_dim_high = 100, <span class="keywordtype">int</span> pca_dim_low = 100);
<a name="l01143"></a>01143 
<a name="l01144"></a>01144     <a class="code" href="classcv_1_1_one_way_descriptor_base.html">OneWayDescriptorBase</a>(<a class="code" href="struct_cv_size.html">CvSize</a> patch_size, <span class="keywordtype">int</span> pose_count, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;pca_filename, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;train_path = <span class="keywordtype">string</span>(), <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;images_list = <span class="keywordtype">string</span>(),
<a name="l01145"></a>01145                          <span class="keywordtype">float</span> _scale_min = 0.7f, <span class="keywordtype">float</span> _scale_max=1.5f, <span class="keywordtype">float</span> _scale_step=1.2f, <span class="keywordtype">int</span> pyr_levels = 1,
<a name="l01146"></a>01146                          <span class="keywordtype">int</span> pca_dim_high = 100, <span class="keywordtype">int</span> pca_dim_low = 100);
<a name="l01147"></a>01147 
<a name="l01148"></a>01148 
<a name="l01149"></a>01149     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_one_way_descriptor_base.html">OneWayDescriptorBase</a>();
<a name="l01150"></a>01150     <span class="keywordtype">void</span> <a class="codeRef" doxygen="cinder.tag:../../../../docs/html/" href="../../../../docs/html/namespacecinder_1_1gl.html#a2fbfcc011e3992ebe4a239464a97d896">clear</a> ();
<a name="l01151"></a>01151 
<a name="l01152"></a>01152 
<a name="l01153"></a>01153     <span class="comment">// Allocate: allocates memory for a given number of descriptors</span>
<a name="l01154"></a>01154     <span class="keywordtype">void</span> Allocate(<span class="keywordtype">int</span> train_feature_count);
<a name="l01155"></a>01155 
<a name="l01156"></a>01156     <span class="comment">// AllocatePCADescriptors: allocates memory for pca descriptors</span>
<a name="l01157"></a>01157     <span class="keywordtype">void</span> AllocatePCADescriptors();
<a name="l01158"></a>01158 
<a name="l01159"></a>01159     <span class="comment">// returns patch size</span>
<a name="l01160"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ab697e9e2ff5c330e8a6190bdd10a39a0">01160</a>     <a class="code" href="struct_cv_size.html">CvSize</a> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ab697e9e2ff5c330e8a6190bdd10a39a0">GetPatchSize</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_patch_size;};
<a name="l01161"></a>01161     <span class="comment">// returns the number of poses for each descriptor</span>
<a name="l01162"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a99e46daec7278d4c7e3868c974ce902e">01162</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a99e46daec7278d4c7e3868c974ce902e">GetPoseCount</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pose_count;};
<a name="l01163"></a>01163 
<a name="l01164"></a>01164     <span class="comment">// returns the number of pyramid levels</span>
<a name="l01165"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a1cde8e0c7ccf9ef6672900e1e19311b2">01165</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a1cde8e0c7ccf9ef6672900e1e19311b2">GetPyrLevels</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pyr_levels;};
<a name="l01166"></a>01166 
<a name="l01167"></a>01167     <span class="comment">// returns the number of descriptors</span>
<a name="l01168"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a05f690a8231cf6e692ff37110516c96c">01168</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a05f690a8231cf6e692ff37110516c96c">GetDescriptorCount</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_train_feature_count;};
<a name="l01169"></a>01169 
<a name="l01170"></a>01170     <span class="comment">// CreateDescriptorsFromImage: creates descriptors for each of the input features</span>
<a name="l01171"></a>01171     <span class="comment">// - src: input image</span>
<a name="l01172"></a>01172     <span class="comment">// - features: input features</span>
<a name="l01173"></a>01173     <span class="comment">// - pyr_levels: the number of pyramid levels</span>
<a name="l01174"></a>01174     <span class="keywordtype">void</span> CreateDescriptorsFromImage(<a class="code" href="struct___ipl_image.html">IplImage</a>* <a class="code" href="core__c_8h.html#ab0b75e5f1b08602f0483c963a92330b2">src</a>, <span class="keyword">const</span> std::vector&lt;cv::KeyPoint&gt;&amp; features);
<a name="l01175"></a>01175 
<a name="l01176"></a>01176     <span class="comment">// CreatePCADescriptors: generates descriptors for PCA components, needed for fast generation of feature descriptors</span>
<a name="l01177"></a>01177     <span class="keywordtype">void</span> CreatePCADescriptors();
<a name="l01178"></a>01178 
<a name="l01179"></a>01179     <span class="comment">// returns a feature descriptor by feature index</span>
<a name="l01180"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ae4522d2c71526b8dd1f3375dcb9b2cf0">01180</a>     <span class="keyword">const</span> <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ae4522d2c71526b8dd1f3375dcb9b2cf0">GetDescriptor</a>(<span class="keywordtype">int</span> desc_idx)<span class="keyword"> const </span>{<span class="keywordflow">return</span> &amp;m_descriptors[desc_idx];};
<a name="l01181"></a>01181 
<a name="l01182"></a>01182     <span class="comment">// FindDescriptor: finds the closest descriptor</span>
<a name="l01183"></a>01183     <span class="comment">// - patch: input image patch</span>
<a name="l01184"></a>01184     <span class="comment">// - desc_idx: output index of the closest descriptor to the input patch</span>
<a name="l01185"></a>01185     <span class="comment">// - pose_idx: output index of the closest pose of the closest descriptor to the input patch</span>
<a name="l01186"></a>01186     <span class="comment">// - distance: distance from the input patch to the closest feature pose</span>
<a name="l01187"></a>01187     <span class="comment">// - _scales: scales of the input patch for each descriptor</span>
<a name="l01188"></a>01188     <span class="comment">// - scale_ranges: input scales variation (float[2])</span>
<a name="l01189"></a>01189     <span class="keywordtype">void</span> FindDescriptor(<a class="code" href="struct___ipl_image.html">IplImage</a>* patch, <span class="keywordtype">int</span>&amp; desc_idx, <span class="keywordtype">int</span>&amp; pose_idx, <span class="keywordtype">float</span>&amp; distance, <span class="keywordtype">float</span>* _scale = 0, <span class="keywordtype">float</span>* scale_ranges = 0) <span class="keyword">const</span>;
<a name="l01190"></a>01190 
<a name="l01191"></a>01191     <span class="comment">// - patch: input image patch</span>
<a name="l01192"></a>01192     <span class="comment">// - n: number of the closest indexes</span>
<a name="l01193"></a>01193     <span class="comment">// - desc_idxs: output indexes of the closest descriptor to the input patch (n)</span>
<a name="l01194"></a>01194     <span class="comment">// - pose_idx: output indexes of the closest pose of the closest descriptor to the input patch (n)</span>
<a name="l01195"></a>01195     <span class="comment">// - distances: distance from the input patch to the closest feature pose (n)</span>
<a name="l01196"></a>01196     <span class="comment">// - _scales: scales of the input patch</span>
<a name="l01197"></a>01197     <span class="comment">// - scale_ranges: input scales variation (float[2])</span>
<a name="l01198"></a>01198     <span class="keywordtype">void</span> FindDescriptor(<a class="code" href="struct___ipl_image.html">IplImage</a>* patch, <span class="keywordtype">int</span> <a class="code" href="imgproc__c_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, std::vector&lt;int&gt;&amp; desc_idxs, std::vector&lt;int&gt;&amp; pose_idxs,
<a name="l01199"></a>01199                         std::vector&lt;float&gt;&amp; distances, std::vector&lt;float&gt;&amp; _scales, <span class="keywordtype">float</span>* scale_ranges = 0) <span class="keyword">const</span>;
<a name="l01200"></a>01200 
<a name="l01201"></a>01201     <span class="comment">// FindDescriptor: finds the closest descriptor</span>
<a name="l01202"></a>01202     <span class="comment">// - src: input image</span>
<a name="l01203"></a>01203     <span class="comment">// - pt: center of the feature</span>
<a name="l01204"></a>01204     <span class="comment">// - desc_idx: output index of the closest descriptor to the input patch</span>
<a name="l01205"></a>01205     <span class="comment">// - pose_idx: output index of the closest pose of the closest descriptor to the input patch</span>
<a name="l01206"></a>01206     <span class="comment">// - distance: distance from the input patch to the closest feature pose</span>
<a name="l01207"></a>01207     <span class="keywordtype">void</span> FindDescriptor(<a class="code" href="struct___ipl_image.html">IplImage</a>* <a class="code" href="core__c_8h.html#ab0b75e5f1b08602f0483c963a92330b2">src</a>, <a class="code" href="classcv_1_1_point__.html">cv::Point2f</a> pt, <span class="keywordtype">int</span>&amp; desc_idx, <span class="keywordtype">int</span>&amp; pose_idx, <span class="keywordtype">float</span>&amp; distance) <span class="keyword">const</span>;
<a name="l01208"></a>01208 
<a name="l01209"></a>01209     <span class="comment">// InitializePoses: generates random poses</span>
<a name="l01210"></a>01210     <span class="keywordtype">void</span> InitializePoses();
<a name="l01211"></a>01211 
<a name="l01212"></a>01212     <span class="comment">// InitializeTransformsFromPoses: generates 2x3 affine matrices from poses (initializes m_transforms)</span>
<a name="l01213"></a>01213     <span class="keywordtype">void</span> InitializeTransformsFromPoses();
<a name="l01214"></a>01214 
<a name="l01215"></a>01215     <span class="comment">// InitializePoseTransforms: subsequently calls InitializePoses and InitializeTransformsFromPoses</span>
<a name="l01216"></a>01216     <span class="keywordtype">void</span> InitializePoseTransforms();
<a name="l01217"></a>01217 
<a name="l01218"></a>01218     <span class="comment">// InitializeDescriptor: initializes a descriptor</span>
<a name="l01219"></a>01219     <span class="comment">// - desc_idx: descriptor index</span>
<a name="l01220"></a>01220     <span class="comment">// - train_image: image patch (ROI is supported)</span>
<a name="l01221"></a>01221     <span class="comment">// - feature_label: feature textual label</span>
<a name="l01222"></a>01222     <span class="keywordtype">void</span> InitializeDescriptor(<span class="keywordtype">int</span> desc_idx, <a class="code" href="struct___ipl_image.html">IplImage</a>* train_image, <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_label);
<a name="l01223"></a>01223 
<a name="l01224"></a>01224     <span class="keywordtype">void</span> InitializeDescriptor(<span class="keywordtype">int</span> desc_idx, <a class="code" href="struct___ipl_image.html">IplImage</a>* train_image, <span class="keyword">const</span> <a class="code" href="classcv_1_1_key_point.html" title="The Keypoint Class.">cv::KeyPoint</a>&amp; keypoint, <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_label);
<a name="l01225"></a>01225 
<a name="l01226"></a>01226     <span class="comment">// InitializeDescriptors: load features from an image and create descriptors for each of them</span>
<a name="l01227"></a>01227     <span class="keywordtype">void</span> InitializeDescriptors(<a class="code" href="struct___ipl_image.html">IplImage</a>* train_image, <span class="keyword">const</span> vector&lt;cv::KeyPoint&gt;&amp; features,
<a name="l01228"></a>01228                                <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_label = <span class="stringliteral">&quot;&quot;</span>, <span class="keywordtype">int</span> desc_start_idx = 0);
<a name="l01229"></a>01229 
<a name="l01230"></a>01230     <span class="comment">// Write: writes this object to a file storage</span>
<a name="l01231"></a>01231     <span class="comment">// - fs: output filestorage</span>
<a name="l01232"></a>01232     <span class="keywordtype">void</span> Write (<a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a> &amp;fs) <span class="keyword">const</span>;
<a name="l01233"></a>01233     
<a name="l01234"></a>01234     <span class="comment">// Read: reads OneWayDescriptorBase object from a file node</span>
<a name="l01235"></a>01235     <span class="comment">// - fn: input file node    </span>
<a name="l01236"></a>01236     <span class="keywordtype">void</span> Read (<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a> &amp;fn);
<a name="l01237"></a>01237 
<a name="l01238"></a>01238     <span class="comment">// LoadPCADescriptors: loads PCA descriptors from a file</span>
<a name="l01239"></a>01239     <span class="comment">// - filename: input filename</span>
<a name="l01240"></a>01240     <span class="keywordtype">int</span> LoadPCADescriptors(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="core__c_8h.html#acc427f35f3bd9f865d39012657cc42f8">filename</a>);
<a name="l01241"></a>01241 
<a name="l01242"></a>01242     <span class="comment">// LoadPCADescriptors: loads PCA descriptors from a file node</span>
<a name="l01243"></a>01243     <span class="comment">// - fn: input file node</span>
<a name="l01244"></a>01244     <span class="keywordtype">int</span> LoadPCADescriptors(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a> &amp;fn);
<a name="l01245"></a>01245 
<a name="l01246"></a>01246     <span class="comment">// SavePCADescriptors: saves PCA descriptors to a file</span>
<a name="l01247"></a>01247     <span class="comment">// - filename: output filename</span>
<a name="l01248"></a>01248     <span class="keywordtype">void</span> SavePCADescriptors(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="core__c_8h.html#acc427f35f3bd9f865d39012657cc42f8">filename</a>);
<a name="l01249"></a>01249 
<a name="l01250"></a>01250     <span class="comment">// SavePCADescriptors: saves PCA descriptors to a file storage</span>
<a name="l01251"></a>01251     <span class="comment">// - fs: output file storage</span>
<a name="l01252"></a>01252     <span class="keywordtype">void</span> SavePCADescriptors(<a class="code" href="core_2types__c_8h.html#a84556d1bb6f1b8b02c04c60246747a7e">CvFileStorage</a>* fs) <span class="keyword">const</span>;
<a name="l01253"></a>01253 
<a name="l01254"></a>01254     <span class="comment">// GeneratePCA: calculate and save PCA components and descriptors</span>
<a name="l01255"></a>01255     <span class="comment">// - img_path: path to training PCA images directory</span>
<a name="l01256"></a>01256     <span class="comment">// - images_list: filename with filenames of training PCA images</span>
<a name="l01257"></a>01257     <span class="keywordtype">void</span> GeneratePCA(<span class="keyword">const</span> <span class="keywordtype">char</span>* img_path, <span class="keyword">const</span> <span class="keywordtype">char</span>* images_list, <span class="keywordtype">int</span> pose_count=500);
<a name="l01258"></a>01258 
<a name="l01259"></a>01259     <span class="comment">// SetPCAHigh: sets the high resolution pca matrices (copied to internal structures)</span>
<a name="l01260"></a>01260     <span class="keywordtype">void</span> SetPCAHigh(<a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="core__c_8h.html#a92db7c1486bb541ca602670b43c052e8">avg</a>, <a class="code" href="struct_cv_mat.html">CvMat</a>* eigenvectors);
<a name="l01261"></a>01261 
<a name="l01262"></a>01262     <span class="comment">// SetPCALow: sets the low resolution pca matrices (copied to internal structures)</span>
<a name="l01263"></a>01263     <span class="keywordtype">void</span> SetPCALow(<a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="core__c_8h.html#a92db7c1486bb541ca602670b43c052e8">avg</a>, <a class="code" href="struct_cv_mat.html">CvMat</a>* eigenvectors);
<a name="l01264"></a>01264 
<a name="l01265"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a02dd2c18aa6f5414b3c15871d8fd936b">01265</a>     <span class="keywordtype">int</span> GetLowPCA(<a class="code" href="struct_cv_mat.html">CvMat</a>** <a class="code" href="core__c_8h.html#a92db7c1486bb541ca602670b43c052e8">avg</a>, <a class="code" href="struct_cv_mat.html">CvMat</a>** eigenvectors)
<a name="l01266"></a>01266     {
<a name="l01267"></a>01267         *avg = m_pca_avg;
<a name="l01268"></a>01268         *eigenvectors = m_pca_eigenvectors;
<a name="l01269"></a>01269         <span class="keywordflow">return</span> m_pca_dim_low;
<a name="l01270"></a>01270     };
<a name="l01271"></a>01271 
<a name="l01272"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a43237911ad4625bc86bcd52a8ebbfcee">01272</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a43237911ad4625bc86bcd52a8ebbfcee">GetPCADimLow</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pca_dim_low;};
<a name="l01273"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ad772cef64cdd1037b0f26ee42930ca76">01273</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ad772cef64cdd1037b0f26ee42930ca76">GetPCADimHigh</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pca_dim_high;};
<a name="l01274"></a>01274 
<a name="l01275"></a>01275     <span class="keywordtype">void</span> ConvertDescriptorsArrayToTree(); <span class="comment">// Converting pca_descriptors array to KD tree</span>
<a name="l01276"></a>01276 
<a name="l01277"></a>01277     <span class="comment">// GetPCAFilename: get default PCA filename</span>
<a name="l01278"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#abde625a15bca0ba0f0e928d7f3f5dee4">01278</a>     <span class="keyword">static</span> <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#abde625a15bca0ba0f0e928d7f3f5dee4">GetPCAFilename</a> () { <span class="keywordflow">return</span> <span class="stringliteral">&quot;pca.yml&quot;</span>; }
<a name="l01279"></a>01279 
<a name="l01280"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#adef37c9f75c3015f1f2f48511d7437b8">01280</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#adef37c9f75c3015f1f2f48511d7437b8">empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_train_feature_count &lt;= 0 ? <span class="keyword">true</span> : <span class="keyword">false</span>; }
<a name="l01281"></a>01281 
<a name="l01282"></a>01282 <span class="keyword">protected</span>:
<a name="l01283"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ab109f2d46b2bbf853158dec66f24ef57">01283</a>     <a class="code" href="struct_cv_size.html">CvSize</a> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ab109f2d46b2bbf853158dec66f24ef57">m_patch_size</a>; <span class="comment">// patch size</span>
<a name="l01284"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a695d5465b9f923e00d7ff9d8af2bbd51">01284</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a695d5465b9f923e00d7ff9d8af2bbd51">m_pose_count</a>; <span class="comment">// the number of poses for each descriptor</span>
<a name="l01285"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a905effbcfcca2dd002224317b48ea288">01285</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a905effbcfcca2dd002224317b48ea288">m_train_feature_count</a>; <span class="comment">// the number of the training features</span>
<a name="l01286"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a22c399b9e3a7e5a64780f4b234bb8f18">01286</a>     <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a22c399b9e3a7e5a64780f4b234bb8f18">m_descriptors</a>; <span class="comment">// array of train feature descriptors</span>
<a name="l01287"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a04af1c90f1dad3fcac585877e1ce6585">01287</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a04af1c90f1dad3fcac585877e1ce6585">m_pca_avg</a>; <span class="comment">// PCA average Vector for small patches</span>
<a name="l01288"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a7ecc5408ce5db7431406b6a6eac9d51f">01288</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a7ecc5408ce5db7431406b6a6eac9d51f">m_pca_eigenvectors</a>; <span class="comment">// PCA eigenvectors for small patches</span>
<a name="l01289"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac5546555811a3a23ef4e6a69f935633d">01289</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac5546555811a3a23ef4e6a69f935633d">m_pca_hr_avg</a>; <span class="comment">// PCA average Vector for large patches</span>
<a name="l01290"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#aaf56efc18add898b42229bae4192e1c7">01290</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#aaf56efc18add898b42229bae4192e1c7">m_pca_hr_eigenvectors</a>; <span class="comment">// PCA eigenvectors for large patches</span>
<a name="l01291"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a7ddf78b1c2bd0237ee33d4dfec0908f1">01291</a>     <a class="code" href="classcv_1_1_one_way_descriptor.html">OneWayDescriptor</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a7ddf78b1c2bd0237ee33d4dfec0908f1">m_pca_descriptors</a>; <span class="comment">// an array of PCA descriptors</span>
<a name="l01292"></a>01292 
<a name="l01293"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac35fa4f783dc3c16f3f1a04e0e54c859">01293</a>     <a class="code" href="classcv_1_1flann_1_1_index__.html">cv::flann::Index</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac35fa4f783dc3c16f3f1a04e0e54c859">m_pca_descriptors_tree</a>;
<a name="l01294"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#aaf324999d7c95ecbfc926c3ac4279ca3">01294</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#aaf324999d7c95ecbfc926c3ac4279ca3">m_pca_descriptors_matrix</a>;
<a name="l01295"></a>01295 
<a name="l01296"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a00b20d2ef5bce2e8a8cc1721d2773cc7">01296</a>     <a class="code" href="classcv_1_1_cv_affine_pose.html">CvAffinePose</a>* <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a00b20d2ef5bce2e8a8cc1721d2773cc7">m_poses</a>; <span class="comment">// array of poses</span>
<a name="l01297"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a4d4e05e23931686c23feffaeaace51a0">01297</a>     <a class="code" href="struct_cv_mat.html">CvMat</a>** <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a4d4e05e23931686c23feffaeaace51a0">m_transforms</a>; <span class="comment">// array of affine transformations corresponding to poses</span>
<a name="l01298"></a>01298 
<a name="l01299"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#aea6594e34a723ad3104ba31b199123ed">01299</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#aea6594e34a723ad3104ba31b199123ed">m_pca_dim_high</a>;
<a name="l01300"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a0e06db39952fafd529be28966e46192d">01300</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a0e06db39952fafd529be28966e46192d">m_pca_dim_low</a>;
<a name="l01301"></a>01301 
<a name="l01302"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac47147854424ef0d5f2d50b63fdb0bd9">01302</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ac47147854424ef0d5f2d50b63fdb0bd9">m_pyr_levels</a>;
<a name="l01303"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a744f60dfdacd7abc6cea33e0487e417c">01303</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a744f60dfdacd7abc6cea33e0487e417c">scale_min</a>;
<a name="l01304"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#ad7346ed992afac6d621dc15775076a69">01304</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#ad7346ed992afac6d621dc15775076a69">scale_max</a>;
<a name="l01305"></a><a class="code" href="classcv_1_1_one_way_descriptor_base.html#a2b234f3bdd485dfda8a80c41ae96417d">01305</a>     <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html#a2b234f3bdd485dfda8a80c41ae96417d">scale_step</a>;
<a name="l01306"></a>01306 
<a name="l01307"></a>01307     <span class="comment">// SavePCAall: saves PCA components and descriptors to a file storage</span>
<a name="l01308"></a>01308     <span class="comment">// - fs: output file storage</span>
<a name="l01309"></a>01309     <span class="keywordtype">void</span> SavePCAall (<a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a> &amp;fs) <span class="keyword">const</span>;
<a name="l01310"></a>01310 
<a name="l01311"></a>01311     <span class="comment">// LoadPCAall: loads PCA components and descriptors from a file node</span>
<a name="l01312"></a>01312     <span class="comment">// - fn: input file node</span>
<a name="l01313"></a>01313     <span class="keywordtype">void</span> LoadPCAall (<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a> &amp;fn);
<a name="l01314"></a>01314 };
<a name="l01315"></a>01315 
<a name="l01316"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html">01316</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_one_way_descriptor_object.html">OneWayDescriptorObject</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_one_way_descriptor_base.html">OneWayDescriptorBase</a>
<a name="l01317"></a>01317 {
<a name="l01318"></a>01318 <span class="keyword">public</span>:
<a name="l01319"></a>01319     <span class="comment">// creates an instance of OneWayDescriptorObject from a set of training files</span>
<a name="l01320"></a>01320     <span class="comment">// - patch_size: size of the input (large) patch</span>
<a name="l01321"></a>01321     <span class="comment">// - pose_count: the number of poses to generate for each descriptor</span>
<a name="l01322"></a>01322     <span class="comment">// - train_path: path to training files</span>
<a name="l01323"></a>01323     <span class="comment">// - pca_config: the name of the file that contains PCA for small patches (2 times smaller</span>
<a name="l01324"></a>01324     <span class="comment">// than patch_size each dimension</span>
<a name="l01325"></a>01325     <span class="comment">// - pca_hr_config: the name of the file that contains PCA for large patches (of patch_size size)</span>
<a name="l01326"></a>01326     <span class="comment">// - pca_desc_config: the name of the file that contains descriptors of PCA components</span>
<a name="l01327"></a>01327     <a class="code" href="classcv_1_1_one_way_descriptor_object.html">OneWayDescriptorObject</a>(<a class="code" href="struct_cv_size.html">CvSize</a> patch_size, <span class="keywordtype">int</span> pose_count, <span class="keyword">const</span> <span class="keywordtype">char</span>* train_path, <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_config,
<a name="l01328"></a>01328                            <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_hr_config = 0, <span class="keyword">const</span> <span class="keywordtype">char</span>* pca_desc_config = 0, <span class="keywordtype">int</span> pyr_levels = 1);
<a name="l01329"></a>01329 
<a name="l01330"></a>01330     <a class="code" href="classcv_1_1_one_way_descriptor_object.html">OneWayDescriptorObject</a>(<a class="code" href="struct_cv_size.html">CvSize</a> patch_size, <span class="keywordtype">int</span> pose_count, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;pca_filename,
<a name="l01331"></a>01331                            <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;train_path = <span class="keywordtype">string</span> (), <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;images_list = <span class="keywordtype">string</span> (),
<a name="l01332"></a>01332                            <span class="keywordtype">float</span> _scale_min = 0.7f, <span class="keywordtype">float</span> _scale_max=1.5f, <span class="keywordtype">float</span> _scale_step=1.2f, <span class="keywordtype">int</span> pyr_levels = 1);
<a name="l01333"></a>01333 
<a name="l01334"></a>01334 
<a name="l01335"></a>01335     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_one_way_descriptor_object.html">OneWayDescriptorObject</a>();
<a name="l01336"></a>01336 
<a name="l01337"></a>01337     <span class="comment">// Allocate: allocates memory for a given number of features</span>
<a name="l01338"></a>01338     <span class="comment">// - train_feature_count: the total number of features</span>
<a name="l01339"></a>01339     <span class="comment">// - object_feature_count: the number of features extracted from the object</span>
<a name="l01340"></a>01340     <span class="keywordtype">void</span> Allocate(<span class="keywordtype">int</span> train_feature_count, <span class="keywordtype">int</span> object_feature_count);
<a name="l01341"></a>01341 
<a name="l01342"></a>01342 
<a name="l01343"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#adba760a152631d6809d54e6a704e7eb5">01343</a>     <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_one_way_descriptor_object.html#adba760a152631d6809d54e6a704e7eb5">SetLabeledFeatures</a>(<span class="keyword">const</span> vector&lt;cv::KeyPoint&gt;&amp; features) {m_train_features = features;};
<a name="l01344"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#a6769b2ba76d72a6636a5a5d9016962c8">01344</a>     vector&lt;cv::KeyPoint&gt;&amp; <a class="code" href="classcv_1_1_one_way_descriptor_object.html#a6769b2ba76d72a6636a5a5d9016962c8">GetLabeledFeatures</a>() {<span class="keywordflow">return</span> m_train_features;};
<a name="l01345"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#aa4dbff486cd49aaa5fed894cee251323">01345</a>     <span class="keyword">const</span> vector&lt;cv::KeyPoint&gt;&amp; <a class="code" href="classcv_1_1_one_way_descriptor_object.html#aa4dbff486cd49aaa5fed894cee251323">GetLabeledFeatures</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_train_features;};
<a name="l01346"></a>01346     vector&lt;cv::KeyPoint&gt; _GetLabeledFeatures() <span class="keyword">const</span>;
<a name="l01347"></a>01347 
<a name="l01348"></a>01348     <span class="comment">// IsDescriptorObject: returns 1 if descriptor with specified index is positive, otherwise 0</span>
<a name="l01349"></a>01349     <span class="keywordtype">int</span> IsDescriptorObject(<span class="keywordtype">int</span> desc_idx) <span class="keyword">const</span>;
<a name="l01350"></a>01350 
<a name="l01351"></a>01351     <span class="comment">// MatchPointToPart: returns the part number of a feature if it matches one of the object parts, otherwise -1</span>
<a name="l01352"></a>01352     <span class="keywordtype">int</span> MatchPointToPart(<a class="code" href="struct_cv_point.html">CvPoint</a> pt) <span class="keyword">const</span>;
<a name="l01353"></a>01353 
<a name="l01354"></a>01354     <span class="comment">// GetDescriptorPart: returns the part number of the feature corresponding to a specified descriptor</span>
<a name="l01355"></a>01355     <span class="comment">// - desc_idx: descriptor index</span>
<a name="l01356"></a>01356     <span class="keywordtype">int</span> GetDescriptorPart(<span class="keywordtype">int</span> desc_idx) <span class="keyword">const</span>;
<a name="l01357"></a>01357 
<a name="l01358"></a>01358 
<a name="l01359"></a>01359     <span class="keywordtype">void</span> InitializeObjectDescriptors(<a class="code" href="struct___ipl_image.html">IplImage</a>* train_image, <span class="keyword">const</span> vector&lt;cv::KeyPoint&gt;&amp; features,
<a name="l01360"></a>01360                                      <span class="keyword">const</span> <span class="keywordtype">char</span>* feature_label, <span class="keywordtype">int</span> desc_start_idx = 0, <span class="keywordtype">float</span> <a class="code" href="core__c_8h.html#a6cf5c9eed7945265b2ed48f38d6a5424">scale</a> = 1.0f,
<a name="l01361"></a>01361                                      <span class="keywordtype">int</span> is_background = 0);
<a name="l01362"></a>01362 
<a name="l01363"></a>01363     <span class="comment">// GetObjectFeatureCount: returns the number of object features</span>
<a name="l01364"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#a8b95f117cfdf68b30aa08b0ded2e5543">01364</a>     <span class="keywordtype">int</span> GetObjectFeatureCount()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_object_feature_count;};
<a name="l01365"></a>01365 
<a name="l01366"></a>01366 <span class="keyword">protected</span>:
<a name="l01367"></a>01367     <span class="keywordtype">int</span>* m_part_id; <span class="comment">// contains part id for each of object descriptors</span>
<a name="l01368"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#ac9728144b5d747a00cf2a3f127004912">01368</a>     vector&lt;cv::KeyPoint&gt; <a class="code" href="classcv_1_1_one_way_descriptor_object.html#ac9728144b5d747a00cf2a3f127004912">m_train_features</a>; <span class="comment">// train features</span>
<a name="l01369"></a><a class="code" href="classcv_1_1_one_way_descriptor_object.html#a78d83003b52b67a2b886606cad96662f">01369</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_object.html#a78d83003b52b67a2b886606cad96662f">m_object_feature_count</a>; <span class="comment">// the number of the positive features</span>
<a name="l01370"></a>01370 
<a name="l01371"></a>01371 };
<a name="l01372"></a>01372 
<a name="l01373"></a>01373 
<a name="l01374"></a>01374 <span class="comment">/****************************************************************************************\</span>
<a name="l01375"></a>01375 <span class="comment">*                                    FeatureDetector                                     *</span>
<a name="l01376"></a>01376 <span class="comment">\****************************************************************************************/</span>
<a name="l01377"></a>01377 
<a name="l01378"></a>01378 <span class="comment">/*</span>
<a name="l01379"></a>01379 <span class="comment"> * Abstract base class for 2D image feature detectors.</span>
<a name="l01380"></a>01380 <span class="comment"> */</span>
<a name="l01381"></a><a class="code" href="classcv_1_1_feature_detector.html">01381</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01382"></a>01382 {
<a name="l01383"></a>01383 <span class="keyword">public</span>:
<a name="l01384"></a>01384     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>();
<a name="l01385"></a>01385     
<a name="l01386"></a>01386     <span class="comment">/*</span>
<a name="l01387"></a>01387 <span class="comment">     * Detect keypoints in an image.</span>
<a name="l01388"></a>01388 <span class="comment">     * image        The image.</span>
<a name="l01389"></a>01389 <span class="comment">     * keypoints    The detected keypoints.</span>
<a name="l01390"></a>01390 <span class="comment">     * mask         Mask specifying where to look for keypoints (optional). Must be a char</span>
<a name="l01391"></a>01391 <span class="comment">     *              matrix with non-zero values in the region of interest.</span>
<a name="l01392"></a>01392 <span class="comment">     */</span>
<a name="l01393"></a>01393     <span class="keywordtype">void</span> detect( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01394"></a>01394     
<a name="l01395"></a>01395     <span class="comment">/*</span>
<a name="l01396"></a>01396 <span class="comment">     * Detect keypoints in an image set.</span>
<a name="l01397"></a>01397 <span class="comment">     * images       Image collection.</span>
<a name="l01398"></a>01398 <span class="comment">     * keypoints    Collection of keypoints detected in an input images. keypoints[i] is a set of keypoints detected in an images[i].</span>
<a name="l01399"></a>01399 <span class="comment">     * masks        Masks for image set. masks[i] is a mask for images[i].</span>
<a name="l01400"></a>01400 <span class="comment">     */</span>
<a name="l01401"></a>01401     <span class="keywordtype">void</span> detect( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; images, vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; keypoints, <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;() ) <span class="keyword">const</span>;
<a name="l01402"></a>01402 
<a name="l01403"></a>01403     <span class="comment">// Read detector object from a file node.</span>
<a name="l01404"></a>01404     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; );
<a name="l01405"></a>01405     <span class="comment">// Read detector object from a file node.</span>
<a name="l01406"></a>01406     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; ) <span class="keyword">const</span>;
<a name="l01407"></a>01407 
<a name="l01408"></a>01408     <span class="comment">// Return true if detector object is empty</span>
<a name="l01409"></a>01409     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l01410"></a>01410 
<a name="l01411"></a>01411     <span class="comment">// Create feature detector by detector name.</span>
<a name="l01412"></a>01412     <span class="keyword">static</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FeatureDetector&gt;</a> create( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; detectorType );
<a name="l01413"></a>01413 
<a name="l01414"></a>01414 <span class="keyword">protected</span>:
<a name="l01415"></a>01415     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span> = 0;
<a name="l01416"></a>01416 
<a name="l01417"></a>01417     <span class="comment">/*</span>
<a name="l01418"></a>01418 <span class="comment">     * Remove keypoints that are not in the mask.</span>
<a name="l01419"></a>01419 <span class="comment">     * Helper function, useful when wrapping a library call for keypoint detection that</span>
<a name="l01420"></a>01420 <span class="comment">     * does not support a mask argument.</span>
<a name="l01421"></a>01421 <span class="comment">     */</span>
<a name="l01422"></a>01422     <span class="keyword">static</span> <span class="keywordtype">void</span> removeInvalidPoints( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>, vector&lt;KeyPoint&gt;&amp; keypoints );
<a name="l01423"></a>01423 };
<a name="l01424"></a>01424 
<a name="l01425"></a><a class="code" href="classcv_1_1_fast_feature_detector.html">01425</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_fast_feature_detector.html">FastFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01426"></a>01426 {
<a name="l01427"></a>01427 <span class="keyword">public</span>:
<a name="l01428"></a>01428     <a class="code" href="classcv_1_1_fast_feature_detector.html">FastFeatureDetector</a>( <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#abd93e7119f2b85135109ab4b1f4f9eaf" title="applies fixed threshold to the image">threshold</a>=10, <span class="keywordtype">bool</span> nonmaxSuppression=<span class="keyword">true</span> );
<a name="l01429"></a>01429     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; fn );
<a name="l01430"></a>01430     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01431"></a>01431 
<a name="l01432"></a>01432 <span class="keyword">protected</span>:
<a name="l01433"></a>01433     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01434"></a>01434 
<a name="l01435"></a><a class="code" href="classcv_1_1_fast_feature_detector.html#a978cce91168d388fc111ae14502efb4e">01435</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fast_feature_detector.html#a978cce91168d388fc111ae14502efb4e">threshold</a>;
<a name="l01436"></a><a class="code" href="classcv_1_1_fast_feature_detector.html#a50cec46a5150d352d5dbd806884e7194">01436</a>     <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_fast_feature_detector.html#a50cec46a5150d352d5dbd806884e7194">nonmaxSuppression</a>;
<a name="l01437"></a>01437 };
<a name="l01438"></a>01438 
<a name="l01439"></a>01439 
<a name="l01440"></a><a class="code" href="classcv_1_1_good_features_to_track_detector.html">01440</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_good_features_to_track_detector.html">GoodFeaturesToTrackDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01441"></a>01441 {
<a name="l01442"></a>01442 <span class="keyword">public</span>:
<a name="l01443"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">01443</a>     <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">Params</a>
<a name="l01444"></a>01444     {
<a name="l01445"></a>01445     <span class="keyword">public</span>:
<a name="l01446"></a>01446         <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">Params</a>( <span class="keywordtype">int</span> maxCorners=1000, <span class="keywordtype">double</span> qualityLevel=0.01, <span class="keywordtype">double</span> minDistance=1.,
<a name="l01447"></a>01447                 <span class="keywordtype">int</span> blockSize=3, <span class="keywordtype">bool</span> useHarrisDetector=<span class="keyword">false</span>, <span class="keywordtype">double</span> <a class="code" href="imgproc__c_8h.html#a7be9b6436e5ea72ff5d5a66779b4bd38">k</a>=0.04 );
<a name="l01448"></a>01448         <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; fn );
<a name="l01449"></a>01449         <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01450"></a>01450 
<a name="l01451"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#ad027128f892252843b4d8db2a71b58f5">01451</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#ad027128f892252843b4d8db2a71b58f5">maxCorners</a>;
<a name="l01452"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a8e2d118033395038d8956aee674b48d3">01452</a>         <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a8e2d118033395038d8956aee674b48d3">qualityLevel</a>;
<a name="l01453"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a15474fec8e4a065419a4700da66f1370">01453</a>         <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a15474fec8e4a065419a4700da66f1370">minDistance</a>;
<a name="l01454"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a0eb1e7725bfc65a6c171366b8979dade">01454</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a0eb1e7725bfc65a6c171366b8979dade">blockSize</a>;
<a name="l01455"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#ab91c5eadec3dc5949ec54c1748bded4a">01455</a>         <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#ab91c5eadec3dc5949ec54c1748bded4a">useHarrisDetector</a>;
<a name="l01456"></a><a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a222bbbf8b4ab9bb0d3ab2c932ee110e5">01456</a>         <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html#a222bbbf8b4ab9bb0d3ab2c932ee110e5">k</a>;
<a name="l01457"></a>01457     };
<a name="l01458"></a>01458 
<a name="l01459"></a>01459     <a class="code" href="classcv_1_1_good_features_to_track_detector.html">GoodFeaturesToTrackDetector</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">GoodFeaturesToTrackDetector::Params</a>&amp; <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a>=<a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">GoodFeaturesToTrackDetector::Params</a>() );
<a name="l01460"></a>01460     <a class="code" href="classcv_1_1_good_features_to_track_detector.html">GoodFeaturesToTrackDetector</a>( <span class="keywordtype">int</span> maxCorners, <span class="keywordtype">double</span> qualityLevel, <span class="keywordtype">double</span> minDistance,
<a name="l01461"></a>01461                                  <span class="keywordtype">int</span> blockSize=3, <span class="keywordtype">bool</span> useHarrisDetector=<span class="keyword">false</span>, <span class="keywordtype">double</span> <a class="code" href="imgproc__c_8h.html#a7be9b6436e5ea72ff5d5a66779b4bd38">k</a>=0.04 );
<a name="l01462"></a>01462     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; fn );
<a name="l01463"></a>01463     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01464"></a>01464 
<a name="l01465"></a>01465 <span class="keyword">protected</span>:
<a name="l01466"></a>01466     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01467"></a>01467 
<a name="l01468"></a><a class="code" href="classcv_1_1_good_features_to_track_detector.html#aea688a86ee753820e2680c472556d389">01468</a>     <a class="code" href="classcv_1_1_good_features_to_track_detector_1_1_params.html">Params</a> <a class="code" href="classcv_1_1_good_features_to_track_detector.html#aea688a86ee753820e2680c472556d389">params</a>;
<a name="l01469"></a>01469 };
<a name="l01470"></a>01470 
<a name="l01471"></a><a class="code" href="classcv_1_1_mser_feature_detector.html">01471</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_mser_feature_detector.html">MserFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01472"></a>01472 {
<a name="l01473"></a>01473 <span class="keyword">public</span>:
<a name="l01474"></a>01474     <a class="code" href="classcv_1_1_mser_feature_detector.html">MserFeatureDetector</a>( <a class="code" href="struct_cv_m_s_e_r_params.html" title="Maximal Stable Regions Parameters.">CvMSERParams</a> <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a>=cvMSERParams() );
<a name="l01475"></a>01475     <a class="code" href="classcv_1_1_mser_feature_detector.html">MserFeatureDetector</a>( <span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#a5763d62f5c6f37e64f38d25dddcc10fa">delta</a>, <span class="keywordtype">int</span> minArea, <span class="keywordtype">int</span> maxArea, <span class="keywordtype">double</span> maxVariation, <span class="keywordtype">double</span> minDiversity,
<a name="l01476"></a>01476                          <span class="keywordtype">int</span> maxEvolution, <span class="keywordtype">double</span> areaThreshold, <span class="keywordtype">double</span> minMargin, <span class="keywordtype">int</span> edgeBlurSize );
<a name="l01477"></a>01477     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; fn );
<a name="l01478"></a>01478     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01479"></a>01479 
<a name="l01480"></a>01480 <span class="keyword">protected</span>:
<a name="l01481"></a>01481     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01482"></a>01482 
<a name="l01483"></a><a class="code" href="classcv_1_1_mser_feature_detector.html#a0eea5a46b66ef10629642bf610c722b1">01483</a>     <a class="code" href="classcv_1_1_m_s_e_r.html" title="Maximal Stable Extremal Regions class.">MSER</a> <a class="code" href="classcv_1_1_mser_feature_detector.html#a0eea5a46b66ef10629642bf610c722b1">mser</a>;
<a name="l01484"></a>01484 };
<a name="l01485"></a>01485 
<a name="l01486"></a><a class="code" href="classcv_1_1_star_feature_detector.html">01486</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_star_feature_detector.html">StarFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01487"></a>01487 {
<a name="l01488"></a>01488 <span class="keyword">public</span>:
<a name="l01489"></a>01489     <a class="code" href="classcv_1_1_star_feature_detector.html">StarFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a>&amp; <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a>=<a class="code" href="features2d_8hpp.html#a06c87c7caa7c4baf9c36a9909f735de3">cvStarDetectorParams</a>() );
<a name="l01490"></a>01490     <a class="code" href="classcv_1_1_star_feature_detector.html">StarFeatureDetector</a>( <span class="keywordtype">int</span> maxSize, <span class="keywordtype">int</span> responseThreshold=30, <span class="keywordtype">int</span> lineThresholdProjected = 10,
<a name="l01491"></a>01491                          <span class="keywordtype">int</span> lineThresholdBinarized=8, <span class="keywordtype">int</span> suppressNonmaxSize=5 );
<a name="l01492"></a>01492     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; fn );
<a name="l01493"></a>01493     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01494"></a>01494 
<a name="l01495"></a>01495 <span class="keyword">protected</span>:
<a name="l01496"></a>01496     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01497"></a>01497 
<a name="l01498"></a><a class="code" href="classcv_1_1_star_feature_detector.html#a85926d2ef0e6d32108e49b3ffe5802c5">01498</a>     <a class="code" href="classcv_1_1_star_detector.html" title="The &quot;Star&quot; Detector.">StarDetector</a> <a class="code" href="classcv_1_1_star_feature_detector.html#a85926d2ef0e6d32108e49b3ffe5802c5">star</a>;
<a name="l01499"></a>01499 };
<a name="l01500"></a>01500 
<a name="l01501"></a><a class="code" href="classcv_1_1_sift_feature_detector.html">01501</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_sift_feature_detector.html">SiftFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01502"></a>01502 {
<a name="l01503"></a>01503 <span class="keyword">public</span>:
<a name="l01504"></a>01504     <a class="code" href="classcv_1_1_sift_feature_detector.html">SiftFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">SIFT::DetectorParams</a>&amp; detectorParams=<a class="code" href="structcv_1_1_s_i_f_t_1_1_detector_params.html">SIFT::DetectorParams</a>(),
<a name="l01505"></a>01505                          <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">SIFT::CommonParams</a>&amp; commonParams=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">SIFT::CommonParams</a>() );
<a name="l01506"></a>01506     <a class="code" href="classcv_1_1_sift_feature_detector.html">SiftFeatureDetector</a>( <span class="keywordtype">double</span> <a class="code" href="namespacecv.html#abd93e7119f2b85135109ab4b1f4f9eaf" title="applies fixed threshold to the image">threshold</a>, <span class="keywordtype">double</span> edgeThreshold,
<a name="l01507"></a>01507                          <span class="keywordtype">int</span> nOctaves=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a3516d8027be21337d54fa9f342f0de12">SIFT::CommonParams::DEFAULT_NOCTAVES</a>,
<a name="l01508"></a>01508                          <span class="keywordtype">int</span> nOctaveLayers=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#ac5b52d9fb2a3670b2a1e118635997d83">SIFT::CommonParams::DEFAULT_NOCTAVE_LAYERS</a>,
<a name="l01509"></a>01509                          <span class="keywordtype">int</span> firstOctave=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a1c06d5c17c1a277d3ab7331a2e1d6032">SIFT::CommonParams::DEFAULT_FIRST_OCTAVE</a>,
<a name="l01510"></a>01510                          <span class="keywordtype">int</span> angleMode=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#af098535fb60243e12778736e3a962381a1c0fbeaa6583f475bcf560370d779071">SIFT::CommonParams::FIRST_ANGLE</a> );
<a name="l01511"></a>01511     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; fn );
<a name="l01512"></a>01512     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01513"></a>01513 
<a name="l01514"></a>01514 <span class="keyword">protected</span>:
<a name="l01515"></a>01515     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01516"></a>01516 
<a name="l01517"></a><a class="code" href="classcv_1_1_sift_feature_detector.html#a3e0471cc12671dd72340bab4cc1a761e">01517</a>     <a class="code" href="classcv_1_1_s_i_f_t.html" title="SIFT implementation.">SIFT</a> <a class="code" href="classcv_1_1_sift_feature_detector.html#a3e0471cc12671dd72340bab4cc1a761e">sift</a>;
<a name="l01518"></a>01518 };
<a name="l01519"></a>01519 
<a name="l01520"></a><a class="code" href="classcv_1_1_surf_feature_detector.html">01520</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_surf_feature_detector.html">SurfFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01521"></a>01521 {
<a name="l01522"></a>01522 <span class="keyword">public</span>:
<a name="l01523"></a>01523     <a class="code" href="classcv_1_1_surf_feature_detector.html">SurfFeatureDetector</a>( <span class="keywordtype">double</span> hessianThreshold=400., <span class="keywordtype">int</span> octaves=3, <span class="keywordtype">int</span> octaveLayers=4, <span class="keywordtype">bool</span> upright=<span class="keyword">false</span> );
<a name="l01524"></a>01524     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; fn );
<a name="l01525"></a>01525     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l01526"></a>01526 
<a name="l01527"></a>01527 <span class="keyword">protected</span>:
<a name="l01528"></a>01528     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01529"></a>01529 
<a name="l01530"></a><a class="code" href="classcv_1_1_surf_feature_detector.html#a89ab59e1142a0022a7e3a6fbb12b4b28">01530</a>     <a class="code" href="classcv_1_1_s_u_r_f.html" title="SURF implementation.">SURF</a> <a class="code" href="classcv_1_1_surf_feature_detector.html#a89ab59e1142a0022a7e3a6fbb12b4b28">surf</a>;
<a name="l01531"></a>01531 };
<a name="l01532"></a>01532 
<a name="l01536"></a><a class="code" href="classcv_1_1_orb_feature_detector.html">01536</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_orb_feature_detector.html">OrbFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">cv::FeatureDetector</a>
<a name="l01537"></a>01537 {
<a name="l01538"></a>01538 <span class="keyword">public</span>:
<a name="l01543"></a>01543   <a class="code" href="classcv_1_1_orb_feature_detector.html">OrbFeatureDetector</a>(<span class="keywordtype">size_t</span> n_features = 700, <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">ORB::CommonParams</a> <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a> = <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">ORB::CommonParams</a>());
<a name="l01544"></a>01544 
<a name="l01545"></a>01545   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">cv::FileNode</a>&amp;);
<a name="l01546"></a>01546   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">cv::FileStorage</a>&amp;) <span class="keyword">const</span>;
<a name="l01547"></a>01547 
<a name="l01548"></a>01548 <span class="keyword">protected</span>:
<a name="l01549"></a>01549   <span class="keyword">virtual</span> <span class="keywordtype">void</span>
<a name="l01550"></a>01550   detectImpl(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, std::vector&lt;cv::KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a> = <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>()) <span class="keyword">const</span>;
<a name="l01551"></a>01551 <span class="keyword">private</span>:
<a name="l01553"></a>01553   <span class="keyword">mutable</span> <a class="code" href="classcv_1_1_o_r_b.html" title="ORB implementation.">ORB</a> orb_;
<a name="l01555"></a>01555   <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">ORB::CommonParams</a> params_;
<a name="l01557"></a>01557   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_features_;
<a name="l01558"></a>01558 };
<a name="l01559"></a>01559 
<a name="l01560"></a><a class="code" href="classcv_1_1_simple_blob_detector.html">01560</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_simple_blob_detector.html">SimpleBlobDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">cv::FeatureDetector</a>
<a name="l01561"></a>01561 {
<a name="l01562"></a>01562 <span class="keyword">public</span>:
<a name="l01563"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html">01563</a>   <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html">Params</a>
<a name="l01564"></a>01564   {
<a name="l01565"></a>01565       <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html">Params</a>();
<a name="l01566"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a7fdc3403eb1a826bebc661dd9724faf9">01566</a>       <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a7fdc3403eb1a826bebc661dd9724faf9">thresholdStep</a>;
<a name="l01567"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a6e749132c0e8702f3a7289986572bfff">01567</a>       <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a6e749132c0e8702f3a7289986572bfff">minThreshold</a>;
<a name="l01568"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#addd6c9f61049769bcc301005daf21637">01568</a>       <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#addd6c9f61049769bcc301005daf21637">maxThreshold</a>;
<a name="l01569"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a5fdde080e684655ad634a3be4fb52888">01569</a>       <span class="keywordtype">size_t</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a5fdde080e684655ad634a3be4fb52888">minRepeatability</a>;
<a name="l01570"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#afd39dd0969c6549d00afb45beade6f0c">01570</a>       <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#afd39dd0969c6549d00afb45beade6f0c">minDistBetweenBlobs</a>;
<a name="l01571"></a>01571 
<a name="l01572"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a66779ffec01dcc2ab2a6fe570ed7d717">01572</a>       <span class="keywordtype">bool</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a66779ffec01dcc2ab2a6fe570ed7d717">filterByColor</a>;
<a name="l01573"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a25b5d5542f6f92ff0779d14a273ba629">01573</a>       <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a25b5d5542f6f92ff0779d14a273ba629">blobColor</a>;
<a name="l01574"></a>01574 
<a name="l01575"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a890564e4256e98e1ca41724c669735a3">01575</a>       <span class="keywordtype">bool</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a890564e4256e98e1ca41724c669735a3">filterByArea</a>;
<a name="l01576"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a6a6c9c6120a771a5775578d7fdb72f17">01576</a>       <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a6a6c9c6120a771a5775578d7fdb72f17">minArea</a>, maxArea;
<a name="l01577"></a>01577 
<a name="l01578"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a4929ee3a121d95a6af9710fa9ec5fe4c">01578</a>       <span class="keywordtype">bool</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a4929ee3a121d95a6af9710fa9ec5fe4c">filterByCircularity</a>;
<a name="l01579"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#aabf6e03342ba75e3cb7b1ba624f68793">01579</a>       <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#aabf6e03342ba75e3cb7b1ba624f68793">minCircularity</a>, maxCircularity;
<a name="l01580"></a>01580 
<a name="l01581"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#af07129ad934a3d12fed2180458445420">01581</a>       <span class="keywordtype">bool</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#af07129ad934a3d12fed2180458445420">filterByInertia</a>;
<a name="l01582"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a7494ba01e46a71f75325f3142ff5d307">01582</a>       <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a7494ba01e46a71f75325f3142ff5d307">minInertiaRatio</a>, maxInertiaRatio;
<a name="l01583"></a>01583 
<a name="l01584"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#ae54a754ab1f2be433a2457994e4c4ac3">01584</a>       <span class="keywordtype">bool</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#ae54a754ab1f2be433a2457994e4c4ac3">filterByConvexity</a>;
<a name="l01585"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a9f8137228ba6eea83814d21ad2b3f97d">01585</a>       <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html#a9f8137228ba6eea83814d21ad2b3f97d">minConvexity</a>, maxConvexity;
<a name="l01586"></a>01586   };
<a name="l01587"></a>01587 
<a name="l01588"></a>01588   <a class="code" href="classcv_1_1_simple_blob_detector.html">SimpleBlobDetector</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html">SimpleBlobDetector::Params</a> &amp;parameters = <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html">SimpleBlobDetector::Params</a>());
<a name="l01589"></a>01589 
<a name="l01590"></a>01590 <span class="keyword">protected</span>:
<a name="l01591"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_center.html">01591</a>   <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_simple_blob_detector_1_1_center.html">Center</a>
<a name="l01592"></a>01592   {
<a name="l01593"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_center.html#a15ab9880e88902a108de8159519a3fe4">01593</a>       <a class="code" href="classcv_1_1_point__.html">Point2d</a> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_center.html#a15ab9880e88902a108de8159519a3fe4">location</a>;
<a name="l01594"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_center.html#a9fa933baaa6e9a90b8aba3e09666ac75">01594</a>       <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_center.html#a9fa933baaa6e9a90b8aba3e09666ac75">radius</a>;
<a name="l01595"></a><a class="code" href="structcv_1_1_simple_blob_detector_1_1_center.html#ac76402f003aad6bfe1f60069f0d7468d">01595</a>       <span class="keywordtype">double</span> <a class="code" href="structcv_1_1_simple_blob_detector_1_1_center.html#ac76402f003aad6bfe1f60069f0d7468d">confidence</a>;
<a name="l01596"></a>01596   };
<a name="l01597"></a>01597 
<a name="l01598"></a>01598   <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01599"></a>01599   <span class="keyword">virtual</span> <span class="keywordtype">void</span> findBlobs(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp;image, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a> &amp;binaryImage, std::vector&lt;Center&gt; &amp;centers) <span class="keyword">const</span>;
<a name="l01600"></a>01600 
<a name="l01601"></a><a class="code" href="classcv_1_1_simple_blob_detector.html#ad6b6778a29304766462b4b347f9c50b8">01601</a>   <a class="code" href="structcv_1_1_simple_blob_detector_1_1_params.html">Params</a> <a class="code" href="classcv_1_1_simple_blob_detector.html#ad6b6778a29304766462b4b347f9c50b8">params</a>;
<a name="l01602"></a>01602 };
<a name="l01603"></a>01603 
<a name="l01604"></a><a class="code" href="classcv_1_1_dense_feature_detector.html">01604</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_dense_feature_detector.html">DenseFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01605"></a>01605 {
<a name="l01606"></a>01606 <span class="keyword">public</span>:
<a name="l01607"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">01607</a>     <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">Params</a>
<a name="l01608"></a>01608     {
<a name="l01609"></a>01609     <span class="keyword">public</span>:
<a name="l01610"></a>01610         <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">Params</a>( <span class="keywordtype">float</span> initFeatureScale=1.f, <span class="keywordtype">int</span> featureScaleLevels=1, <span class="keywordtype">float</span> featureScaleMul=0.1f,
<a name="l01611"></a>01611                 <span class="keywordtype">int</span> initXyStep=6, <span class="keywordtype">int</span> initImgBound=0, <span class="keywordtype">bool</span> varyXyStepWithScale=<span class="keyword">true</span>, <span class="keywordtype">bool</span> varyImgBoundWithScale=<span class="keyword">false</span> );
<a name="l01612"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a86c39178bf76cf4181c148838086c728">01612</a>         <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a86c39178bf76cf4181c148838086c728">initFeatureScale</a>;
<a name="l01613"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#aad7916a57b92e63b56a7791794035930">01613</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#aad7916a57b92e63b56a7791794035930">featureScaleLevels</a>;
<a name="l01614"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a3ce3b18b93ae982de916fb20d132aa4d">01614</a>         <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a3ce3b18b93ae982de916fb20d132aa4d">featureScaleMul</a>;
<a name="l01615"></a>01615 
<a name="l01616"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a443c1fc19e01285e7c64021d565f4f0c">01616</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a443c1fc19e01285e7c64021d565f4f0c">initXyStep</a>;
<a name="l01617"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a4b4ea2c07202a772dbb76a3d24351bc7">01617</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a4b4ea2c07202a772dbb76a3d24351bc7">initImgBound</a>;
<a name="l01618"></a>01618 
<a name="l01619"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a1a9eba1e28d001b03d9c887e19203916">01619</a>         <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a1a9eba1e28d001b03d9c887e19203916">varyXyStepWithScale</a>;
<a name="l01620"></a><a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a5e6a6056a384cba9babd787b94440d62">01620</a>         <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html#a5e6a6056a384cba9babd787b94440d62">varyImgBoundWithScale</a>;
<a name="l01621"></a>01621     };
<a name="l01622"></a>01622 
<a name="l01623"></a>01623     <a class="code" href="classcv_1_1_dense_feature_detector.html">DenseFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">DenseFeatureDetector::Params</a>&amp; <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a>=<a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">DenseFeatureDetector::Params</a>() );
<a name="l01624"></a>01624     
<a name="l01625"></a>01625     <span class="comment">// TODO implement read/write</span>
<a name="l01626"></a>01626 
<a name="l01627"></a>01627 <span class="keyword">protected</span>:
<a name="l01628"></a>01628     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01629"></a>01629 
<a name="l01630"></a><a class="code" href="classcv_1_1_dense_feature_detector.html#a5f1e55aad7f7cd6d9aef19d38d063563">01630</a>     <a class="code" href="classcv_1_1_dense_feature_detector_1_1_params.html">Params</a> <a class="code" href="classcv_1_1_dense_feature_detector.html#a5f1e55aad7f7cd6d9aef19d38d063563">params</a>;
<a name="l01631"></a>01631 };
<a name="l01632"></a>01632 
<a name="l01633"></a>01633 <span class="comment">/*</span>
<a name="l01634"></a>01634 <span class="comment"> * Adapts a detector to partition the source image into a grid and detect</span>
<a name="l01635"></a>01635 <span class="comment"> * points in each cell.</span>
<a name="l01636"></a>01636 <span class="comment"> */</span>
<a name="l01637"></a><a class="code" href="classcv_1_1_grid_adapted_feature_detector.html">01637</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html">GridAdaptedFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01638"></a>01638 {
<a name="l01639"></a>01639 <span class="keyword">public</span>:
<a name="l01640"></a>01640     <span class="comment">/*</span>
<a name="l01641"></a>01641 <span class="comment">     * detector            Detector that will be adapted.</span>
<a name="l01642"></a>01642 <span class="comment">     * maxTotalKeypoints   Maximum count of keypoints detected on the image. Only the strongest keypoints</span>
<a name="l01643"></a>01643 <span class="comment">     *                      will be keeped.</span>
<a name="l01644"></a>01644 <span class="comment">     * gridRows            Grid rows count.</span>
<a name="l01645"></a>01645 <span class="comment">     * gridCols            Grid column count.</span>
<a name="l01646"></a>01646 <span class="comment">     */</span>
<a name="l01647"></a>01647     <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html">GridAdaptedFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FeatureDetector&gt;</a>&amp; <a class="code" href="objdetect_8hpp.html#a1cb25e3935dfd0a52f5e4f749a176b0c">detector</a>, <span class="keywordtype">int</span> maxTotalKeypoints=1000,
<a name="l01648"></a>01648                                 <span class="keywordtype">int</span> gridRows=4, <span class="keywordtype">int</span> gridCols=4 );
<a name="l01649"></a>01649     
<a name="l01650"></a>01650     <span class="comment">// TODO implement read/write</span>
<a name="l01651"></a>01651     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l01652"></a>01652 
<a name="l01653"></a>01653 <span class="keyword">protected</span>:
<a name="l01654"></a>01654     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01655"></a>01655 
<a name="l01656"></a><a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#a30cafa69c75c744cb216febeb86bd7a1">01656</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FeatureDetector&gt;</a> <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#a30cafa69c75c744cb216febeb86bd7a1">detector</a>;
<a name="l01657"></a><a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#aa586037c5409120481a0f4e63d2678b7">01657</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#aa586037c5409120481a0f4e63d2678b7">maxTotalKeypoints</a>;
<a name="l01658"></a><a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#ac8ecab56cba9ed43779cac09a8ed17b9">01658</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#ac8ecab56cba9ed43779cac09a8ed17b9">gridRows</a>;
<a name="l01659"></a><a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#a0d32b05b162619603619fb040ec9626a">01659</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_grid_adapted_feature_detector.html#a0d32b05b162619603619fb040ec9626a">gridCols</a>;
<a name="l01660"></a>01660 };
<a name="l01661"></a>01661 
<a name="l01662"></a>01662 <span class="comment">/*</span>
<a name="l01663"></a>01663 <span class="comment"> * Adapts a detector to detect points over multiple levels of a Gaussian</span>
<a name="l01664"></a>01664 <span class="comment"> * pyramid. Useful for detectors that are not inherently scaled.</span>
<a name="l01665"></a>01665 <span class="comment"> */</span>
<a name="l01666"></a><a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html">01666</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html">PyramidAdaptedFeatureDetector</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01667"></a>01667 {
<a name="l01668"></a>01668 <span class="keyword">public</span>:
<a name="l01669"></a>01669     <span class="comment">// maxLevel - The 0-based index of the last pyramid layer</span>
<a name="l01670"></a>01670     <a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html">PyramidAdaptedFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FeatureDetector&gt;</a>&amp; <a class="code" href="objdetect_8hpp.html#a1cb25e3935dfd0a52f5e4f749a176b0c">detector</a>, <span class="keywordtype">int</span> maxLevel=2 );
<a name="l01671"></a>01671     
<a name="l01672"></a>01672     <span class="comment">// TODO implement read/write</span>
<a name="l01673"></a>01673     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l01674"></a>01674 
<a name="l01675"></a>01675 <span class="keyword">protected</span>:
<a name="l01676"></a>01676     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01677"></a>01677 
<a name="l01678"></a><a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html#a32441105c4f15bb94f6f5db452aa74f6">01678</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FeatureDetector&gt;</a> <a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html#a32441105c4f15bb94f6f5db452aa74f6">detector</a>;
<a name="l01679"></a><a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html#a5d1cd946c530306014cca6c40ec7c0cb">01679</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_pyramid_adapted_feature_detector.html#a5d1cd946c530306014cca6c40ec7c0cb">maxLevel</a>;
<a name="l01680"></a>01680 };
<a name="l01681"></a>01681 
<a name="l01685"></a><a class="code" href="classcv_1_1_adjuster_adapter.html">01685</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_adjuster_adapter.html" title="A feature detector parameter adjuster, this is used by the DynamicAdaptedFeatureDetector and is a wra...">AdjusterAdapter</a>: <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01686"></a>01686 {
<a name="l01687"></a>01687 <span class="keyword">public</span>:   
<a name="l01690"></a><a class="code" href="classcv_1_1_adjuster_adapter.html#a8c88f42045cd23746062c2789e2e703c">01690</a>     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_adjuster_adapter.html#a8c88f42045cd23746062c2789e2e703c">~AdjusterAdapter</a>() {}
<a name="l01695"></a>01695     <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooFew(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#ab95fdcad3fb0246321e2af231d24d5a9" title="computes per-element minimum of two arrays (dst = min(src1, src2))">min</a>, <span class="keywordtype">int</span> n_detected) = 0;
<a name="l01700"></a>01700     <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooMany(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a22a8f8afb6090a66a771348b658dcebd" title="computes per-element maximum of two arrays (dst = max(src1, src2))">max</a>, <span class="keywordtype">int</span> n_detected) = 0;
<a name="l01704"></a>01704     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> good() <span class="keyword">const</span> = 0;
<a name="l01705"></a>01705 
<a name="l01706"></a>01706     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;AdjusterAdapter&gt;</a> clone() <span class="keyword">const</span> = 0;
<a name="l01707"></a>01707 
<a name="l01708"></a>01708     <span class="keyword">static</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;AdjusterAdapter&gt;</a> create( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; detectorType );
<a name="l01709"></a>01709 };
<a name="l01722"></a><a class="code" href="classcv_1_1_dynamic_adapted_feature_detector.html">01722</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_dynamic_adapted_feature_detector.html" title="an adaptively adjusting detector that iteratively detects until the desired number of features are de...">DynamicAdaptedFeatureDetector</a>: <span class="keyword">public</span> <a class="code" href="classcv_1_1_feature_detector.html">FeatureDetector</a>
<a name="l01723"></a>01723 {
<a name="l01724"></a>01724 <span class="keyword">public</span>:
<a name="l01725"></a>01725 
<a name="l01732"></a>01732     <a class="code" href="classcv_1_1_dynamic_adapted_feature_detector.html" title="an adaptively adjusting detector that iteratively detects until the desired number of features are de...">DynamicAdaptedFeatureDetector</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;AdjusterAdapter&gt;</a>&amp; adjaster, <span class="keywordtype">int</span> min_features=400, <span class="keywordtype">int</span> max_features=500, <span class="keywordtype">int</span> <a class="code" href="calib3d_8hpp.html#a4ab0ccb69523029b3f46895a4d7ea1d5">max_iters</a>=5 );
<a name="l01733"></a>01733 
<a name="l01734"></a>01734     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l01735"></a>01735 
<a name="l01736"></a>01736 <span class="keyword">protected</span>:
<a name="l01737"></a>01737     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01738"></a>01738 
<a name="l01739"></a>01739 <span class="keyword">private</span>:
<a name="l01740"></a>01740     <a class="code" href="classcv_1_1_dynamic_adapted_feature_detector.html" title="an adaptively adjusting detector that iteratively detects until the desired number of features are de...">DynamicAdaptedFeatureDetector</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classcv_1_1_dynamic_adapted_feature_detector.html" title="an adaptively adjusting detector that iteratively detects until the desired number of features are de...">DynamicAdaptedFeatureDetector</a>&amp;);
<a name="l01741"></a>01741     <a class="code" href="classcv_1_1_dynamic_adapted_feature_detector.html" title="an adaptively adjusting detector that iteratively detects until the desired number of features are de...">DynamicAdaptedFeatureDetector</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_dynamic_adapted_feature_detector.html" title="an adaptively adjusting detector that iteratively detects until the desired number of features are de...">DynamicAdaptedFeatureDetector</a>&amp;);
<a name="l01742"></a>01742 
<a name="l01743"></a>01743     <span class="keywordtype">int</span> escape_iters_;
<a name="l01744"></a>01744     <span class="keywordtype">int</span> min_features_, max_features_;
<a name="l01745"></a>01745     <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;AdjusterAdapter&gt;</a> adjuster_;
<a name="l01746"></a>01746 };
<a name="l01747"></a>01747 
<a name="l01751"></a><a class="code" href="classcv_1_1_fast_adjuster.html">01751</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_fast_adjuster.html" title="an adjust for the FAST detector. This will basically decrement or increment the threshold by 1...">FastAdjuster</a>: <span class="keyword">public</span> <a class="code" href="classcv_1_1_adjuster_adapter.html" title="A feature detector parameter adjuster, this is used by the DynamicAdaptedFeatureDetector and is a wra...">AdjusterAdapter</a>
<a name="l01752"></a>01752 {
<a name="l01753"></a>01753 <span class="keyword">public</span>:
<a name="l01757"></a>01757     <a class="code" href="classcv_1_1_fast_adjuster.html" title="an adjust for the FAST detector. This will basically decrement or increment the threshold by 1...">FastAdjuster</a>(<span class="keywordtype">int</span> init_thresh=20, <span class="keywordtype">bool</span> nonmax=<span class="keyword">true</span>, <span class="keywordtype">int</span> min_thresh=1, <span class="keywordtype">int</span> max_thresh=200);
<a name="l01758"></a>01758 
<a name="l01759"></a>01759     <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooFew(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#ab95fdcad3fb0246321e2af231d24d5a9" title="computes per-element minimum of two arrays (dst = min(src1, src2))">min</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01760"></a>01760     <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooMany(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a22a8f8afb6090a66a771348b658dcebd" title="computes per-element maximum of two arrays (dst = max(src1, src2))">max</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01761"></a>01761     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> good() <span class="keyword">const</span>;
<a name="l01762"></a>01762 
<a name="l01763"></a>01763     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;AdjusterAdapter&gt;</a> clone() <span class="keyword">const</span>;
<a name="l01764"></a>01764 
<a name="l01765"></a>01765 <span class="keyword">protected</span>:
<a name="l01766"></a>01766     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01767"></a>01767 
<a name="l01768"></a><a class="code" href="classcv_1_1_fast_adjuster.html#aea9674010803f5b60d12aabd4257a159">01768</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fast_adjuster.html#aea9674010803f5b60d12aabd4257a159">thresh_</a>;
<a name="l01769"></a><a class="code" href="classcv_1_1_fast_adjuster.html#ae57d82468fc8b29e27ad98f75ecda024">01769</a>     <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_fast_adjuster.html#ae57d82468fc8b29e27ad98f75ecda024">nonmax_</a>;
<a name="l01770"></a><a class="code" href="classcv_1_1_fast_adjuster.html#af84da05c61c88a8fa91efffa88b15b72">01770</a>     <span class="keywordtype">int</span> init_thresh_, <a class="code" href="classcv_1_1_fast_adjuster.html#af84da05c61c88a8fa91efffa88b15b72">min_thresh_</a>, max_thresh_;
<a name="l01771"></a>01771 };
<a name="l01772"></a>01772 
<a name="l01773"></a>01773 
<a name="l01777"></a><a class="code" href="classcv_1_1_star_adjuster.html">01777</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_star_adjuster.html">StarAdjuster</a>: <span class="keyword">public</span> <a class="code" href="classcv_1_1_adjuster_adapter.html" title="A feature detector parameter adjuster, this is used by the DynamicAdaptedFeatureDetector and is a wra...">AdjusterAdapter</a>
<a name="l01778"></a>01778 {
<a name="l01779"></a>01779 <span class="keyword">public</span>:
<a name="l01780"></a>01780     <a class="code" href="classcv_1_1_star_adjuster.html">StarAdjuster</a>(<span class="keywordtype">double</span> initial_thresh=30.0, <span class="keywordtype">double</span> min_thresh=2., <span class="keywordtype">double</span> max_thresh=200.);
<a name="l01781"></a>01781 
<a name="l01782"></a>01782     <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooFew(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#ab95fdcad3fb0246321e2af231d24d5a9" title="computes per-element minimum of two arrays (dst = min(src1, src2))">min</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01783"></a>01783     <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooMany(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a22a8f8afb6090a66a771348b658dcebd" title="computes per-element maximum of two arrays (dst = max(src1, src2))">max</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01784"></a>01784     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> good() <span class="keyword">const</span>;
<a name="l01785"></a>01785 
<a name="l01786"></a>01786     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;AdjusterAdapter&gt;</a> clone() <span class="keyword">const</span>;
<a name="l01787"></a>01787 
<a name="l01788"></a>01788 <span class="keyword">protected</span>:
<a name="l01789"></a>01789     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01790"></a>01790 
<a name="l01791"></a><a class="code" href="classcv_1_1_star_adjuster.html#a5d52f000854a09f784ff895a9ca7a891">01791</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_star_adjuster.html#a5d52f000854a09f784ff895a9ca7a891">thresh_</a>, init_thresh_, min_thresh_, max_thresh_;
<a name="l01792"></a><a class="code" href="classcv_1_1_star_adjuster.html#a81b9686502fdf8ffe9ac9a95282c663b">01792</a>     <a class="code" href="struct_cv_star_detector_params.html">CvStarDetectorParams</a> <a class="code" href="classcv_1_1_star_adjuster.html#a81b9686502fdf8ffe9ac9a95282c663b">params_</a>; <span class="comment">//todo use these instead of thresh_</span>
<a name="l01793"></a>01793 };
<a name="l01794"></a>01794 
<a name="l01795"></a><a class="code" href="classcv_1_1_surf_adjuster.html">01795</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_surf_adjuster.html">SurfAdjuster</a>: <span class="keyword">public</span> <a class="code" href="classcv_1_1_adjuster_adapter.html" title="A feature detector parameter adjuster, this is used by the DynamicAdaptedFeatureDetector and is a wra...">AdjusterAdapter</a>
<a name="l01796"></a>01796 {
<a name="l01797"></a>01797 <span class="keyword">public</span>:
<a name="l01798"></a>01798     <a class="code" href="classcv_1_1_surf_adjuster.html">SurfAdjuster</a>( <span class="keywordtype">double</span> initial_thresh=400.f, <span class="keywordtype">double</span> min_thresh=2, <span class="keywordtype">double</span> max_thresh=1000 );
<a name="l01799"></a>01799 
<a name="l01800"></a>01800     <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooFew(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#ab95fdcad3fb0246321e2af231d24d5a9" title="computes per-element minimum of two arrays (dst = min(src1, src2))">min</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01801"></a>01801     <span class="keyword">virtual</span> <span class="keywordtype">void</span> tooMany(<span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a22a8f8afb6090a66a771348b658dcebd" title="computes per-element maximum of two arrays (dst = max(src1, src2))">max</a>, <span class="keywordtype">int</span> n_detected);
<a name="l01802"></a>01802     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> good() <span class="keyword">const</span>;
<a name="l01803"></a>01803 
<a name="l01804"></a>01804     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;AdjusterAdapter&gt;</a> clone() <span class="keyword">const</span>;
<a name="l01805"></a>01805 
<a name="l01806"></a>01806 <span class="keyword">protected</span>:
<a name="l01807"></a>01807     <span class="keyword">virtual</span> <span class="keywordtype">void</span> detectImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l01808"></a>01808 
<a name="l01809"></a><a class="code" href="classcv_1_1_surf_adjuster.html#a638296c960483f151853fb39045c2d5a">01809</a>     <span class="keywordtype">double</span> <a class="code" href="classcv_1_1_surf_adjuster.html#a638296c960483f151853fb39045c2d5a">thresh_</a>, init_thresh_, min_thresh_, max_thresh_;
<a name="l01810"></a>01810 };
<a name="l01811"></a>01811 
<a name="l01812"></a>01812 CV_EXPORTS <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> <a class="code" href="namespacecv.html#a0a9f2d8e059660ef35bd79b3f7a9999b">windowedMatchingMask</a>( <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints1, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints2,
<a name="l01813"></a>01813                                      <span class="keywordtype">float</span> maxDeltaX, <span class="keywordtype">float</span> maxDeltaY );
<a name="l01814"></a>01814 
<a name="l01815"></a>01815 <span class="comment">/****************************************************************************************\</span>
<a name="l01816"></a>01816 <span class="comment">*                                 DescriptorExtractor                                    *</span>
<a name="l01817"></a>01817 <span class="comment">\****************************************************************************************/</span>
<a name="l01818"></a>01818 
<a name="l01819"></a>01819 <span class="comment">/*</span>
<a name="l01820"></a>01820 <span class="comment"> * Abstract base class for computing descriptors for image keypoints.</span>
<a name="l01821"></a>01821 <span class="comment"> *</span>
<a name="l01822"></a>01822 <span class="comment"> * In this interface we assume a keypoint descriptor can be represented as a</span>
<a name="l01823"></a>01823 <span class="comment"> * dense, fixed-dimensional vector of some basic type. Most descriptors used</span>
<a name="l01824"></a>01824 <span class="comment"> * in practice follow this pattern, as it makes it very easy to compute</span>
<a name="l01825"></a>01825 <span class="comment"> * distances between descriptors. Therefore we represent a collection of</span>
<a name="l01826"></a>01826 <span class="comment"> * descriptors as a cv::Mat, where each row is one keypoint descriptor.</span>
<a name="l01827"></a>01827 <span class="comment"> */</span>
<a name="l01828"></a><a class="code" href="classcv_1_1_descriptor_extractor.html">01828</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l01829"></a>01829 {
<a name="l01830"></a>01830 <span class="keyword">public</span>:
<a name="l01831"></a>01831     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>();
<a name="l01832"></a>01832 
<a name="l01833"></a>01833     <span class="comment">/*</span>
<a name="l01834"></a>01834 <span class="comment">     * Compute the descriptors for a set of keypoints in an image.</span>
<a name="l01835"></a>01835 <span class="comment">     * image        The image.</span>
<a name="l01836"></a>01836 <span class="comment">     * keypoints    The input keypoints. Keypoints for which a descriptor cannot be computed are removed.</span>
<a name="l01837"></a>01837 <span class="comment">     * descriptors  Copmputed descriptors. Row i is the descriptor for keypoint i.</span>
<a name="l01838"></a>01838 <span class="comment">     */</span>
<a name="l01839"></a>01839     <span class="keywordtype">void</span> compute( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a> ) <span class="keyword">const</span>;
<a name="l01840"></a>01840 
<a name="l01841"></a>01841     <span class="comment">/*</span>
<a name="l01842"></a>01842 <span class="comment">     * Compute the descriptors for a keypoints collection detected in image collection.</span>
<a name="l01843"></a>01843 <span class="comment">     * images       Image collection.</span>
<a name="l01844"></a>01844 <span class="comment">     * keypoints    Input keypoints collection. keypoints[i] is keypoints detected in images[i].</span>
<a name="l01845"></a>01845 <span class="comment">     *              Keypoints for which a descriptor cannot be computed are removed.</span>
<a name="l01846"></a>01846 <span class="comment">     * descriptors  Descriptor collection. descriptors[i] are descriptors computed for set keypoints[i].</span>
<a name="l01847"></a>01847 <span class="comment">     */</span>
<a name="l01848"></a>01848     <span class="keywordtype">void</span> compute( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; images, vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; keypoints, vector&lt;Mat&gt;&amp; descriptors ) <span class="keyword">const</span>;
<a name="l01849"></a>01849 
<a name="l01850"></a>01850     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; );
<a name="l01851"></a>01851     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; ) <span class="keyword">const</span>;
<a name="l01852"></a>01852 
<a name="l01853"></a>01853     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span> = 0;
<a name="l01854"></a>01854     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span> = 0;
<a name="l01855"></a>01855 
<a name="l01856"></a>01856     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l01857"></a>01857 
<a name="l01858"></a>01858     <span class="keyword">static</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a> create( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; descriptorExtractorType );
<a name="l01859"></a>01859 
<a name="l01860"></a>01860 <span class="keyword">protected</span>:
<a name="l01861"></a>01861     <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; descriptors ) <span class="keyword">const</span> = 0;
<a name="l01862"></a>01862 
<a name="l01863"></a>01863     <span class="comment">/*</span>
<a name="l01864"></a>01864 <span class="comment">     * Remove keypoints within borderPixels of an image edge.</span>
<a name="l01865"></a>01865 <span class="comment">     */</span>
<a name="l01866"></a>01866     <span class="keyword">static</span> <span class="keywordtype">void</span> removeBorderKeypoints( vector&lt;KeyPoint&gt;&amp; keypoints,
<a name="l01867"></a>01867                                        <a class="code" href="classcv_1_1_size__.html" title="The 2D size class.">Size</a> <a class="code" href="legacy_8hpp.html#a190127ac383c0871da9bddc06739c5d6">imageSize</a>, <span class="keywordtype">int</span> borderSize );
<a name="l01868"></a>01868 };
<a name="l01869"></a>01869 
<a name="l01870"></a>01870 <span class="comment">/*</span>
<a name="l01871"></a>01871 <span class="comment"> * SiftDescriptorExtractor</span>
<a name="l01872"></a>01872 <span class="comment"> */</span>
<a name="l01873"></a><a class="code" href="classcv_1_1_sift_descriptor_extractor.html">01873</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_sift_descriptor_extractor.html">SiftDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l01874"></a>01874 {
<a name="l01875"></a>01875 <span class="keyword">public</span>:
<a name="l01876"></a>01876     <a class="code" href="classcv_1_1_sift_descriptor_extractor.html">SiftDescriptorExtractor</a>( <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">SIFT::DescriptorParams</a>&amp; descriptorParams=<a class="code" href="structcv_1_1_s_i_f_t_1_1_descriptor_params.html">SIFT::DescriptorParams</a>(),
<a name="l01877"></a>01877                              <span class="keyword">const</span> <a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">SIFT::CommonParams</a>&amp; commonParams=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html">SIFT::CommonParams</a>() );
<a name="l01878"></a>01878     <a class="code" href="classcv_1_1_sift_descriptor_extractor.html">SiftDescriptorExtractor</a>( <span class="keywordtype">double</span> magnification, <span class="keywordtype">bool</span> isNormalize=<span class="keyword">true</span>, <span class="keywordtype">bool</span> recalculateAngles=<span class="keyword">true</span>,
<a name="l01879"></a>01879                              <span class="keywordtype">int</span> nOctaves=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a3516d8027be21337d54fa9f342f0de12">SIFT::CommonParams::DEFAULT_NOCTAVES</a>,
<a name="l01880"></a>01880                              <span class="keywordtype">int</span> nOctaveLayers=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#ac5b52d9fb2a3670b2a1e118635997d83">SIFT::CommonParams::DEFAULT_NOCTAVE_LAYERS</a>,
<a name="l01881"></a>01881                              <span class="keywordtype">int</span> firstOctave=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#a1c06d5c17c1a277d3ab7331a2e1d6032">SIFT::CommonParams::DEFAULT_FIRST_OCTAVE</a>,
<a name="l01882"></a>01882                              <span class="keywordtype">int</span> angleMode=<a class="code" href="structcv_1_1_s_i_f_t_1_1_common_params.html#af098535fb60243e12778736e3a962381a1c0fbeaa6583f475bcf560370d779071">SIFT::CommonParams::FIRST_ANGLE</a> );
<a name="l01883"></a>01883 
<a name="l01884"></a>01884     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a> &amp;fn );
<a name="l01885"></a>01885     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a> &amp;fs ) <span class="keyword">const</span>;
<a name="l01886"></a>01886 
<a name="l01887"></a>01887     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l01888"></a>01888     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l01889"></a>01889 
<a name="l01890"></a>01890 <span class="keyword">protected</span>:
<a name="l01891"></a>01891     <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a> ) <span class="keyword">const</span>;
<a name="l01892"></a>01892     
<a name="l01893"></a><a class="code" href="classcv_1_1_sift_descriptor_extractor.html#a6cb2456998b6d08cc412901c1509e5bb">01893</a>     <a class="code" href="classcv_1_1_s_i_f_t.html" title="SIFT implementation.">SIFT</a> <a class="code" href="classcv_1_1_sift_descriptor_extractor.html#a6cb2456998b6d08cc412901c1509e5bb">sift</a>;
<a name="l01894"></a>01894 };
<a name="l01895"></a>01895 
<a name="l01896"></a>01896 <span class="comment">/*</span>
<a name="l01897"></a>01897 <span class="comment"> * SurfDescriptorExtractor</span>
<a name="l01898"></a>01898 <span class="comment"> */</span>
<a name="l01899"></a><a class="code" href="classcv_1_1_surf_descriptor_extractor.html">01899</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_surf_descriptor_extractor.html">SurfDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l01900"></a>01900 {
<a name="l01901"></a>01901 <span class="keyword">public</span>:
<a name="l01902"></a>01902     <a class="code" href="classcv_1_1_surf_descriptor_extractor.html">SurfDescriptorExtractor</a>( <span class="keywordtype">int</span> nOctaves=4, <span class="keywordtype">int</span> nOctaveLayers=2, <span class="keywordtype">bool</span> extended=<span class="keyword">false</span>, <span class="keywordtype">bool</span> upright=<span class="keyword">false</span> );
<a name="l01903"></a>01903 
<a name="l01904"></a>01904     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a> &amp;fn );
<a name="l01905"></a>01905     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a> &amp;fs ) <span class="keyword">const</span>;
<a name="l01906"></a>01906 
<a name="l01907"></a>01907     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l01908"></a>01908     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l01909"></a>01909 
<a name="l01910"></a>01910 <span class="keyword">protected</span>:
<a name="l01911"></a>01911     <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a> ) <span class="keyword">const</span>;
<a name="l01912"></a>01912 
<a name="l01913"></a><a class="code" href="classcv_1_1_surf_descriptor_extractor.html#a064c1e780fbfbf0d407ffc74aee42944">01913</a>     <a class="code" href="classcv_1_1_s_u_r_f.html" title="SURF implementation.">SURF</a> <a class="code" href="classcv_1_1_surf_descriptor_extractor.html#a064c1e780fbfbf0d407ffc74aee42944">surf</a>;
<a name="l01914"></a>01914 };
<a name="l01915"></a>01915 
<a name="l01922"></a><a class="code" href="classcv_1_1_orb_descriptor_extractor.html">01922</a> <span class="keyword">class </span><a class="code" href="classcv_1_1_orb_descriptor_extractor.html">OrbDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">cv::DescriptorExtractor</a>
<a name="l01923"></a>01923 {
<a name="l01924"></a>01924 <span class="keyword">public</span>:
<a name="l01928"></a>01928   <a class="code" href="classcv_1_1_orb_descriptor_extractor.html">OrbDescriptorExtractor</a>(<a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">ORB::CommonParams</a> <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a> = <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">ORB::CommonParams</a>());
<a name="l01929"></a>01929 
<a name="l01931"></a><a class="code" href="classcv_1_1_orb_descriptor_extractor.html#a2c5d8f62d9e4f41c656b60240006292c">01931</a>   ~<a class="code" href="classcv_1_1_orb_descriptor_extractor.html">OrbDescriptorExtractor</a>()
<a name="l01932"></a>01932   {
<a name="l01933"></a>01933   }
<a name="l01934"></a>01934 
<a name="l01935"></a>01935   <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l01936"></a>01936   <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l01937"></a>01937 
<a name="l01938"></a>01938   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>(<span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">cv::FileNode</a>&amp;);
<a name="l01939"></a>01939   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>(<a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">cv::FileStorage</a>&amp;) <span class="keyword">const</span>;
<a name="l01940"></a>01940 
<a name="l01941"></a>01941 <span class="keyword">protected</span>:
<a name="l01942"></a>01942   <span class="keywordtype">void</span> computeImpl(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, std::vector&lt;cv::KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a>) <span class="keyword">const</span>;
<a name="l01943"></a>01943 <span class="keyword">private</span>:
<a name="l01945"></a>01945   <span class="keyword">mutable</span> <a class="code" href="classcv_1_1_o_r_b.html" title="ORB implementation.">ORB</a> orb_;
<a name="l01947"></a>01947   <a class="code" href="structcv_1_1_o_r_b_1_1_common_params.html">ORB::CommonParams</a> params_;
<a name="l01948"></a>01948 };
<a name="l01949"></a>01949 
<a name="l01950"></a>01950 <span class="comment">/*</span>
<a name="l01951"></a>01951 <span class="comment"> * CalonderDescriptorExtractor</span>
<a name="l01952"></a>01952 <span class="comment"> */</span>
<a name="l01953"></a>01953 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01954"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">01954</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">CalonderDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l01955"></a>01955 {
<a name="l01956"></a>01956 <span class="keyword">public</span>:
<a name="l01957"></a>01957     <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">CalonderDescriptorExtractor</a>( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; classifierFile );
<a name="l01958"></a>01958 
<a name="l01959"></a>01959     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a> &amp;fn );
<a name="l01960"></a>01960     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a> &amp;fs ) <span class="keyword">const</span>;
<a name="l01961"></a>01961 
<a name="l01962"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#ab5a95030baf12190630fea5853898188">01962</a>     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#ab5a95030baf12190630fea5853898188">descriptorSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> classifier_.classes(); }
<a name="l01963"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#abef1e377e15c604de3027281957254d4">01963</a>     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#abef1e377e15c604de3027281957254d4">descriptorType</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classcv_1_1_data_type.html" title="Informative template class for OpenCV &quot;scalars&quot;.">DataType&lt;T&gt;::type</a>; }
<a name="l01964"></a>01964 
<a name="l01965"></a>01965     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l01966"></a>01966 
<a name="l01967"></a>01967 <span class="keyword">protected</span>:
<a name="l01968"></a>01968     <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a> ) <span class="keyword">const</span>;
<a name="l01969"></a>01969 
<a name="l01970"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a2ebb39dcbe82e7a5eb2f85e2c7300c55">01970</a>     <a class="code" href="classcv_1_1_r_tree_classifier.html">RTreeClassifier</a> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a2ebb39dcbe82e7a5eb2f85e2c7300c55">classifier_</a>;
<a name="l01971"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a2fe16a49d8fcfc8ee063d64d354204ee">01971</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> BORDER_SIZE = 16;
<a name="l01972"></a>01972 };
<a name="l01973"></a>01973 
<a name="l01974"></a>01974 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01975"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a69f673cd75d355182fe6d65a167cc166">01975</a> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">CalonderDescriptorExtractor&lt;T&gt;::CalonderDescriptorExtractor</a>(<span class="keyword">const</span> std::string&amp; classifier_file)
<a name="l01976"></a>01976 {
<a name="l01977"></a>01977     classifier_.<a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a68ee8ab88dabeeca169137848ca9f25b">read</a>( classifier_file.c_str() );
<a name="l01978"></a>01978 }
<a name="l01979"></a>01979 
<a name="l01980"></a>01980 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01981"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a5cc1232191e42ab3cf020a365a5c3857">01981</a> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">CalonderDescriptorExtractor&lt;T&gt;::computeImpl</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>,
<a name="l01982"></a>01982                                               std::vector&lt;cv::KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>,
<a name="l01983"></a>01983                                               <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">cv::Mat</a>&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a>)<span class="keyword"> const</span>
<a name="l01984"></a>01984 <span class="keyword"></span>{
<a name="l01985"></a>01985     <span class="comment">// Cannot compute descriptors for keypoints on the image border.</span>
<a name="l01986"></a>01986     <a class="code" href="classcv_1_1_key_points_filter.html#ae6a4e8adcd786b05c4cc904a1ffd4db8">KeyPointsFilter::runByImageBorder</a>(keypoints, image.<a class="code" href="classcv_1_1_mat.html#a5500ed91b9300d78a62528c4f7bf1869">size</a>(), BORDER_SIZE);
<a name="l01987"></a>01987 
<a name="l01989"></a>01989     descriptors.<a class="code" href="classcv_1_1_mat.html#aef6575da9c9d0286c4687d6ddbb00788" title="allocates new matrix data unless the matrix already has specified size and type.">create</a>(keypoints.size(), classifier_.classes(), <a class="code" href="classcv_1_1_data_type.html" title="Informative template class for OpenCV &quot;scalars&quot;.">cv::DataType&lt;T&gt;::type</a>);
<a name="l01990"></a>01990 
<a name="l01991"></a>01991     <span class="keywordtype">int</span> patchSize = <a class="code" href="classcv_1_1_randomized_tree.html#ad3a9c3171db3e1e0c95bdcce58335825">RandomizedTree::PATCH_SIZE</a>;
<a name="l01992"></a>01992     <span class="keywordtype">int</span> <a class="code" href="imgproc__c_8h.html#aecaf8d39ccebc1daaa89ee5f071a9090">offset</a> = patchSize / 2;
<a name="l01993"></a>01993     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; keypoints.size(); ++i)
<a name="l01994"></a>01994     {
<a name="l01995"></a>01995         <a class="code" href="classcv_1_1_point__.html">cv::Point2f</a> pt = keypoints[i].pt;
<a name="l01996"></a>01996         <a class="code" href="struct___ipl_image.html">IplImage</a> ipl = <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>( <a class="code" href="namespacecv.html#a954f5c2ab7c3f0f5d4eed444cdabf038">Rect</a>((<span class="keywordtype">int</span>)(pt.<a class="code" href="classcv_1_1_point__.html#a4c96fa7bdbfe390be5ed356edb274ff3">x</a> - offset), (<span class="keywordtype">int</span>)(pt.<a class="code" href="classcv_1_1_point__.html#a157337197338ff199e5df1a393022f15">y</a> - offset), patchSize, patchSize) );
<a name="l01997"></a>01997         classifier_.getSignature( &amp;ipl, descriptors.<a class="code" href="classcv_1_1_mat.html#a04e52e996208b33202e66e29db2843ee" title="returns pointer to i0-th submatrix along the dimension #0">ptr</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(i));
<a name="l01998"></a>01998     }
<a name="l01999"></a>01999 }
<a name="l02000"></a>02000 
<a name="l02001"></a>02001 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l02002"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a68ee8ab88dabeeca169137848ca9f25b">02002</a> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">CalonderDescriptorExtractor&lt;T&gt;::read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; )
<a name="l02003"></a>02003 {}
<a name="l02004"></a>02004 
<a name="l02005"></a>02005 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l02006"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#acaf9d180b75860622f5348ac17014c87">02006</a> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">CalonderDescriptorExtractor&lt;T&gt;::write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; )<span class="keyword"> const</span>
<a name="l02007"></a>02007 <span class="keyword"></span>{}
<a name="l02008"></a>02008 
<a name="l02009"></a>02009 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l02010"></a><a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a5acaffafd1445bfb87bbf4589fe6a614">02010</a> <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_calonder_descriptor_extractor.html">CalonderDescriptorExtractor&lt;T&gt;::empty</a>()<span class="keyword"> const</span>
<a name="l02011"></a>02011 <span class="keyword"></span>{
<a name="l02012"></a>02012     <span class="keywordflow">return</span> classifier_.trees_.<a class="code" href="classcv_1_1_calonder_descriptor_extractor.html#a5acaffafd1445bfb87bbf4589fe6a614">empty</a>();
<a name="l02013"></a>02013 }
<a name="l02014"></a>02014 
<a name="l02015"></a>02015 <span class="comment">/*</span>
<a name="l02016"></a>02016 <span class="comment"> * OpponentColorDescriptorExtractor</span>
<a name="l02017"></a>02017 <span class="comment"> *</span>
<a name="l02018"></a>02018 <span class="comment"> * Adapts a descriptor extractor to compute descripors in Opponent Color Space</span>
<a name="l02019"></a>02019 <span class="comment"> * (refer to van de Sande et al., CGIV 2008 &quot;Color Descriptors for Object Category Recognition&quot;).</span>
<a name="l02020"></a>02020 <span class="comment"> * Input RGB image is transformed in Opponent Color Space. Then unadapted descriptor extractor</span>
<a name="l02021"></a>02021 <span class="comment"> * (set in constructor) computes descriptors on each of the three channel and concatenate</span>
<a name="l02022"></a>02022 <span class="comment"> * them into a single color descriptor.</span>
<a name="l02023"></a>02023 <span class="comment"> */</span>
<a name="l02024"></a><a class="code" href="classcv_1_1_opponent_color_descriptor_extractor.html">02024</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_opponent_color_descriptor_extractor.html">OpponentColorDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l02025"></a>02025 {
<a name="l02026"></a>02026 <span class="keyword">public</span>:
<a name="l02027"></a>02027     <a class="code" href="classcv_1_1_opponent_color_descriptor_extractor.html">OpponentColorDescriptorExtractor</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a>&amp; descriptorExtractor );
<a name="l02028"></a>02028 
<a name="l02029"></a>02029     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; );
<a name="l02030"></a>02030     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; ) <span class="keyword">const</span>;
<a name="l02031"></a>02031 
<a name="l02032"></a>02032     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l02033"></a>02033     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l02034"></a>02034 
<a name="l02035"></a>02035     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l02036"></a>02036 
<a name="l02037"></a>02037 <span class="keyword">protected</span>:
<a name="l02038"></a>02038     <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a> ) <span class="keyword">const</span>;
<a name="l02039"></a>02039 
<a name="l02040"></a><a class="code" href="classcv_1_1_opponent_color_descriptor_extractor.html#a0f6b54b3ff30cb30421f893349a7a7fd">02040</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a> <a class="code" href="classcv_1_1_opponent_color_descriptor_extractor.html#a0f6b54b3ff30cb30421f893349a7a7fd">descriptorExtractor</a>;
<a name="l02041"></a>02041 };
<a name="l02042"></a>02042 
<a name="l02043"></a>02043 <span class="comment">/*</span>
<a name="l02044"></a>02044 <span class="comment"> * BRIEF Descriptor</span>
<a name="l02045"></a>02045 <span class="comment"> */</span>
<a name="l02046"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html">02046</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_brief_descriptor_extractor.html">BriefDescriptorExtractor</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_extractor.html">DescriptorExtractor</a>
<a name="l02047"></a>02047 {
<a name="l02048"></a>02048 <span class="keyword">public</span>:
<a name="l02049"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html#ab7f40648efa68f2149537234fa06e259">02049</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> PATCH_SIZE = 48;
<a name="l02050"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html#ac7e2cbba76a5629cbc679e30d8bce066">02050</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> KERNEL_SIZE = 9;
<a name="l02051"></a>02051 
<a name="l02052"></a>02052     <span class="comment">// bytes is a length of descriptor in bytes. It can be equal 16, 32 or 64 bytes.</span>
<a name="l02053"></a>02053     <a class="code" href="classcv_1_1_brief_descriptor_extractor.html">BriefDescriptorExtractor</a>( <span class="keywordtype">int</span> bytes = 32 );
<a name="l02054"></a>02054 
<a name="l02055"></a>02055     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l02056"></a>02056     <span class="keyword">virtual</span> <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l02057"></a>02057 
<a name="l02059"></a>02059 
<a name="l02060"></a>02060 <span class="keyword">protected</span>:
<a name="l02061"></a>02061     <span class="keyword">virtual</span> <span class="keywordtype">void</span> computeImpl(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, std::vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a>) <span class="keyword">const</span>;
<a name="l02062"></a>02062 
<a name="l02063"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html#afd69be5c687b86ed11e3c8de42e6c359">02063</a>     <span class="keyword">typedef</span> <a class="code" href="highgui__c_8h.html#ad1f9461adaad33556b3a01c7f2c6ceab">void</a>(*PixelTestFn)(<span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp;, <span class="keyword">const</span> std::vector&lt;KeyPoint&gt;&amp;, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp;);
<a name="l02064"></a>02064 
<a name="l02065"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html#a396e2541b0053129079754ec8141742a">02065</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_brief_descriptor_extractor.html#a396e2541b0053129079754ec8141742a">bytes_</a>;
<a name="l02066"></a><a class="code" href="classcv_1_1_brief_descriptor_extractor.html#a9d5d477c9bc4f616038ba4192524d771">02066</a>     PixelTestFn <a class="code" href="classcv_1_1_brief_descriptor_extractor.html#a9d5d477c9bc4f616038ba4192524d771">test_fn_</a>;
<a name="l02067"></a>02067 };
<a name="l02068"></a>02068 
<a name="l02069"></a>02069 <span class="comment">/****************************************************************************************\</span>
<a name="l02070"></a>02070 <span class="comment">*                                          Distance                                      *</span>
<a name="l02071"></a>02071 <span class="comment">\****************************************************************************************/</span>
<a name="l02072"></a>02072 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l02073"></a><a class="code" href="structcv_1_1_accumulator.html">02073</a> <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_accumulator.html">Accumulator</a>
<a name="l02074"></a>02074 {
<a name="l02075"></a><a class="code" href="structcv_1_1_accumulator.html#ad5bc00e84ea9780e0194fafdf2a95cbb">02075</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcv_1_1_accumulator.html#ad5bc00e84ea9780e0194fafdf2a95cbb">Type</a>;
<a name="l02076"></a>02076 };
<a name="l02077"></a>02077 
<a name="l02078"></a><a class="code" href="structcv_1_1_accumulator_3_01unsigned_01char_01_4.html#a56e36b86fad200b8ae19c219574a1ac2">02078</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1_accumulator.html">Accumulator</a>&lt;unsigned char&gt;  { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_accumulator_3_01unsigned_01char_01_4.html#a56e36b86fad200b8ae19c219574a1ac2">Type</a>; };
<a name="l02079"></a><a class="code" href="structcv_1_1_accumulator_3_01unsigned_01short_01_4.html#a81f22b96482f59175a9db504ddcbf281">02079</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1_accumulator.html">Accumulator</a>&lt;unsigned short&gt; { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_accumulator_3_01unsigned_01short_01_4.html#a81f22b96482f59175a9db504ddcbf281">Type</a>; };
<a name="l02080"></a><a class="code" href="structcv_1_1_accumulator_3_01char_01_4.html#a81b49efd978faaac393e11a4a93fbf26">02080</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1_accumulator.html">Accumulator</a>&lt;char&gt;   { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_accumulator_3_01char_01_4.html#a81b49efd978faaac393e11a4a93fbf26">Type</a>; };
<a name="l02081"></a><a class="code" href="structcv_1_1_accumulator_3_01short_01_4.html#a77fcd7bec156efe951d0204bbb389d13">02081</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1_accumulator.html">Accumulator</a>&lt;short&gt;  { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_accumulator_3_01short_01_4.html#a77fcd7bec156efe951d0204bbb389d13">Type</a>; };
<a name="l02082"></a>02082 
<a name="l02083"></a>02083 <span class="comment">/*</span>
<a name="l02084"></a>02084 <span class="comment"> * Squared Euclidean distance functor</span>
<a name="l02085"></a>02085 <span class="comment"> */</span>
<a name="l02086"></a>02086 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l02087"></a><a class="code" href="structcv_1_1_l2.html">02087</a> <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_l2.html">L2</a>
<a name="l02088"></a>02088 {
<a name="l02089"></a><a class="code" href="structcv_1_1_l2.html#ad25afc9e28cdb4d9dfde1a7b6feafd08">02089</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcv_1_1_l2.html#ad25afc9e28cdb4d9dfde1a7b6feafd08">ValueType</a>;
<a name="l02090"></a><a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">02090</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcv_1_1_accumulator.html#ad5bc00e84ea9780e0194fafdf2a95cbb">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a>;
<a name="l02091"></a>02091 
<a name="l02092"></a><a class="code" href="structcv_1_1_l2.html#a3e6509f8374160ca68cc3e8f3c510ceb">02092</a>     <a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a> operator()( <span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>* <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>* <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span> size )<span class="keyword"> const</span>
<a name="l02093"></a>02093 <span class="keyword">    </span>{
<a name="l02094"></a>02094         <a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a>();
<a name="l02095"></a>02095         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>; i++ )
<a name="l02096"></a>02096         {
<a name="l02097"></a>02097             <a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a> diff = (<a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a>)(a[i] - b[i]);
<a name="l02098"></a>02098             result += diff*diff;
<a name="l02099"></a>02099         }
<a name="l02100"></a>02100         <span class="keywordflow">return</span> (<a class="code" href="structcv_1_1_l2.html#a1452282c710b7f56201791008678b441">ResultType</a>)<a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>((<span class="keywordtype">double</span>)result);
<a name="l02101"></a>02101     }
<a name="l02102"></a>02102 };
<a name="l02103"></a>02103 
<a name="l02104"></a>02104 <span class="comment">/*</span>
<a name="l02105"></a>02105 <span class="comment"> * Manhattan distance (city block distance) functor</span>
<a name="l02106"></a>02106 <span class="comment"> */</span>
<a name="l02107"></a>02107 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l02108"></a><a class="code" href="structcv_1_1_l1.html">02108</a> <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_l1.html">L1</a>
<a name="l02109"></a>02109 {
<a name="l02110"></a><a class="code" href="structcv_1_1_l1.html#a03e450655ea3ca64f331f9296b510637">02110</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcv_1_1_l1.html#a03e450655ea3ca64f331f9296b510637">ValueType</a>;
<a name="l02111"></a><a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">02111</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcv_1_1_accumulator.html#ad5bc00e84ea9780e0194fafdf2a95cbb">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a>;
<a name="l02112"></a>02112 
<a name="l02113"></a><a class="code" href="structcv_1_1_l1.html#a375c166b6e49b97846d560057f57a4ef">02113</a>     <a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a> operator()( <span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>* <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>* <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span> size )<span class="keyword"> const</span>
<a name="l02114"></a>02114 <span class="keyword">    </span>{
<a name="l02115"></a>02115         <a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a>();
<a name="l02116"></a>02116         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>; i++ )
<a name="l02117"></a>02117         {
<a name="l02118"></a>02118             <a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a> diff = a[i] - b[i];
<a name="l02119"></a>02119             result += (<a class="code" href="structcv_1_1_l1.html#a4c4639a0c362606e96b3cf626dbac79b">ResultType</a>)fabs( diff );
<a name="l02120"></a>02120         }
<a name="l02121"></a>02121         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l02122"></a>02122     }
<a name="l02123"></a>02123 };
<a name="l02124"></a>02124 
<a name="l02125"></a>02125 <span class="comment">/*</span>
<a name="l02126"></a>02126 <span class="comment"> * Hamming distance functor - counts the bit differences between two strings - useful for the Brief descriptor</span>
<a name="l02127"></a>02127 <span class="comment"> * bit count of A exclusive XOR&#39;ed with B</span>
<a name="l02128"></a>02128 <span class="comment"> */</span>
<a name="l02129"></a><a class="code" href="structcv_1_1_hamming_l_u_t.html">02129</a> <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_hamming_l_u_t.html">HammingLUT</a>
<a name="l02130"></a>02130 {
<a name="l02131"></a><a class="code" href="structcv_1_1_hamming_l_u_t.html#a26d98cffaa0fbe80066f1ae40a869eb4">02131</a>     <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structcv_1_1_hamming_l_u_t.html#a26d98cffaa0fbe80066f1ae40a869eb4">ValueType</a>;
<a name="l02132"></a><a class="code" href="structcv_1_1_hamming_l_u_t.html#a18ad15ad365023235dfefb52bbccaf4f">02132</a>     <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_hamming_l_u_t.html#a18ad15ad365023235dfefb52bbccaf4f">ResultType</a>;
<a name="l02133"></a>02133 
<a name="l02136"></a>02136     <a class="code" href="structcv_1_1_hamming_l_u_t.html#a18ad15ad365023235dfefb52bbccaf4f">ResultType</a> operator()( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span> size ) <span class="keyword">const</span>;
<a name="l02137"></a>02137 
<a name="l02143"></a>02143     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> byteBitsLookUp(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>);
<a name="l02144"></a>02144 };
<a name="l02145"></a>02145 
<a name="l02146"></a>02146 
<a name="l02150"></a><a class="code" href="structcv_1_1_hamming.html">02150</a> <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_hamming.html">Hamming</a>
<a name="l02151"></a>02151 {
<a name="l02152"></a><a class="code" href="structcv_1_1_hamming.html#ad95bdbcd7f1e66f2ac76168a75475976">02152</a>     <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structcv_1_1_hamming.html#ad95bdbcd7f1e66f2ac76168a75475976">ValueType</a>;
<a name="l02153"></a>02153 
<a name="l02155"></a>02155     <span class="comment">// in BruteForce if not</span>
<a name="l02156"></a><a class="code" href="structcv_1_1_hamming.html#ab8c5ba99d19941d5e2deb35a338da7b4">02156</a>     <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_hamming.html#ab8c5ba99d19941d5e2deb35a338da7b4" title="important that this is signed as weird behavior happens">ResultType</a>;
<a name="l02157"></a>02157 
<a name="l02160"></a>02160     <a class="code" href="structcv_1_1_hamming.html#ab8c5ba99d19941d5e2deb35a338da7b4" title="important that this is signed as weird behavior happens">ResultType</a> operator()(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span> size) <span class="keyword">const</span>;
<a name="l02161"></a>02161 };
<a name="l02162"></a>02162 
<a name="l02163"></a>02163 
<a name="l02164"></a>02164 <span class="comment">/****************************************************************************************\</span>
<a name="l02165"></a>02165 <span class="comment">*                                      DMatch                                            *</span>
<a name="l02166"></a>02166 <span class="comment">\****************************************************************************************/</span>
<a name="l02167"></a>02167 <span class="comment">/*</span>
<a name="l02168"></a>02168 <span class="comment"> * Struct for matching: query descriptor index, train descriptor index, train image index and distance between descriptors.</span>
<a name="l02169"></a>02169 <span class="comment"> */</span>
<a name="l02170"></a><a class="code" href="structcv_1_1_d_match.html">02170</a> <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_d_match.html">DMatch</a>
<a name="l02171"></a>02171 {
<a name="l02172"></a><a class="code" href="structcv_1_1_d_match.html#a546ddb9a87898f06e510e015a6de596e">02172</a>     <a class="code" href="structcv_1_1_d_match.html#a546ddb9a87898f06e510e015a6de596e">DMatch</a>() : queryIdx(-1), trainIdx(-1), imgIdx(-1), distance(std::numeric_limits&lt;float&gt;::<a class="code" href="namespacecv.html#a22a8f8afb6090a66a771348b658dcebd" title="computes per-element maximum of two arrays (dst = max(src1, src2))">max</a>()) {}
<a name="l02173"></a><a class="code" href="structcv_1_1_d_match.html#abcedc39e3f9c605472793d81ff5eb318">02173</a>     <a class="code" href="structcv_1_1_d_match.html">DMatch</a>( <span class="keywordtype">int</span> _queryIdx, <span class="keywordtype">int</span> _trainIdx, <span class="keywordtype">float</span> _distance ) :
<a name="l02174"></a>02174             queryIdx(_queryIdx), trainIdx(_trainIdx), imgIdx(-1), distance(_distance) {}
<a name="l02175"></a><a class="code" href="structcv_1_1_d_match.html#a43d07332011940086bae0ae4a43da06e">02175</a>     <a class="code" href="structcv_1_1_d_match.html">DMatch</a>( <span class="keywordtype">int</span> _queryIdx, <span class="keywordtype">int</span> _trainIdx, <span class="keywordtype">int</span> _imgIdx, <span class="keywordtype">float</span> _distance ) :
<a name="l02176"></a>02176             queryIdx(_queryIdx), trainIdx(_trainIdx), imgIdx(_imgIdx), distance(_distance) {}
<a name="l02177"></a>02177 
<a name="l02178"></a><a class="code" href="structcv_1_1_d_match.html#a47475576327f6ba9cd39250881b4d330">02178</a>     <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_d_match.html#a47475576327f6ba9cd39250881b4d330">queryIdx</a>; <span class="comment">// query descriptor index</span>
<a name="l02179"></a><a class="code" href="structcv_1_1_d_match.html#a2320bcc822280c8a416b85f80f5a4453">02179</a>     <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_d_match.html#a2320bcc822280c8a416b85f80f5a4453">trainIdx</a>; <span class="comment">// train descriptor index</span>
<a name="l02180"></a><a class="code" href="structcv_1_1_d_match.html#ab9800c265dcb748a28aa1a2d4b45eea4">02180</a>     <span class="keywordtype">int</span> <a class="code" href="structcv_1_1_d_match.html#ab9800c265dcb748a28aa1a2d4b45eea4">imgIdx</a>;   <span class="comment">// train image index</span>
<a name="l02181"></a>02181 
<a name="l02182"></a><a class="code" href="structcv_1_1_d_match.html#a1cb9bee47b20ad96e16de28f4b9cbdf1">02182</a>     <span class="keywordtype">float</span> <a class="code" href="structcv_1_1_d_match.html#a1cb9bee47b20ad96e16de28f4b9cbdf1">distance</a>;
<a name="l02183"></a>02183 
<a name="l02184"></a>02184     <span class="comment">// less is better</span>
<a name="l02185"></a><a class="code" href="structcv_1_1_d_match.html#a25108da824f8541f11e54c4ab6e233f4">02185</a>     <span class="keywordtype">bool</span> <a class="code" href="namespacecv.html#acc24213ebe96af99e6bd17b72e192f55">operator&lt;</a>( <span class="keyword">const</span> <a class="code" href="structcv_1_1_d_match.html">DMatch</a> &amp;m )<span class="keyword"> const</span>
<a name="l02186"></a>02186 <span class="keyword">    </span>{
<a name="l02187"></a>02187         <span class="keywordflow">return</span> distance &lt; m.<a class="code" href="structcv_1_1_d_match.html#a1cb9bee47b20ad96e16de28f4b9cbdf1">distance</a>;
<a name="l02188"></a>02188     }
<a name="l02189"></a>02189 };
<a name="l02190"></a>02190 
<a name="l02191"></a>02191 <span class="comment">/****************************************************************************************\</span>
<a name="l02192"></a>02192 <span class="comment">*                                  DescriptorMatcher                                     *</span>
<a name="l02193"></a>02193 <span class="comment">\****************************************************************************************/</span>
<a name="l02194"></a>02194 <span class="comment">/*</span>
<a name="l02195"></a>02195 <span class="comment"> * Abstract base class for matching two sets of descriptors.</span>
<a name="l02196"></a>02196 <span class="comment"> */</span>
<a name="l02197"></a><a class="code" href="classcv_1_1_descriptor_matcher.html">02197</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_descriptor_matcher.html">DescriptorMatcher</a>
<a name="l02198"></a>02198 {
<a name="l02199"></a>02199 <span class="keyword">public</span>:
<a name="l02200"></a>02200     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_descriptor_matcher.html">DescriptorMatcher</a>();
<a name="l02201"></a>02201 
<a name="l02202"></a>02202     <span class="comment">/*</span>
<a name="l02203"></a>02203 <span class="comment">     * Add descriptors to train descriptor collection.</span>
<a name="l02204"></a>02204 <span class="comment">     * descriptors      Descriptors to add. Each descriptors[i] is a descriptors set from one image.</span>
<a name="l02205"></a>02205 <span class="comment">     */</span>
<a name="l02206"></a>02206     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#aba9e14974f8b53580964ba41ea030b40" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a> );
<a name="l02207"></a>02207     <span class="comment">/*</span>
<a name="l02208"></a>02208 <span class="comment">     * Get train descriptors collection.</span>
<a name="l02209"></a>02209 <span class="comment">     */</span>
<a name="l02210"></a>02210     <span class="keyword">const</span> vector&lt;Mat&gt;&amp; getTrainDescriptors() <span class="keyword">const</span>;
<a name="l02211"></a>02211     <span class="comment">/*</span>
<a name="l02212"></a>02212 <span class="comment">     * Clear train descriptors collection.</span>
<a name="l02213"></a>02213 <span class="comment">     */</span>
<a name="l02214"></a>02214     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="codeRef" doxygen="cinder.tag:../../../../docs/html/" href="../../../../docs/html/namespacecinder_1_1gl.html#a2fbfcc011e3992ebe4a239464a97d896">clear</a>();
<a name="l02215"></a>02215 
<a name="l02216"></a>02216     <span class="comment">/*</span>
<a name="l02217"></a>02217 <span class="comment">     * Return true if there are not train descriptors in collection.</span>
<a name="l02218"></a>02218 <span class="comment">     */</span>
<a name="l02219"></a>02219     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l02220"></a>02220     <span class="comment">/*</span>
<a name="l02221"></a>02221 <span class="comment">     * Return true if the matcher supports mask in match methods.</span>
<a name="l02222"></a>02222 <span class="comment">     */</span>
<a name="l02223"></a>02223     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported() <span class="keyword">const</span> = 0;
<a name="l02224"></a>02224 
<a name="l02225"></a>02225     <span class="comment">/*</span>
<a name="l02226"></a>02226 <span class="comment">     * Train matcher (e.g. train flann index).</span>
<a name="l02227"></a>02227 <span class="comment">     * In all methods to match the method train() is run every time before matching.</span>
<a name="l02228"></a>02228 <span class="comment">     * Some descriptor matchers (e.g. BruteForceMatcher) have empty implementation</span>
<a name="l02229"></a>02229 <span class="comment">     * of this method, other matchers really train their inner structures</span>
<a name="l02230"></a>02230 <span class="comment">     * (e.g. FlannBasedMatcher trains flann::Index). So nonempty implementation</span>
<a name="l02231"></a>02231 <span class="comment">     * of train() should check the class object state and do traing/retraining</span>
<a name="l02232"></a>02232 <span class="comment">     * only if the state requires that (e.g. FlannBasedMatcher trains flann::Index</span>
<a name="l02233"></a>02233 <span class="comment">     * if it has not trained yet or if new descriptors have been added to the train</span>
<a name="l02234"></a>02234 <span class="comment">     * collection).</span>
<a name="l02235"></a>02235 <span class="comment">     */</span>
<a name="l02236"></a>02236     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02237"></a>02237     <span class="comment">/*</span>
<a name="l02238"></a>02238 <span class="comment">     * Group of methods to match descriptors from image pair.</span>
<a name="l02239"></a>02239 <span class="comment">     * Method train() is run in this methods.</span>
<a name="l02240"></a>02240 <span class="comment">     */</span>
<a name="l02241"></a>02241     <span class="comment">// Find one best match for each query descriptor (if mask is empty).</span>
<a name="l02242"></a>02242     <span class="keywordtype">void</span> match( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; trainDescriptors,
<a name="l02243"></a>02243                 vector&lt;DMatch&gt;&amp; matches, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l02244"></a>02244     <span class="comment">// Find k best matches for each query descriptor (in increasing order of distances).</span>
<a name="l02245"></a>02245     <span class="comment">// compactResult is used when mask is not empty. If compactResult is false matches</span>
<a name="l02246"></a>02246     <span class="comment">// vector will have the same size as queryDescriptors rows. If compactResult is true</span>
<a name="l02247"></a>02247     <span class="comment">// matches vector will not contain matches for fully masked out query descriptors.</span>
<a name="l02248"></a>02248     <span class="keywordtype">void</span> knnMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; trainDescriptors,
<a name="l02249"></a>02249                    vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> <a class="code" href="imgproc__c_8h.html#a7be9b6436e5ea72ff5d5a66779b4bd38">k</a>,
<a name="l02250"></a>02250                    <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02251"></a>02251     <span class="comment">// Find best matches for each query descriptor which have distance less than</span>
<a name="l02252"></a>02252     <span class="comment">// maxDistance (in increasing order of distances).</span>
<a name="l02253"></a>02253     <span class="keywordtype">void</span> radiusMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; trainDescriptors,
<a name="l02254"></a>02254                       vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02255"></a>02255                       <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02256"></a>02256     <span class="comment">/*</span>
<a name="l02257"></a>02257 <span class="comment">     * Group of methods to match descriptors from one image to image set.</span>
<a name="l02258"></a>02258 <span class="comment">     * See description of similar methods for matching image pair above.</span>
<a name="l02259"></a>02259 <span class="comment">     */</span>
<a name="l02260"></a>02260     <span class="keywordtype">void</span> match( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;DMatch&gt;&amp; matches,
<a name="l02261"></a>02261                 <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;() );
<a name="l02262"></a>02262     <span class="keywordtype">void</span> knnMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02263"></a>02263            <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02264"></a>02264     <span class="keywordtype">void</span> radiusMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02265"></a>02265                    <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02266"></a>02266 
<a name="l02267"></a>02267     <span class="comment">// Reads matcher object from a file node</span>
<a name="l02268"></a>02268     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a619e0aa3096e0c21dd68917bab5ec86f">read</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; );
<a name="l02269"></a>02269     <span class="comment">// Writes matcher object to a file storage</span>
<a name="l02270"></a>02270     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; ) <span class="keyword">const</span>;
<a name="l02271"></a>02271 
<a name="l02272"></a>02272     <span class="comment">// Clone the matcher. If emptyTrainData is false the method create deep copy of the object, i.e. copies</span>
<a name="l02273"></a>02273     <span class="comment">// both parameters and train data. If emptyTrainData is true the method create object copy with current parameters</span>
<a name="l02274"></a>02274     <span class="comment">// but with empty train data.</span>
<a name="l02275"></a>02275     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span> = 0;
<a name="l02276"></a>02276 
<a name="l02277"></a>02277     <span class="keyword">static</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> create( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; descriptorMatcherType );
<a name="l02278"></a>02278 <span class="keyword">protected</span>:
<a name="l02279"></a>02279     <span class="comment">/*</span>
<a name="l02280"></a>02280 <span class="comment">     * Class to work with descriptors from several images as with one merged matrix.</span>
<a name="l02281"></a>02281 <span class="comment">     * It is used e.g. in FlannBasedMatcher.</span>
<a name="l02282"></a>02282 <span class="comment">     */</span>
<a name="l02283"></a><a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">02283</a>     <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>
<a name="l02284"></a>02284     {
<a name="l02285"></a>02285     <span class="keyword">public</span>:
<a name="l02286"></a>02286         <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>();
<a name="l02287"></a>02287         <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>&amp; collection );
<a name="l02288"></a>02288         <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>();
<a name="l02289"></a>02289 
<a name="l02290"></a>02290         <span class="comment">// Vector of matrices &quot;descriptors&quot; will be merged to one matrix &quot;mergedDescriptors&quot; here.</span>
<a name="l02291"></a>02291         <span class="keywordtype">void</span> <span class="keyword">set</span>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; <a class="code" href="features2d_8hpp.html#a1e3702ddbca6258f57508c22eff26bf2">descriptors</a> );
<a name="l02292"></a>02292         <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02293"></a>02293 
<a name="l02294"></a>02294         <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; getDescriptors() <span class="keyword">const</span>;
<a name="l02295"></a>02295         <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> getDescriptor( <span class="keywordtype">int</span> imgIdx, <span class="keywordtype">int</span> localDescIdx ) <span class="keyword">const</span>;
<a name="l02296"></a>02296         <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> getDescriptor( <span class="keywordtype">int</span> globalDescIdx ) <span class="keyword">const</span>;
<a name="l02297"></a>02297         <span class="keywordtype">void</span> getLocalIdx( <span class="keywordtype">int</span> globalDescIdx, <span class="keywordtype">int</span>&amp; imgIdx, <span class="keywordtype">int</span>&amp; localDescIdx ) <span class="keyword">const</span>;
<a name="l02298"></a>02298 
<a name="l02299"></a>02299         <span class="keywordtype">int</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>() <span class="keyword">const</span>;
<a name="l02300"></a>02300 
<a name="l02301"></a>02301     <span class="keyword">protected</span>:
<a name="l02302"></a><a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html#af89f9c161a310152714934252aef681f">02302</a>         <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html#af89f9c161a310152714934252aef681f">mergedDescriptors</a>;
<a name="l02303"></a><a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html#a97060c2e01d3b8266b7aabc1d2b3ccb4">02303</a>         vector&lt;int&gt; <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html#a97060c2e01d3b8266b7aabc1d2b3ccb4">startIdxs</a>;
<a name="l02304"></a>02304     };
<a name="l02305"></a>02305 
<a name="l02306"></a>02306     <span class="comment">// In fact the matching is implemented only by the following two methods. These methods suppose</span>
<a name="l02307"></a>02307     <span class="comment">// that the class object has been trained already. Public match methods call these methods</span>
<a name="l02308"></a>02308     <span class="comment">// after calling train().</span>
<a name="l02309"></a>02309     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02310"></a>02310            <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) = 0;
<a name="l02311"></a>02311     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02312"></a>02312            <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) = 0;
<a name="l02313"></a>02313 
<a name="l02314"></a>02314     <span class="keyword">static</span> <span class="keywordtype">bool</span> isPossibleMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>, <span class="keywordtype">int</span> queryIdx, <span class="keywordtype">int</span> trainIdx );
<a name="l02315"></a>02315     <span class="keyword">static</span> <span class="keywordtype">bool</span> isMaskedOut( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">int</span> queryIdx );
<a name="l02316"></a>02316 
<a name="l02317"></a><a class="code" href="classcv_1_1_descriptor_matcher.html#a7aa961c11ccdc6a9b1495f5aaf83d251">02317</a>     <span class="keyword">static</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> <a class="code" href="classcv_1_1_descriptor_matcher.html#a7aa961c11ccdc6a9b1495f5aaf83d251">clone_op</a>( <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> m ) { <span class="keywordflow">return</span> m.<a class="code" href="classcv_1_1_mat.html#afb01ff6b2231b72f55618bfb66a5326b" title="returns deep copy of the matrix, i.e. the data is copied">clone</a>(); }
<a name="l02318"></a>02318     <span class="keywordtype">void</span> checkMasks( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">int</span> queryDescriptorsCount ) <span class="keyword">const</span>;
<a name="l02319"></a>02319 
<a name="l02320"></a>02320     <span class="comment">// Collection of descriptors from train images.</span>
<a name="l02321"></a><a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">02321</a>     vector&lt;Mat&gt; <a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>;
<a name="l02322"></a>02322 };
<a name="l02323"></a>02323 
<a name="l02324"></a>02324 <span class="comment">/*</span>
<a name="l02325"></a>02325 <span class="comment"> * Brute-force descriptor matcher.</span>
<a name="l02326"></a>02326 <span class="comment"> *</span>
<a name="l02327"></a>02327 <span class="comment"> * For each descriptor in the first set, this matcher finds the closest</span>
<a name="l02328"></a>02328 <span class="comment"> * descriptor in the second set by trying each one.</span>
<a name="l02329"></a>02329 <span class="comment"> *</span>
<a name="l02330"></a>02330 <span class="comment"> * For efficiency, BruteForceMatcher is templated on the distance metric.</span>
<a name="l02331"></a>02331 <span class="comment"> * For float descriptors, a common choice would be cv::L2&lt;float&gt;.</span>
<a name="l02332"></a>02332 <span class="comment"> */</span>
<a name="l02333"></a>02333 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02334"></a><a class="code" href="classcv_1_1_brute_force_matcher.html">02334</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_matcher.html">DescriptorMatcher</a>
<a name="l02335"></a>02335 {
<a name="l02336"></a>02336 <span class="keyword">public</span>:
<a name="l02337"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#adafe4d7271b338e5ab13081acd15f80b">02337</a>     <a class="code" href="classcv_1_1_brute_force_matcher.html#adafe4d7271b338e5ab13081acd15f80b">BruteForceMatcher</a>( Distance <a class="code" href="imgproc__c_8h.html#a6f364afbe132c4ecfea48bde1b0618ba">d</a> = Distance() ) : distance(<a class="code" href="imgproc__c_8h.html#a6f364afbe132c4ecfea48bde1b0618ba">d</a>) {}
<a name="l02338"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#ae517a3edef3a72eec3c8cea95949fff1">02338</a>     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_brute_force_matcher.html#ae517a3edef3a72eec3c8cea95949fff1">~BruteForceMatcher</a>() {}
<a name="l02339"></a>02339 
<a name="l02340"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#ae928ee05fbba37e73697da82bfbbf1c4">02340</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classcv_1_1_brute_force_matcher.html#ae928ee05fbba37e73697da82bfbbf1c4">isMaskSupported</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l02341"></a>02341 
<a name="l02342"></a>02342     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02343"></a>02343 
<a name="l02344"></a>02344 <span class="keyword">protected</span>:
<a name="l02345"></a>02345     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02346"></a>02346            <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02347"></a>02347     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02348"></a>02348            <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02349"></a>02349 
<a name="l02350"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#ae0aef10f6e9a325f8e807be067280f5a">02350</a>     Distance <a class="code" href="classcv_1_1_brute_force_matcher.html#ae0aef10f6e9a325f8e807be067280f5a">distance</a>;
<a name="l02351"></a>02351 
<a name="l02352"></a>02352 <span class="keyword">private</span>:
<a name="l02353"></a>02353     <span class="comment">/*</span>
<a name="l02354"></a>02354 <span class="comment">     * Next two methods are used to implement specialization.</span>
<a name="l02355"></a>02355 <span class="comment">     */</span>
<a name="l02356"></a>02356     <span class="keyword">static</span> <span class="keywordtype">void</span> commonKnnMatchImpl( <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;</a>&amp; matcher,
<a name="l02357"></a>02357                     <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02358"></a>02358                     <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02359"></a>02359     <span class="keyword">static</span> <span class="keywordtype">void</span> commonRadiusMatchImpl( <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;</a>&amp; matcher,
<a name="l02360"></a>02360                     <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02361"></a>02361                     <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02362"></a>02362 };
<a name="l02363"></a>02363 
<a name="l02364"></a>02364 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02365"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#a6fdec5ad3ddd56ca5cf1664316b97934">02365</a> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;::clone</a>( <span class="keywordtype">bool</span> emptyTrainData )<span class="keyword"> const</span>
<a name="l02366"></a>02366 <span class="keyword"></span>{
<a name="l02367"></a>02367     <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher</a>* matcher = <span class="keyword">new</span> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher</a>(distance);
<a name="l02368"></a>02368     <span class="keywordflow">if</span>( !emptyTrainData )
<a name="l02369"></a>02369     {
<a name="l02370"></a>02370         <a class="code" href="namespacecv.html#a1fde6d7b2bc077001501b8c201f2ec09" title="performs affine transformation of each element of multi-channel input matrix">std::transform</a>( trainDescCollection.begin(), trainDescCollection.end(),
<a name="l02371"></a>02371                         matcher-&gt;<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>.begin(), clone_op );
<a name="l02372"></a>02372     }
<a name="l02373"></a>02373     <span class="keywordflow">return</span> matcher;
<a name="l02374"></a>02374 }
<a name="l02375"></a>02375 
<a name="l02376"></a>02376 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02377"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#a4f1d7cfd202dbae10f461a969e9c1785">02377</a> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;::knnMatchImpl</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02378"></a>02378                                                 <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult )
<a name="l02379"></a>02379 {
<a name="l02380"></a>02380     commonKnnMatchImpl( *<span class="keyword">this</span>, queryDescriptors, matches, k, masks, compactResult );
<a name="l02381"></a>02381 }
<a name="l02382"></a>02382 
<a name="l02383"></a>02383 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02384"></a><a class="code" href="classcv_1_1_brute_force_matcher.html#a140602008e0b635a7eb423d11282e65c">02384</a> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;::radiusMatchImpl</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches,
<a name="l02385"></a>02385                                                    <span class="keywordtype">float</span> maxDistance, <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult )
<a name="l02386"></a>02386 {
<a name="l02387"></a>02387     commonRadiusMatchImpl( *<span class="keyword">this</span>, queryDescriptors, matches, maxDistance, masks, compactResult );
<a name="l02388"></a>02388 }
<a name="l02389"></a>02389 
<a name="l02390"></a>02390 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02391"></a>02391 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;::commonKnnMatchImpl</a>( <a class="code" href="classcv_1_1_brute_force_matcher.html">BruteForceMatcher&lt;Distance&gt;</a>&amp; matcher,
<a name="l02392"></a>02392                           <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> knn,
<a name="l02393"></a>02393                           <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult )
<a name="l02394"></a>02394  {
<a name="l02395"></a>02395      <span class="keyword">typedef</span> <span class="keyword">typename</span> Distance::ValueType <a class="codeRef" doxygen="cinder.tag:../../../../docs/html/" href="../../../../docs/html/namespace_json.html#a7d654b75c16a57007925868e38212b4e">ValueType</a>;
<a name="l02396"></a>02396      <span class="keyword">typedef</span> <span class="keyword">typename</span> Distance::ResultType DistanceType;
<a name="l02397"></a>02397      CV_DbgAssert( !queryDescriptors.<a class="code" href="classcv_1_1_mat.html#a17d0777aef52a7cfbdb8d04d189fa5c3" title="returns true if matrix data is NULL">empty</a>() );
<a name="l02398"></a>02398      CV_Assert( <a class="code" href="classcv_1_1_data_type.html" title="Informative template class for OpenCV &quot;scalars&quot;.">DataType&lt;ValueType&gt;::type</a> == queryDescriptors.<a class="code" href="classcv_1_1_mat.html#aa6477efc7399fbe742418250ccf99a4b" title="returns element type, similar to CV_MAT_TYPE(cvmat-&gt;type)">type</a>() );
<a name="l02399"></a>02399      
<a name="l02400"></a>02400      <span class="keywordtype">int</span> dimension = queryDescriptors.<a class="code" href="classcv_1_1_mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a>;
<a name="l02401"></a>02401      matches.reserve(queryDescriptors.<a class="code" href="classcv_1_1_mat.html#abed816466c45234254d25bc59c31245e" title="the number of rows and columns or (-1, -1) when the matrix has more than 2 dimensions">rows</a>);
<a name="l02402"></a>02402 
<a name="l02403"></a>02403      <span class="keywordtype">size_t</span> imgCount = matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>.size();
<a name="l02404"></a>02404      vector&lt;Mat&gt; allDists( imgCount ); <span class="comment">// distances between one query descriptor and all train descriptors</span>
<a name="l02405"></a>02405      <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; imgCount; i++ )
<a name="l02406"></a>02406         allDists[i] = <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>( 1, matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[i].rows, <a class="code" href="classcv_1_1_data_type.html" title="Informative template class for OpenCV &quot;scalars&quot;.">DataType&lt;DistanceType&gt;::type</a> );
<a name="l02407"></a>02407 
<a name="l02408"></a>02408      <span class="keywordflow">for</span>( <span class="keywordtype">int</span> qIdx = 0; qIdx &lt; queryDescriptors.<a class="code" href="classcv_1_1_mat.html#abed816466c45234254d25bc59c31245e" title="the number of rows and columns or (-1, -1) when the matrix has more than 2 dimensions">rows</a>; qIdx++ )
<a name="l02409"></a>02409      {
<a name="l02410"></a>02410          <span class="keywordflow">if</span>( matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a4ea827dc0c7a19406be3c34856e05f08">isMaskedOut</a>( masks, qIdx ) )
<a name="l02411"></a>02411          {
<a name="l02412"></a>02412              <span class="keywordflow">if</span>( !compactResult ) <span class="comment">// push empty vector</span>
<a name="l02413"></a>02413                  matches.push_back( vector&lt;DMatch&gt;() );
<a name="l02414"></a>02414          }
<a name="l02415"></a>02415          <span class="keywordflow">else</span>
<a name="l02416"></a>02416          {
<a name="l02417"></a>02417              <span class="comment">// 1. compute distances between i-th query descriptor and all train descriptors</span>
<a name="l02418"></a>02418              <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> iIdx = 0; iIdx &lt; imgCount; iIdx++ )
<a name="l02419"></a>02419              {
<a name="l02420"></a>02420                  CV_Assert( <a class="code" href="core__c_8h.html#a8bc957583d2a5247e490ea9ce960cf21">DataType&lt;ValueType&gt;::type</a> == matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].type() ||  matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].empty() );
<a name="l02421"></a>02421                  CV_Assert( queryDescriptors.<a class="code" href="classcv_1_1_mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a> == matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].cols || 
<a name="l02422"></a>02422                             matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].empty() );
<a name="l02423"></a>02423 
<a name="l02424"></a>02424                  <span class="keyword">const</span> ValueType* d1 = (<span class="keyword">const</span> ValueType*)(queryDescriptors.<a class="code" href="classcv_1_1_mat.html#a4d33bed1c850265370d2af0ff02e1564" title="pointer to the data">data</a> + queryDescriptors.<a class="code" href="classcv_1_1_mat.html#acc7e087cdfcaaba5df75ab6e9def9e85">step</a>*qIdx);
<a name="l02425"></a>02425                  allDists[iIdx].setTo( <a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(<a class="code" href="namespacecv.html#a22a8f8afb6090a66a771348b658dcebd" title="computes per-element maximum of two arrays (dst = max(src1, src2))">std::numeric_limits&lt;DistanceType&gt;::max</a>()) );
<a name="l02426"></a>02426                  <span class="keywordflow">for</span>( <span class="keywordtype">int</span> tIdx = 0; tIdx &lt; matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].rows; tIdx++ )
<a name="l02427"></a>02427                  {
<a name="l02428"></a>02428                      <span class="keywordflow">if</span>( masks.empty() || matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a3d8033c29676310a40e0cb2b4a602794">isPossibleMatch</a>(masks[iIdx], qIdx, tIdx) )
<a name="l02429"></a>02429                      {
<a name="l02430"></a>02430                          <span class="keyword">const</span> ValueType* d2 = (<span class="keyword">const</span> ValueType*)(matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].data +
<a name="l02431"></a>02431                                                                   matcher.<a class="code" href="classcv_1_1_descriptor_matcher.html#a717cd6bb1ab8969c49f1b1ca21925825">trainDescCollection</a>[iIdx].step*tIdx);
<a name="l02432"></a>02432                          allDists[iIdx].at&lt;DistanceType&gt;(0, tIdx) = matcher.<a class="code" href="classcv_1_1_brute_force_matcher.html#ae0aef10f6e9a325f8e807be067280f5a">distance</a>(d1, d2, dimension);
<a name="l02433"></a>02433                      }
<a name="l02434"></a>02434                  }
<a name="l02435"></a>02435              }
<a name="l02436"></a>02436 
<a name="l02437"></a>02437              <span class="comment">// 2. choose k nearest matches for query[i]</span>
<a name="l02438"></a>02438              matches.push_back( vector&lt;DMatch&gt;() );
<a name="l02439"></a>02439              vector&lt;vector&lt;DMatch&gt; &gt;::reverse_iterator curMatches = matches.rbegin();
<a name="l02440"></a>02440              <span class="keywordflow">for</span>( <span class="keywordtype">int</span> k = 0; k &lt; knn; k++ )
<a name="l02441"></a>02441              {
<a name="l02442"></a>02442                  DMatch bestMatch;
<a name="l02443"></a>02443                  bestMatch.distance = <a class="code" href="namespacecv.html#a22a8f8afb6090a66a771348b658dcebd" title="computes per-element maximum of two arrays (dst = max(src1, src2))">std::numeric_limits&lt;float&gt;::max</a>();
<a name="l02444"></a>02444                  <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> iIdx = 0; iIdx &lt; imgCount; iIdx++ )
<a name="l02445"></a>02445                  {
<a name="l02446"></a>02446                      <span class="keywordflow">if</span>( !allDists[iIdx].empty() )
<a name="l02447"></a>02447                      {
<a name="l02448"></a>02448                          <span class="keywordtype">double</span> minVal;
<a name="l02449"></a>02449                          <a class="code" href="namespacecv.html#a1e83eafb2d26b3c93f09e8338bcab192">Point</a> minLoc;
<a name="l02450"></a>02450                          <a class="code" href="namespacecv.html#a628679259d0612dbddba05a0f7447e75" title="finds global minimum and maximum array elements and returns their values and their locations...">minMaxLoc</a>( allDists[iIdx], &amp;minVal, 0, &amp;minLoc, 0 );
<a name="l02451"></a>02451                          <span class="keywordflow">if</span>( minVal &lt; bestMatch.distance )
<a name="l02452"></a>02452                                  bestMatch = DMatch( qIdx, minLoc.x, (<span class="keywordtype">int</span>)iIdx, (<span class="keywordtype">float</span>)minVal );
<a name="l02453"></a>02453                      }
<a name="l02454"></a>02454                  }
<a name="l02455"></a>02455                  <span class="keywordflow">if</span>( bestMatch.trainIdx == -1 )
<a name="l02456"></a>02456                      <span class="keywordflow">break</span>;
<a name="l02457"></a>02457 
<a name="l02458"></a>02458                  allDists[bestMatch.imgIdx].at&lt;DistanceType&gt;(0, bestMatch.trainIdx) = <a class="code" href="namespacecv.html#a22a8f8afb6090a66a771348b658dcebd" title="computes per-element maximum of two arrays (dst = max(src1, src2))">std::numeric_limits&lt;DistanceType&gt;::max</a>();
<a name="l02459"></a>02459                  curMatches-&gt;push_back( bestMatch );
<a name="l02460"></a>02460              }
<a name="l02461"></a>02461              <span class="comment">//TODO should already be sorted at this point?</span>
<a name="l02462"></a>02462              <a class="code" href="namespacecv.html#aad9b72b24146c673236033a113c9ed41" title="sorts independently each matrix row or each matrix column">std::sort</a>( curMatches-&gt;begin(), curMatches-&gt;end() );
<a name="l02463"></a>02463          }
<a name="l02464"></a>02464      }
<a name="l02465"></a>02465 }
<a name="l02466"></a>02466 
<a name="l02467"></a>02467 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Distance&gt;
<a name="l02468"></a>02468 <span class="keyword">inline</span> <span class="keywordtype">void</span> BruteForceMatcher&lt;Distance&gt;::commonRadiusMatchImpl( BruteForceMatcher&lt;Distance&gt;&amp; matcher,
<a name="l02469"></a>02469                              <span class="keyword">const</span> Mat&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02470"></a>02470                              <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult )
<a name="l02471"></a>02471 {
<a name="l02472"></a>02472     <span class="keyword">typedef</span> <span class="keyword">typename</span> Distance::ValueType ValueType;
<a name="l02473"></a>02473     <span class="keyword">typedef</span> <span class="keyword">typename</span> Distance::ResultType DistanceType;
<a name="l02474"></a>02474     CV_DbgAssert( !queryDescriptors.empty() );
<a name="l02475"></a>02475     CV_Assert( <a class="code" href="core__c_8h.html#a8bc957583d2a5247e490ea9ce960cf21">DataType&lt;ValueType&gt;::type</a> == queryDescriptors.type() );
<a name="l02476"></a>02476     
<a name="l02477"></a>02477     <span class="keywordtype">int</span> dimension = queryDescriptors.cols;
<a name="l02478"></a>02478     matches.reserve(queryDescriptors.rows);
<a name="l02479"></a>02479 
<a name="l02480"></a>02480     <span class="keywordtype">size_t</span> imgCount = matcher.trainDescCollection.size();
<a name="l02481"></a>02481     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> qIdx = 0; qIdx &lt; queryDescriptors.rows; qIdx++ )
<a name="l02482"></a>02482     {
<a name="l02483"></a>02483         <span class="keywordflow">if</span>( matcher.isMaskedOut( masks, qIdx ) )
<a name="l02484"></a>02484         {
<a name="l02485"></a>02485             <span class="keywordflow">if</span>( !compactResult ) <span class="comment">// push empty vector</span>
<a name="l02486"></a>02486                 matches.push_back( vector&lt;DMatch&gt;() );
<a name="l02487"></a>02487         }
<a name="l02488"></a>02488         <span class="keywordflow">else</span>
<a name="l02489"></a>02489         {
<a name="l02490"></a>02490             matches.push_back( vector&lt;DMatch&gt;() );
<a name="l02491"></a>02491             vector&lt;vector&lt;DMatch&gt; &gt;::reverse_iterator curMatches = matches.rbegin();
<a name="l02492"></a>02492             <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> iIdx = 0; iIdx &lt; imgCount; iIdx++ )
<a name="l02493"></a>02493             {
<a name="l02494"></a>02494                 CV_Assert( <a class="code" href="core__c_8h.html#a8bc957583d2a5247e490ea9ce960cf21">DataType&lt;ValueType&gt;::type</a> == matcher.trainDescCollection[iIdx].type() ||
<a name="l02495"></a>02495                            matcher.trainDescCollection[iIdx].empty() );
<a name="l02496"></a>02496                 CV_Assert( queryDescriptors.cols == matcher.trainDescCollection[iIdx].cols ||
<a name="l02497"></a>02497                            matcher.trainDescCollection[iIdx].empty() );
<a name="l02498"></a>02498 
<a name="l02499"></a>02499                 <span class="keyword">const</span> ValueType* d1 = (<span class="keyword">const</span> ValueType*)(queryDescriptors.data + queryDescriptors.step*qIdx);
<a name="l02500"></a>02500                 <span class="keywordflow">for</span>( <span class="keywordtype">int</span> tIdx = 0; tIdx &lt; matcher.trainDescCollection[iIdx].rows; tIdx++ )
<a name="l02501"></a>02501                 {
<a name="l02502"></a>02502                     <span class="keywordflow">if</span>( masks.empty() || matcher.isPossibleMatch(masks[iIdx], qIdx, tIdx) )
<a name="l02503"></a>02503                     {
<a name="l02504"></a>02504                         <span class="keyword">const</span> ValueType* d2 = (<span class="keyword">const</span> ValueType*)(matcher.trainDescCollection[iIdx].data +
<a name="l02505"></a>02505                                                                  matcher.trainDescCollection[iIdx].step*tIdx);
<a name="l02506"></a>02506                         DistanceType <a class="code" href="imgproc__c_8h.html#a6f364afbe132c4ecfea48bde1b0618ba">d</a> = matcher.distance(d1, d2, dimension);
<a name="l02507"></a>02507                         <span class="keywordflow">if</span>( d &lt; maxDistance )
<a name="l02508"></a>02508                             curMatches-&gt;push_back( DMatch( qIdx, tIdx, (<span class="keywordtype">int</span>)iIdx, (<span class="keywordtype">float</span>)d ) );
<a name="l02509"></a>02509                     }
<a name="l02510"></a>02510                 }
<a name="l02511"></a>02511             }
<a name="l02512"></a>02512             <a class="code" href="namespacecv.html#aad9b72b24146c673236033a113c9ed41" title="sorts independently each matrix row or each matrix column">std::sort</a>( curMatches-&gt;begin(), curMatches-&gt;end() );
<a name="l02513"></a>02513         }
<a name="l02514"></a>02514     }
<a name="l02515"></a>02515 }
<a name="l02516"></a>02516 
<a name="l02517"></a>02517 <span class="comment">/*</span>
<a name="l02518"></a>02518 <span class="comment"> * BruteForceMatcher L2 specialization</span>
<a name="l02519"></a>02519 <span class="comment"> */</span>
<a name="l02520"></a>02520 <span class="keyword">template</span>&lt;&gt;
<a name="l02521"></a>02521 <span class="keywordtype">void</span> BruteForceMatcher&lt;L2&lt;float&gt; &gt;::knnMatchImpl( <span class="keyword">const</span> Mat&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02522"></a>02522                                                   <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02523"></a>02523 <span class="keyword">template</span>&lt;&gt;
<a name="l02524"></a>02524 <span class="keywordtype">void</span> BruteForceMatcher&lt;L2&lt;float&gt; &gt;::radiusMatchImpl( <span class="keyword">const</span> Mat&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches,
<a name="l02525"></a>02525                                                      <span class="keywordtype">float</span> maxDistance, <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02526"></a>02526 
<a name="l02527"></a>02527 <span class="comment">/*</span>
<a name="l02528"></a>02528 <span class="comment"> * Flann based matcher</span>
<a name="l02529"></a>02529 <span class="comment"> */</span>
<a name="l02530"></a><a class="code" href="classcv_1_1_flann_based_matcher.html">02530</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_flann_based_matcher.html">FlannBasedMatcher</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_descriptor_matcher.html">DescriptorMatcher</a>
<a name="l02531"></a>02531 {
<a name="l02532"></a>02532 <span class="keyword">public</span>:
<a name="l02533"></a>02533     <a class="code" href="classcv_1_1_flann_based_matcher.html">FlannBasedMatcher</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;flann::IndexParams&gt;</a>&amp; indexParams=<span class="keyword">new</span> flann::KDTreeIndexParams(),
<a name="l02534"></a>02534                        <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;flann::SearchParams&gt;</a>&amp; searchParams=<span class="keyword">new</span> flann::SearchParams() );
<a name="l02535"></a>02535 
<a name="l02536"></a>02536     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#aba9e14974f8b53580964ba41ea030b40" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; descriptors );
<a name="l02537"></a>02537     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02538"></a>02538 
<a name="l02539"></a>02539     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02540"></a>02540     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported() <span class="keyword">const</span>;
<a name="l02541"></a>02541     
<a name="l02542"></a>02542     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02543"></a>02543 
<a name="l02544"></a>02544 <span class="keyword">protected</span>:
<a name="l02545"></a>02545     <span class="keyword">static</span> <span class="keywordtype">void</span> convertToDMatches( <span class="keyword">const</span> <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a>&amp; descriptors,
<a name="l02546"></a>02546                                    <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="imgproc__c_8h.html#a3e3b9b48bcbc7f460efbcfe4399ad24a">indices</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; distances,
<a name="l02547"></a>02547                                    vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches );
<a name="l02548"></a>02548 
<a name="l02549"></a>02549     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02550"></a>02550                    <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02551"></a>02551     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryDescriptors, vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02552"></a>02552                    <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02553"></a>02553 
<a name="l02554"></a><a class="code" href="classcv_1_1_flann_based_matcher.html#af2b50fb9c749ff4e14902192326247ad">02554</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;flann::IndexParams&gt;</a> <a class="code" href="classcv_1_1_flann_based_matcher.html#af2b50fb9c749ff4e14902192326247ad">indexParams</a>;
<a name="l02555"></a><a class="code" href="classcv_1_1_flann_based_matcher.html#af7f49c47216e18e7bdbefeb73884b891">02555</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;flann::SearchParams&gt;</a> <a class="code" href="classcv_1_1_flann_based_matcher.html#af7f49c47216e18e7bdbefeb73884b891">searchParams</a>;
<a name="l02556"></a><a class="code" href="classcv_1_1_flann_based_matcher.html#a293108def96df8a5f19ea0897e548ff2">02556</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;flann::Index&gt;</a> <a class="code" href="classcv_1_1_flann_based_matcher.html#a293108def96df8a5f19ea0897e548ff2">flannIndex</a>;
<a name="l02557"></a>02557 
<a name="l02558"></a><a class="code" href="classcv_1_1_flann_based_matcher.html#a990859c4f84b04b3ced4411b3a62e7cc">02558</a>     <a class="code" href="classcv_1_1_descriptor_matcher_1_1_descriptor_collection.html">DescriptorCollection</a> <a class="code" href="classcv_1_1_flann_based_matcher.html#a990859c4f84b04b3ced4411b3a62e7cc">mergedDescriptors</a>;
<a name="l02559"></a><a class="code" href="classcv_1_1_flann_based_matcher.html#a8854dcad3e17bab50c39f60ddff76d21">02559</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_flann_based_matcher.html#a8854dcad3e17bab50c39f60ddff76d21">addedDescCount</a>;
<a name="l02560"></a>02560 };
<a name="l02561"></a>02561 
<a name="l02562"></a>02562 <span class="comment">/****************************************************************************************\</span>
<a name="l02563"></a>02563 <span class="comment">*                                GenericDescriptorMatcher                                *</span>
<a name="l02564"></a>02564 <span class="comment">\****************************************************************************************/</span>
<a name="l02565"></a>02565 <span class="comment">/*</span>
<a name="l02566"></a>02566 <span class="comment"> *   Abstract interface for a keypoint descriptor and matcher</span>
<a name="l02567"></a>02567 <span class="comment"> */</span>
<a name="l02568"></a><a class="code" href="namespacecv.html#a6a31c291e295a1c7a4f66159705270d1">02568</a> <span class="keyword">class </span><a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>;
<a name="l02569"></a>02569 <span class="keyword">typedef</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a> <a class="code" href="namespacecv.html#a6a31c291e295a1c7a4f66159705270d1">GenericDescriptorMatch</a>;
<a name="l02570"></a>02570 
<a name="l02571"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher.html">02571</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>
<a name="l02572"></a>02572 {
<a name="l02573"></a>02573 <span class="keyword">public</span>:
<a name="l02574"></a>02574     <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>();
<a name="l02575"></a>02575     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>();
<a name="l02576"></a>02576 
<a name="l02577"></a>02577     <span class="comment">/*</span>
<a name="l02578"></a>02578 <span class="comment">     * Add train collection: images and keypoints from them.</span>
<a name="l02579"></a>02579 <span class="comment">     * images       A set of train images.</span>
<a name="l02580"></a>02580 <span class="comment">     * ketpoints    Keypoint collection that have been detected on train images.</span>
<a name="l02581"></a>02581 <span class="comment">     *</span>
<a name="l02582"></a>02582 <span class="comment">     * Keypoints for which a descriptor cannot be computed are removed. Such keypoints</span>
<a name="l02583"></a>02583 <span class="comment">     * must be filtered in this method befor adding keypoints to train collection &quot;trainPointCollection&quot;.</span>
<a name="l02584"></a>02584 <span class="comment">     * If inheritor class need perform such prefiltering the method add() must be overloaded.</span>
<a name="l02585"></a>02585 <span class="comment">     * In the other class methods programmer has access to the train keypoints by a constant link.</span>
<a name="l02586"></a>02586 <span class="comment">     */</span>
<a name="l02587"></a>02587     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#aba9e14974f8b53580964ba41ea030b40" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; images,
<a name="l02588"></a>02588                       vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a> );
<a name="l02589"></a>02589 
<a name="l02590"></a>02590     <span class="keyword">const</span> vector&lt;Mat&gt;&amp; getTrainImages() <span class="keyword">const</span>;
<a name="l02591"></a>02591     <span class="keyword">const</span> vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; getTrainKeypoints() <span class="keyword">const</span>;
<a name="l02592"></a>02592 
<a name="l02593"></a>02593     <span class="comment">/*</span>
<a name="l02594"></a>02594 <span class="comment">     * Clear images and keypoints storing in train collection.</span>
<a name="l02595"></a>02595 <span class="comment">     */</span>
<a name="l02596"></a>02596     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02597"></a>02597     <span class="comment">/*</span>
<a name="l02598"></a>02598 <span class="comment">     * Returns true if matcher supports mask to match descriptors.</span>
<a name="l02599"></a>02599 <span class="comment">     */</span>
<a name="l02600"></a>02600     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported() = 0;
<a name="l02601"></a>02601     <span class="comment">/*</span>
<a name="l02602"></a>02602 <span class="comment">     * Train some inner structures (e.g. flann index or decision trees).</span>
<a name="l02603"></a>02603 <span class="comment">     * train() methods is run every time in matching methods. So the method implementation</span>
<a name="l02604"></a>02604 <span class="comment">     * should has a check whether these inner structures need be trained/retrained or not.</span>
<a name="l02605"></a>02605 <span class="comment">     */</span>
<a name="l02606"></a>02606     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02607"></a>02607 
<a name="l02608"></a>02608     <span class="comment">/*</span>
<a name="l02609"></a>02609 <span class="comment">     * Classifies query keypoints.</span>
<a name="l02610"></a>02610 <span class="comment">     * queryImage    The query image</span>
<a name="l02611"></a>02611 <span class="comment">     * queryKeypoints   Keypoints from the query image</span>
<a name="l02612"></a>02612 <span class="comment">     * trainImage    The train image</span>
<a name="l02613"></a>02613 <span class="comment">     * trainKeypoints   Keypoints from the train image</span>
<a name="l02614"></a>02614 <span class="comment">     */</span>
<a name="l02615"></a>02615     <span class="comment">// Classify keypoints from query image under one train image.</span>
<a name="l02616"></a>02616     <span class="keywordtype">void</span> classify( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02617"></a>02617                            <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; trainImage, vector&lt;KeyPoint&gt;&amp; trainKeypoints ) <span class="keyword">const</span>;
<a name="l02618"></a>02618     <span class="comment">// Classify keypoints from query image under train image collection.</span>
<a name="l02619"></a>02619     <span class="keywordtype">void</span> classify( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints );
<a name="l02620"></a>02620 
<a name="l02621"></a>02621     <span class="comment">/*</span>
<a name="l02622"></a>02622 <span class="comment">     * Group of methods to match keypoints from image pair.</span>
<a name="l02623"></a>02623 <span class="comment">     * Keypoints for which a descriptor cannot be computed are removed.</span>
<a name="l02624"></a>02624 <span class="comment">     * train() method is called here.</span>
<a name="l02625"></a>02625 <span class="comment">     */</span>
<a name="l02626"></a>02626     <span class="comment">// Find one best match for each query descriptor (if mask is empty).</span>
<a name="l02627"></a>02627     <span class="keywordtype">void</span> match( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02628"></a>02628                 <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; trainImage, vector&lt;KeyPoint&gt;&amp; trainKeypoints,
<a name="l02629"></a>02629                 vector&lt;DMatch&gt;&amp; matches, <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>() ) <span class="keyword">const</span>;
<a name="l02630"></a>02630     <span class="comment">// Find k best matches for each query keypoint (in increasing order of distances).</span>
<a name="l02631"></a>02631     <span class="comment">// compactResult is used when mask is not empty. If compactResult is false matches</span>
<a name="l02632"></a>02632     <span class="comment">// vector will have the same size as queryDescriptors rows.</span>
<a name="l02633"></a>02633     <span class="comment">// If compactResult is true matches vector will not contain matches for fully masked out query descriptors.</span>
<a name="l02634"></a>02634     <span class="keywordtype">void</span> knnMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02635"></a>02635                    <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; trainImage, vector&lt;KeyPoint&gt;&amp; trainKeypoints,
<a name="l02636"></a>02636                    vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02637"></a>02637                    <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02638"></a>02638     <span class="comment">// Find best matches for each query descriptor which have distance less than maxDistance (in increasing order of distances).</span>
<a name="l02639"></a>02639     <span class="keywordtype">void</span> radiusMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02640"></a>02640                       <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; trainImage, vector&lt;KeyPoint&gt;&amp; trainKeypoints,
<a name="l02641"></a>02641                       vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02642"></a>02642                       <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="core__c_8h.html#a714486ca39ce82afa199836b36993f59">mask</a>=<a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02643"></a>02643     <span class="comment">/*</span>
<a name="l02644"></a>02644 <span class="comment">     * Group of methods to match keypoints from one image to image set.</span>
<a name="l02645"></a>02645 <span class="comment">     * See description of similar methods for matching image pair above.</span>
<a name="l02646"></a>02646 <span class="comment">     */</span>
<a name="l02647"></a>02647     <span class="keywordtype">void</span> match( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02648"></a>02648                 vector&lt;DMatch&gt;&amp; matches, <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;() );
<a name="l02649"></a>02649     <span class="keywordtype">void</span> knnMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02650"></a>02650                    vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02651"></a>02651                    <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02652"></a>02652     <span class="keywordtype">void</span> radiusMatch( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02653"></a>02653                       vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02654"></a>02654                       <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks=vector&lt;Mat&gt;(), <span class="keywordtype">bool</span> compactResult=<span class="keyword">false</span> );
<a name="l02655"></a>02655 
<a name="l02656"></a>02656     <span class="comment">// Reads matcher object from a file node</span>
<a name="l02657"></a>02657     <span class="keyword">virtual</span> <span class="keywordtype">void</span> read( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; );
<a name="l02658"></a>02658     <span class="comment">// Writes matcher object to a file storage</span>
<a name="l02659"></a>02659     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; ) <span class="keyword">const</span>;
<a name="l02660"></a>02660 
<a name="l02661"></a>02661     <span class="comment">// Return true if matching object is empty (e.g. feature detector or descriptor matcher are empty)</span>
<a name="l02662"></a>02662     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l02663"></a>02663 
<a name="l02664"></a>02664     <span class="comment">// Clone the matcher. If emptyTrainData is false the method create deep copy of the object, i.e. copies</span>
<a name="l02665"></a>02665     <span class="comment">// both parameters and train data. If emptyTrainData is true the method create object copy with current parameters</span>
<a name="l02666"></a>02666     <span class="comment">// but with empty train data.</span>
<a name="l02667"></a>02667     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html" title="Smart pointer to dynamically allocated objects.">Ptr&lt;GenericDescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span> = 0;
<a name="l02668"></a>02668 
<a name="l02669"></a>02669     <span class="keyword">static</span> <a class="code" href="classcv_1_1_ptr.html" title="Smart pointer to dynamically allocated objects.">Ptr&lt;GenericDescriptorMatcher&gt;</a> create( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; genericDescritptorMatcherType,
<a name="l02670"></a>02670                                                  <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;paramsFilename=<span class="keywordtype">string</span>() );
<a name="l02671"></a>02671 
<a name="l02672"></a>02672 <span class="keyword">protected</span>:
<a name="l02673"></a>02673     <span class="comment">// In fact the matching is implemented only by the following two methods. These methods suppose</span>
<a name="l02674"></a>02674     <span class="comment">// that the class object has been trained already. Public match methods call these methods</span>
<a name="l02675"></a>02675     <span class="comment">// after calling train().</span>
<a name="l02676"></a>02676     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02677"></a>02677                                vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02678"></a>02678                                <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult ) = 0;
<a name="l02679"></a>02679     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02680"></a>02680                                   vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02681"></a>02681                                   <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult ) = 0;
<a name="l02682"></a>02682     <span class="comment">/*</span>
<a name="l02683"></a>02683 <span class="comment">     * A storage for sets of keypoints together with corresponding images and class IDs</span>
<a name="l02684"></a>02684 <span class="comment">     */</span>
<a name="l02685"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">02685</a>     <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">KeyPointCollection</a>
<a name="l02686"></a>02686     {
<a name="l02687"></a>02687     <span class="keyword">public</span>:
<a name="l02688"></a>02688         <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">KeyPointCollection</a>();
<a name="l02689"></a>02689         <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">KeyPointCollection</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">KeyPointCollection</a>&amp; collection );
<a name="l02690"></a>02690         <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#aba9e14974f8b53580964ba41ea030b40" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; images, <span class="keyword">const</span> vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a> );
<a name="l02691"></a>02691         <span class="keywordtype">void</span> clear();
<a name="l02692"></a>02692 
<a name="l02693"></a>02693         <span class="comment">// Returns the total number of keypoints in the collection</span>
<a name="l02694"></a>02694         <span class="keywordtype">size_t</span> keypointCount() <span class="keyword">const</span>;
<a name="l02695"></a>02695         <span class="keywordtype">size_t</span> imageCount() <span class="keyword">const</span>;
<a name="l02696"></a>02696 
<a name="l02697"></a>02697         <span class="keyword">const</span> vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; getKeypoints() <span class="keyword">const</span>;
<a name="l02698"></a>02698         <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; getKeypoints( <span class="keywordtype">int</span> imgIdx ) <span class="keyword">const</span>;
<a name="l02699"></a>02699         <span class="keyword">const</span> <a class="code" href="classcv_1_1_key_point.html" title="The Keypoint Class.">KeyPoint</a>&amp; getKeyPoint( <span class="keywordtype">int</span> imgIdx, <span class="keywordtype">int</span> localPointIdx ) <span class="keyword">const</span>;
<a name="l02700"></a>02700         <span class="keyword">const</span> <a class="code" href="classcv_1_1_key_point.html" title="The Keypoint Class.">KeyPoint</a>&amp; getKeyPoint( <span class="keywordtype">int</span> globalPointIdx ) <span class="keyword">const</span>;
<a name="l02701"></a>02701         <span class="keywordtype">void</span> getLocalIdx( <span class="keywordtype">int</span> globalPointIdx, <span class="keywordtype">int</span>&amp; imgIdx, <span class="keywordtype">int</span>&amp; localPointIdx ) <span class="keyword">const</span>;
<a name="l02702"></a>02702 
<a name="l02703"></a>02703         <span class="keyword">const</span> vector&lt;Mat&gt;&amp; getImages() <span class="keyword">const</span>;
<a name="l02704"></a>02704         <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; getImage( <span class="keywordtype">int</span> imgIdx ) <span class="keyword">const</span>;
<a name="l02705"></a>02705 
<a name="l02706"></a>02706     <span class="keyword">protected</span>:
<a name="l02707"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a6cd45232fe7d6cbfc720f5475ba62218">02707</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a6cd45232fe7d6cbfc720f5475ba62218">pointCount</a>;
<a name="l02708"></a>02708 
<a name="l02709"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a56f4003deea32cac6e7f19818d61983c">02709</a>         vector&lt;Mat&gt; <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a56f4003deea32cac6e7f19818d61983c">images</a>;
<a name="l02710"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a5430eccdca179c4a3ff43eeb516a3c6b">02710</a>         vector&lt;vector&lt;KeyPoint&gt; &gt; <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#a5430eccdca179c4a3ff43eeb516a3c6b">keypoints</a>;
<a name="l02711"></a>02711         <span class="comment">// global indices of the first points in each image, startIndices.size() = keypoints.size()</span>
<a name="l02712"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#aae275d7f1de126e9cfe8761151d34f7e">02712</a>         vector&lt;int&gt; <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html#aae275d7f1de126e9cfe8761151d34f7e">startIndices</a>;
<a name="l02713"></a>02713 
<a name="l02714"></a>02714     <span class="keyword">private</span>:
<a name="l02715"></a>02715         <span class="keyword">static</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> clone_op( <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> m ) { <span class="keywordflow">return</span> m.<a class="code" href="classcv_1_1_mat.html#afb01ff6b2231b72f55618bfb66a5326b" title="returns deep copy of the matrix, i.e. the data is copied">clone</a>(); }
<a name="l02716"></a>02716     };
<a name="l02717"></a>02717 
<a name="l02718"></a><a class="code" href="classcv_1_1_generic_descriptor_matcher.html#ae03d189ce147318f5572b2e1e5bb521e">02718</a>     <a class="code" href="classcv_1_1_generic_descriptor_matcher_1_1_key_point_collection.html">KeyPointCollection</a> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html#ae03d189ce147318f5572b2e1e5bb521e">trainPointCollection</a>;
<a name="l02719"></a>02719 };
<a name="l02720"></a>02720 
<a name="l02721"></a>02721 <span class="comment">/*</span>
<a name="l02722"></a>02722 <span class="comment"> *  OneWayDescriptorMatcher</span>
<a name="l02723"></a>02723 <span class="comment"> */</span>
<a name="l02724"></a><a class="code" href="namespacecv.html#a65db8d0a6d7276c360ed27a4c85cab03">02724</a> <span class="keyword">class </span><a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">OneWayDescriptorMatcher</a>;
<a name="l02725"></a>02725 <span class="keyword">typedef</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">OneWayDescriptorMatcher</a> <a class="code" href="namespacecv.html#a65db8d0a6d7276c360ed27a4c85cab03">OneWayDescriptorMatch</a>;
<a name="l02726"></a>02726 
<a name="l02727"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">02727</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">OneWayDescriptorMatcher</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>
<a name="l02728"></a>02728 {
<a name="l02729"></a>02729 <span class="keyword">public</span>:
<a name="l02730"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">02730</a>     <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a>
<a name="l02731"></a>02731     {
<a name="l02732"></a>02732     <span class="keyword">public</span>:
<a name="l02733"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#afe9ba7c833615e52990d5ea47bc7d6b6">02733</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> POSE_COUNT = 500;
<a name="l02734"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a030eac6d016f1066f95202dd3c42e510">02734</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> PATCH_WIDTH = 24;
<a name="l02735"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ab6f73ef0e70f23c52291e970de14013a">02735</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> PATCH_HEIGHT = 24;
<a name="l02736"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a41b5b450637c047649bf0a08efb30c4e">02736</a>         <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a41b5b450637c047649bf0a08efb30c4e">GET_MIN_SCALE</a>() { <span class="keywordflow">return</span> 0.7f; }
<a name="l02737"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ad4697ec40e262082194bbc2baa1dbc6c">02737</a>         <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ad4697ec40e262082194bbc2baa1dbc6c">GET_MAX_SCALE</a>() { <span class="keywordflow">return</span> 1.5f; }
<a name="l02738"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ace48d9be5bf1569a068faf233ce6de11">02738</a>         <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ace48d9be5bf1569a068faf233ce6de11">GET_STEP_SCALE</a>() { <span class="keywordflow">return</span> 1.2f; }
<a name="l02739"></a>02739 
<a name="l02740"></a>02740         <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a>( <span class="keywordtype">int</span> poseCount = POSE_COUNT,
<a name="l02741"></a>02741                 <a class="code" href="classcv_1_1_size__.html" title="The 2D size class.">Size</a> patchSize = <a class="code" href="namespacecv.html#a346f563897249351a34549137c8532a0">Size</a>(PATCH_WIDTH, PATCH_HEIGHT),
<a name="l02742"></a>02742                 <span class="keywordtype">string</span> pcaFilename = <span class="keywordtype">string</span>(),
<a name="l02743"></a>02743                 <span class="keywordtype">string</span> trainPath = <span class="keywordtype">string</span>(), <span class="keywordtype">string</span> trainImagesList = <span class="keywordtype">string</span>(),
<a name="l02744"></a>02744                 <span class="keywordtype">float</span> minScale = GET_MIN_SCALE(), <span class="keywordtype">float</span> maxScale = GET_MAX_SCALE(),
<a name="l02745"></a>02745                 <span class="keywordtype">float</span> stepScale = GET_STEP_SCALE() );
<a name="l02746"></a>02746 
<a name="l02747"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a7f149030ee136a6f8f30be6d4ef41587">02747</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a7f149030ee136a6f8f30be6d4ef41587">poseCount</a>;
<a name="l02748"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ac66cdab3c81898c472ac6397e1044474">02748</a>         <a class="code" href="classcv_1_1_size__.html" title="The 2D size class.">Size</a> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#ac66cdab3c81898c472ac6397e1044474">patchSize</a>;
<a name="l02749"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a5f673a5ded3dd8bd592a811776029a84">02749</a>         <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a5f673a5ded3dd8bd592a811776029a84">pcaFilename</a>;
<a name="l02750"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a0d5d169bbe15b46ac3367af9ffe230c5">02750</a>         <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a0d5d169bbe15b46ac3367af9ffe230c5">trainPath</a>;
<a name="l02751"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a0b450552f0e9d1e0febd7cd674d3335e">02751</a>         <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a0b450552f0e9d1e0febd7cd674d3335e">trainImagesList</a>;
<a name="l02752"></a>02752 
<a name="l02753"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a6fea216dee92087fd1b70deb3ea88040">02753</a>         <span class="keywordtype">float</span> minScale, maxScale, <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html#a6fea216dee92087fd1b70deb3ea88040">stepScale</a>;
<a name="l02754"></a>02754     };
<a name="l02755"></a>02755 
<a name="l02756"></a>02756     <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">OneWayDescriptorMatcher</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a>&amp; <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a>=<a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a>() );
<a name="l02757"></a>02757     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_one_way_descriptor_matcher.html">OneWayDescriptorMatcher</a>();
<a name="l02758"></a>02758 
<a name="l02759"></a>02759     <span class="keywordtype">void</span> initialize( <span class="keyword">const</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a>&amp; <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;OneWayDescriptorBase&gt;</a>&amp; base=<a class="code" href="classcv_1_1_ptr.html">Ptr&lt;OneWayDescriptorBase&gt;</a>() );
<a name="l02760"></a>02760 
<a name="l02761"></a>02761     <span class="comment">// Clears keypoints storing in collection and OneWayDescriptorBase</span>
<a name="l02762"></a>02762     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02763"></a>02763 
<a name="l02764"></a>02764     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02765"></a>02765 
<a name="l02766"></a>02766     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported();
<a name="l02767"></a>02767 
<a name="l02768"></a>02768     <span class="keyword">virtual</span> <span class="keywordtype">void</span> read( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a> &amp;fn );
<a name="l02769"></a>02769     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l02770"></a>02770 
<a name="l02771"></a>02771     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l02772"></a>02772 
<a name="l02773"></a>02773     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html" title="Smart pointer to dynamically allocated objects.">Ptr&lt;GenericDescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02774"></a>02774 
<a name="l02775"></a>02775 <span class="keyword">protected</span>:
<a name="l02776"></a>02776     <span class="comment">// Matches a set of keypoints from a single image of the training set. A rectangle with a center in a keypoint</span>
<a name="l02777"></a>02777     <span class="comment">// and size (patch_width/2*scale, patch_height/2*scale) is cropped from the source image for each</span>
<a name="l02778"></a>02778     <span class="comment">// keypoint. scale is iterated from DescriptorOneWayParams::min_scale to DescriptorOneWayParams::max_scale.</span>
<a name="l02779"></a>02779     <span class="comment">// The minimum distance to each training patch with all its affine poses is found over all scales.</span>
<a name="l02780"></a>02780     <span class="comment">// The class ID of a match is returned for each keypoint. The distance is calculated over PCA components</span>
<a name="l02781"></a>02781     <span class="comment">// loaded with DescriptorOneWay::Initialize, kd tree is used for finding minimum distances.</span>
<a name="l02782"></a>02782     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02783"></a>02783                                vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02784"></a>02784                                <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02785"></a>02785     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02786"></a>02786                                   vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02787"></a>02787                                   <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02788"></a>02788 
<a name="l02789"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#a15133d1c1c14cc9beb39d514133e4c29">02789</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;OneWayDescriptorBase&gt;</a> <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#a15133d1c1c14cc9beb39d514133e4c29">base</a>;
<a name="l02790"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#a133feede492a09ce3dc29a726c68c534">02790</a>     <a class="code" href="classcv_1_1_one_way_descriptor_matcher_1_1_params.html">Params</a> <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#a133feede492a09ce3dc29a726c68c534">params</a>;
<a name="l02791"></a><a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#af5464b1a4b0d5d8420d8ec9707e2c7f6">02791</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_one_way_descriptor_matcher.html#af5464b1a4b0d5d8420d8ec9707e2c7f6">prevTrainCount</a>;
<a name="l02792"></a>02792 };
<a name="l02793"></a>02793 
<a name="l02794"></a>02794 <span class="comment">/*</span>
<a name="l02795"></a>02795 <span class="comment"> *  FernDescriptorMatcher</span>
<a name="l02796"></a>02796 <span class="comment"> */</span>
<a name="l02797"></a><a class="code" href="namespacecv.html#a545f14bb423cad0765fab6a9f6aaadaa">02797</a> <span class="keyword">class </span><a class="code" href="classcv_1_1_fern_descriptor_matcher.html">FernDescriptorMatcher</a>;
<a name="l02798"></a>02798 <span class="keyword">typedef</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher.html">FernDescriptorMatcher</a> <a class="code" href="namespacecv.html#a545f14bb423cad0765fab6a9f6aaadaa">FernDescriptorMatch</a>;
<a name="l02799"></a>02799 
<a name="l02800"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher.html">02800</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_fern_descriptor_matcher.html">FernDescriptorMatcher</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>
<a name="l02801"></a>02801 {
<a name="l02802"></a>02802 <span class="keyword">public</span>:
<a name="l02803"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">02803</a>     <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a>
<a name="l02804"></a>02804     {
<a name="l02805"></a>02805     <span class="keyword">public</span>:
<a name="l02806"></a>02806         <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a>( <span class="keywordtype">int</span> nclasses=0,
<a name="l02807"></a>02807                 <span class="keywordtype">int</span> patchSize=<a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54a24404de82f8919357a5f8e79ebbd9d1a">FernClassifier::PATCH_SIZE</a>,
<a name="l02808"></a>02808                 <span class="keywordtype">int</span> signatureSize=<a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54a4278805e49ddbabb97b52e29973b9d85">FernClassifier::DEFAULT_SIGNATURE_SIZE</a>,
<a name="l02809"></a>02809                 <span class="keywordtype">int</span> nstructs=<a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54ab6933cb0baa7f1218196052c4dbfe66c">FernClassifier::DEFAULT_STRUCTS</a>,
<a name="l02810"></a>02810                 <span class="keywordtype">int</span> structSize=<a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54ae6b19b111a3c9a6fd339907e6118d707">FernClassifier::DEFAULT_STRUCT_SIZE</a>,
<a name="l02811"></a>02811                 <span class="keywordtype">int</span> nviews=<a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54a333a37941aa3a8a7039ad179cb124216">FernClassifier::DEFAULT_VIEWS</a>,
<a name="l02812"></a>02812                 <span class="keywordtype">int</span> compressionMethod=<a class="code" href="classcv_1_1_fern_classifier.html#aa74cd3c7a869cada0b86c879f86ecd54acc4c78b39eb783cc2b4fdd9fe1e87588">FernClassifier::COMPRESSION_NONE</a>,
<a name="l02813"></a>02813                 <span class="keyword">const</span> <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>&amp; patchGenerator=<a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a>() );
<a name="l02814"></a>02814 
<a name="l02815"></a>02815         <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a>( <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; <a class="code" href="core__c_8h.html#acc427f35f3bd9f865d39012657cc42f8">filename</a> );
<a name="l02816"></a>02816 
<a name="l02817"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#afce393801e5f2e968f413fb0a10449b7">02817</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#afce393801e5f2e968f413fb0a10449b7">nclasses</a>;
<a name="l02818"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a584a30dedeb05d405b0ca72ce11e9f2b">02818</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a584a30dedeb05d405b0ca72ce11e9f2b">patchSize</a>;
<a name="l02819"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a7cc0c9530f2409a887f9825dd8eb2e1e">02819</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a7cc0c9530f2409a887f9825dd8eb2e1e">signatureSize</a>;
<a name="l02820"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a31c03780ab26123ddcdc1ee569ffc4a7">02820</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a31c03780ab26123ddcdc1ee569ffc4a7">nstructs</a>;
<a name="l02821"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a929470c0b3d8d368c47b785e7bceb96e">02821</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a929470c0b3d8d368c47b785e7bceb96e">structSize</a>;
<a name="l02822"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a581315a4df6cd6bd12685f4fba78e410">02822</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a581315a4df6cd6bd12685f4fba78e410">nviews</a>;
<a name="l02823"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#adbf2b40ee2de360fef7910d4f596f551">02823</a>         <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#adbf2b40ee2de360fef7910d4f596f551">compressionMethod</a>;
<a name="l02824"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a65b27f9924d438ff122d051ff64bcbb5">02824</a>         <a class="code" href="classcv_1_1_patch_generator.html" title="The Patch Generator class.">PatchGenerator</a> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a65b27f9924d438ff122d051ff64bcbb5">patchGenerator</a>;
<a name="l02825"></a>02825 
<a name="l02826"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a0c03617635da4f943ba7fff0a16d855c">02826</a>         <span class="keywordtype">string</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html#a0c03617635da4f943ba7fff0a16d855c">filename</a>;
<a name="l02827"></a>02827     };
<a name="l02828"></a>02828 
<a name="l02829"></a>02829     <a class="code" href="classcv_1_1_fern_descriptor_matcher.html">FernDescriptorMatcher</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a>&amp; <a class="code" href="features2d_8hpp.html#a0480a03ecc41b20cde376602531d9270">params</a>=<a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a>() );
<a name="l02830"></a>02830     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_fern_descriptor_matcher.html">FernDescriptorMatcher</a>();
<a name="l02831"></a>02831 
<a name="l02832"></a>02832     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02833"></a>02833 
<a name="l02834"></a>02834     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02835"></a>02835 
<a name="l02836"></a>02836     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported();
<a name="l02837"></a>02837 
<a name="l02838"></a>02838     <span class="keyword">virtual</span> <span class="keywordtype">void</span> read( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a> &amp;fn );
<a name="l02839"></a>02839     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l02840"></a>02840     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l02841"></a>02841     
<a name="l02842"></a>02842     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html" title="Smart pointer to dynamically allocated objects.">Ptr&lt;GenericDescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02843"></a>02843 
<a name="l02844"></a>02844 <span class="keyword">protected</span>:
<a name="l02845"></a>02845     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02846"></a>02846                                vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02847"></a>02847                                <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02848"></a>02848     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02849"></a>02849                                   vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02850"></a>02850                                   <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02851"></a>02851 
<a name="l02852"></a>02852     <span class="keywordtype">void</span> trainFernClassifier();
<a name="l02853"></a>02853     <span class="keywordtype">void</span> calcBestProbAndMatchIdx( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, <span class="keyword">const</span> <a class="code" href="classcv_1_1_point__.html">Point2f</a>&amp; pt,
<a name="l02854"></a>02854                                   <span class="keywordtype">float</span>&amp; bestProb, <span class="keywordtype">int</span>&amp; bestMatchIdx, vector&lt;float&gt;&amp; signature );
<a name="l02855"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher.html#aefa1380c6454cab847e6cd4b87b9ce04">02855</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;FernClassifier&gt;</a> <a class="code" href="classcv_1_1_fern_descriptor_matcher.html#aefa1380c6454cab847e6cd4b87b9ce04">classifier</a>;
<a name="l02856"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher.html#ab28afe87b16259911db05c86f984465d">02856</a>     <a class="code" href="classcv_1_1_fern_descriptor_matcher_1_1_params.html">Params</a> <a class="code" href="classcv_1_1_fern_descriptor_matcher.html#ab28afe87b16259911db05c86f984465d">params</a>;
<a name="l02857"></a><a class="code" href="classcv_1_1_fern_descriptor_matcher.html#a53d50fd092627ec06b62a48e5a64dcda">02857</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_fern_descriptor_matcher.html#a53d50fd092627ec06b62a48e5a64dcda">prevTrainCount</a>;
<a name="l02858"></a>02858 };
<a name="l02859"></a>02859 
<a name="l02860"></a>02860 <span class="comment">/****************************************************************************************\</span>
<a name="l02861"></a>02861 <span class="comment">*                                VectorDescriptorMatcher                                 *</span>
<a name="l02862"></a>02862 <span class="comment">\****************************************************************************************/</span>
<a name="l02863"></a>02863 
<a name="l02864"></a>02864 <span class="comment">/*</span>
<a name="l02865"></a>02865 <span class="comment"> *  A class used for matching descriptors that can be described as vectors in a finite-dimensional space</span>
<a name="l02866"></a>02866 <span class="comment"> */</span>
<a name="l02867"></a><a class="code" href="namespacecv.html#a70b3c5e1182198716609db7604acadb4">02867</a> <span class="keyword">class </span><a class="code" href="classcv_1_1_vector_descriptor_matcher.html">VectorDescriptorMatcher</a>;
<a name="l02868"></a>02868 <span class="keyword">typedef</span> <a class="code" href="classcv_1_1_vector_descriptor_matcher.html">VectorDescriptorMatcher</a> <a class="code" href="namespacecv.html#a70b3c5e1182198716609db7604acadb4">VectorDescriptorMatch</a>;
<a name="l02869"></a>02869 
<a name="l02870"></a><a class="code" href="classcv_1_1_vector_descriptor_matcher.html">02870</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_vector_descriptor_matcher.html">VectorDescriptorMatcher</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_generic_descriptor_matcher.html">GenericDescriptorMatcher</a>
<a name="l02871"></a>02871 {
<a name="l02872"></a>02872 <span class="keyword">public</span>:
<a name="l02873"></a>02873     <a class="code" href="classcv_1_1_vector_descriptor_matcher.html">VectorDescriptorMatcher</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a>&amp; extractor, <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a>&amp; matcher );
<a name="l02874"></a>02874     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_vector_descriptor_matcher.html">VectorDescriptorMatcher</a>();
<a name="l02875"></a>02875 
<a name="l02876"></a>02876     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#aba9e14974f8b53580964ba41ea030b40" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> vector&lt;Mat&gt;&amp; imgCollection,
<a name="l02877"></a>02877                       vector&lt;vector&lt;KeyPoint&gt; &gt;&amp; pointCollection );
<a name="l02878"></a>02878 
<a name="l02879"></a>02879     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02880"></a>02880 
<a name="l02881"></a>02881     <span class="keyword">virtual</span> <span class="keywordtype">void</span> train();
<a name="l02882"></a>02882 
<a name="l02883"></a>02883     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isMaskSupported();
<a name="l02884"></a>02884 
<a name="l02885"></a>02885     <span class="keyword">virtual</span> <span class="keywordtype">void</span> read( <span class="keyword">const</span> <a class="code" href="classcv_1_1_file_node.html" title="File Storage Node class.">FileNode</a>&amp; fn );
<a name="l02886"></a>02886     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a61de8505ed5c9f5698861dec08e35a7d">write</a>( <a class="code" href="classcv_1_1_file_storage.html" title="XML/YAML File Storage Class.">FileStorage</a>&amp; fs ) <span class="keyword">const</span>;
<a name="l02887"></a>02887     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l02888"></a>02888 
<a name="l02889"></a>02889     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_ptr.html" title="Smart pointer to dynamically allocated objects.">Ptr&lt;GenericDescriptorMatcher&gt;</a> clone( <span class="keywordtype">bool</span> emptyTrainData=<span class="keyword">false</span> ) <span class="keyword">const</span>;
<a name="l02890"></a>02890 
<a name="l02891"></a>02891 <span class="keyword">protected</span>:
<a name="l02892"></a>02892     <span class="keyword">virtual</span> <span class="keywordtype">void</span> knnMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02893"></a>02893                                vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">int</span> k,
<a name="l02894"></a>02894                                <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02895"></a>02895     <span class="keyword">virtual</span> <span class="keywordtype">void</span> radiusMatchImpl( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; queryImage, vector&lt;KeyPoint&gt;&amp; queryKeypoints,
<a name="l02896"></a>02896                                   vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, <span class="keywordtype">float</span> maxDistance,
<a name="l02897"></a>02897                                   <span class="keyword">const</span> vector&lt;Mat&gt;&amp; masks, <span class="keywordtype">bool</span> compactResult );
<a name="l02898"></a>02898 
<a name="l02899"></a><a class="code" href="classcv_1_1_vector_descriptor_matcher.html#aadc74598817bb03809359305021c980e">02899</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a> <a class="code" href="classcv_1_1_vector_descriptor_matcher.html#aadc74598817bb03809359305021c980e">extractor</a>;
<a name="l02900"></a><a class="code" href="classcv_1_1_vector_descriptor_matcher.html#aa02a4318758a02b9e3fd8688312a2604">02900</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> <a class="code" href="classcv_1_1_vector_descriptor_matcher.html#aa02a4318758a02b9e3fd8688312a2604">matcher</a>;
<a name="l02901"></a>02901 };
<a name="l02902"></a>02902 
<a name="l02903"></a>02903 <span class="comment">/****************************************************************************************\</span>
<a name="l02904"></a>02904 <span class="comment">*                                   Drawing functions                                    *</span>
<a name="l02905"></a>02905 <span class="comment">\****************************************************************************************/</span>
<a name="l02906"></a><a class="code" href="structcv_1_1_draw_matches_flags.html">02906</a> <span class="keyword">struct </span>CV_EXPORTS <a class="code" href="structcv_1_1_draw_matches_flags.html">DrawMatchesFlags</a>
<a name="l02907"></a>02907 {
<a name="l02908"></a><a class="code" href="structcv_1_1_draw_matches_flags.html#a3b18e1c175c83e70801d0cf83d38e052a48e1d6053ba88b4f14bf1342e6795da6">02908</a>     <span class="keyword">enum</span>{ DEFAULT = 0, <span class="comment">// Output image matrix will be created (Mat::create),</span>
<a name="l02909"></a>02909                        <span class="comment">// i.e. existing memory of output image may be reused.</span>
<a name="l02910"></a>02910                        <span class="comment">// Two source image, matches and single keypoints will be drawn.</span>
<a name="l02911"></a>02911                        <span class="comment">// For each keypoint only the center point will be drawn (without</span>
<a name="l02912"></a>02912                        <span class="comment">// the circle around keypoint with keypoint size and orientation).</span>
<a name="l02913"></a><a class="code" href="structcv_1_1_draw_matches_flags.html#a3b18e1c175c83e70801d0cf83d38e052ae3789c743c407146570e88f2f3db5cc1">02913</a>           DRAW_OVER_OUTIMG = 1, <span class="comment">// Output image matrix will not be created (Mat::create).</span>
<a name="l02914"></a>02914                                 <span class="comment">// Matches will be drawn on existing content of output image.</span>
<a name="l02915"></a><a class="code" href="structcv_1_1_draw_matches_flags.html#a3b18e1c175c83e70801d0cf83d38e052a846e25aca57b8bddd219d83cef3a06ac">02915</a>           NOT_DRAW_SINGLE_POINTS = 2, <span class="comment">// Single keypoints will not be drawn.</span>
<a name="l02916"></a><a class="code" href="structcv_1_1_draw_matches_flags.html#a3b18e1c175c83e70801d0cf83d38e052ac22e71af97a4741038f2fc47437371b8">02916</a>           DRAW_RICH_KEYPOINTS = 4 <span class="comment">// For each keypoint the circle around keypoint with keypoint size and</span>
<a name="l02917"></a>02917                                   <span class="comment">// orientation will be drawn.</span>
<a name="l02918"></a>02918         };
<a name="l02919"></a>02919 };
<a name="l02920"></a>02920 
<a name="l02921"></a>02921 <span class="comment">// Draw keypoints.</span>
<a name="l02922"></a>02922 CV_EXPORTS <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a6c1da138ba67a696aedb590c964c6faa">drawKeypoints</a>( <span class="keyword">const</span> Mat&amp; <a class="code" href="highgui__c_8h.html#a35b1e6246c0baa4fe7c8a916316d3adc">image</a>, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; <a class="code" href="features2d_8hpp.html#af95b6678bbbdd664ed15fe6d4190d355">keypoints</a>, Mat&amp; outImage,
<a name="l02923"></a>02923                                <span class="keyword">const</span> <a class="code" href="namespacecv.html#a599fe92e910c027be274233eccad7beb">Scalar</a>&amp; <a class="code" href="core__c_8h.html#a4ea898fa4dd23d613d19923509d8e249">color</a>=<a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(-1), <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#ae51e3a2d4365e85db9630dd3ce9508db">flags</a>=<a class="code" href="structcv_1_1_draw_matches_flags.html#a3b18e1c175c83e70801d0cf83d38e052a48e1d6053ba88b4f14bf1342e6795da6">DrawMatchesFlags::DEFAULT</a> );
<a name="l02924"></a>02924 
<a name="l02925"></a>02925 <span class="comment">// Draws matches of keypints from two images on output image.</span>
<a name="l02926"></a>02926 CV_EXPORTS <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#ad222db0a561406f318c51c52268a4154">drawMatches</a>( <span class="keyword">const</span> Mat&amp; img1, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints1,
<a name="l02927"></a>02927                              <span class="keyword">const</span> Mat&amp; img2, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints2,
<a name="l02928"></a>02928                              <span class="keyword">const</span> vector&lt;DMatch&gt;&amp; matches1to2, Mat&amp; outImg,
<a name="l02929"></a>02929                              <span class="keyword">const</span> <a class="code" href="namespacecv.html#a599fe92e910c027be274233eccad7beb">Scalar</a>&amp; matchColor=<a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(-1), <span class="keyword">const</span> <a class="code" href="namespacecv.html#a599fe92e910c027be274233eccad7beb">Scalar</a>&amp; singlePointColor=<a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(-1),
<a name="l02930"></a>02930                              <span class="keyword">const</span> vector&lt;char&gt;&amp; matchesMask=vector&lt;char&gt;(), <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#ae51e3a2d4365e85db9630dd3ce9508db">flags</a>=<a class="code" href="structcv_1_1_draw_matches_flags.html#a3b18e1c175c83e70801d0cf83d38e052a48e1d6053ba88b4f14bf1342e6795da6">DrawMatchesFlags::DEFAULT</a> );
<a name="l02931"></a>02931 
<a name="l02932"></a>02932 CV_EXPORTS <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#ad222db0a561406f318c51c52268a4154">drawMatches</a>( <span class="keyword">const</span> Mat&amp; img1, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints1,
<a name="l02933"></a>02933                              <span class="keyword">const</span> Mat&amp; img2, <span class="keyword">const</span> vector&lt;KeyPoint&gt;&amp; keypoints2,
<a name="l02934"></a>02934                              <span class="keyword">const</span> vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches1to2, Mat&amp; outImg,
<a name="l02935"></a>02935                              <span class="keyword">const</span> <a class="code" href="namespacecv.html#a599fe92e910c027be274233eccad7beb">Scalar</a>&amp; matchColor=<a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(-1), <span class="keyword">const</span> <a class="code" href="namespacecv.html#a599fe92e910c027be274233eccad7beb">Scalar</a>&amp; singlePointColor=<a class="code" href="classcv_1_1_scalar__.html#ae7411e333e610ee9d645f53d87a55757" title="returns a scalar with all elements set to v0">Scalar::all</a>(-1),
<a name="l02936"></a>02936                              <span class="keyword">const</span> vector&lt;vector&lt;char&gt; &gt;&amp; matchesMask=vector&lt;vector&lt;char&gt; &gt;(), <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#ae51e3a2d4365e85db9630dd3ce9508db">flags</a>=<a class="code" href="structcv_1_1_draw_matches_flags.html#a3b18e1c175c83e70801d0cf83d38e052a48e1d6053ba88b4f14bf1342e6795da6">DrawMatchesFlags::DEFAULT</a> );
<a name="l02937"></a>02937 
<a name="l02938"></a>02938 <span class="comment">/****************************************************************************************\</span>
<a name="l02939"></a>02939 <span class="comment">*   Functions to evaluate the feature detectors and [generic] descriptor extractors      *</span>
<a name="l02940"></a>02940 <span class="comment">\****************************************************************************************/</span>
<a name="l02941"></a>02941 
<a name="l02942"></a>02942 CV_EXPORTS <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a08a43288f9a782ec601fd85d0c4d3711">evaluateFeatureDetector</a>( <span class="keyword">const</span> Mat&amp; img1, <span class="keyword">const</span> Mat&amp; img2, <span class="keyword">const</span> Mat&amp; H1to2,
<a name="l02943"></a>02943                                          vector&lt;KeyPoint&gt;* keypoints1, vector&lt;KeyPoint&gt;* keypoints2,
<a name="l02944"></a>02944                                          <span class="keywordtype">float</span>&amp; repeatability, <span class="keywordtype">int</span>&amp; correspCount,
<a name="l02945"></a>02945                                          <span class="keyword">const</span> Ptr&lt;FeatureDetector&gt;&amp; fdetector=Ptr&lt;FeatureDetector&gt;() );
<a name="l02946"></a>02946 
<a name="l02947"></a>02947 CV_EXPORTS <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a48829ef1a34e2d3d72aa7428f3fc5459">computeRecallPrecisionCurve</a>( <span class="keyword">const</span> vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches1to2,
<a name="l02948"></a>02948                                              <span class="keyword">const</span> vector&lt;vector&lt;uchar&gt; &gt;&amp; correctMatches1to2Mask,
<a name="l02949"></a>02949                                              vector&lt;Point2f&gt;&amp; recallPrecisionCurve );
<a name="l02950"></a>02950 
<a name="l02951"></a>02951 CV_EXPORTS <span class="keywordtype">float</span> <a class="code" href="namespacecv.html#a3ef4fb13a8f663443c9198f9f40f27c2">getRecall</a>( <span class="keyword">const</span> vector&lt;Point2f&gt;&amp; recallPrecisionCurve, <span class="keywordtype">float</span> l_precision );
<a name="l02952"></a>02952 CV_EXPORTS <span class="keywordtype">int</span> <a class="code" href="namespacecv.html#a9e5075611215e6db0a35347dfa0d11a6">getNearestPoint</a>( <span class="keyword">const</span> vector&lt;Point2f&gt;&amp; recallPrecisionCurve, <span class="keywordtype">float</span> l_precision );
<a name="l02953"></a>02953 
<a name="l02954"></a>02954 CV_EXPORTS <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#a5e8f3dd09cb0aff1bef18e1e98148276">evaluateGenericDescriptorMatcher</a>( <span class="keyword">const</span> Mat&amp; img1, <span class="keyword">const</span> Mat&amp; img2, <span class="keyword">const</span> Mat&amp; H1to2,
<a name="l02955"></a>02955                                                   vector&lt;KeyPoint&gt;&amp; keypoints1, vector&lt;KeyPoint&gt;&amp; keypoints2,
<a name="l02956"></a>02956                                                   vector&lt;vector&lt;DMatch&gt; &gt;* matches1to2, vector&lt;vector&lt;uchar&gt; &gt;* correctMatches1to2Mask,
<a name="l02957"></a>02957                                                   vector&lt;Point2f&gt;&amp; recallPrecisionCurve,
<a name="l02958"></a>02958                                                   <span class="keyword">const</span> Ptr&lt;GenericDescriptorMatcher&gt;&amp; dmatch=Ptr&lt;GenericDescriptorMatcher&gt;() );
<a name="l02959"></a>02959 
<a name="l02960"></a>02960 
<a name="l02961"></a>02961 <span class="comment">/****************************************************************************************\</span>
<a name="l02962"></a>02962 <span class="comment">*                                     Bag of visual words                                *</span>
<a name="l02963"></a>02963 <span class="comment">\****************************************************************************************/</span>
<a name="l02964"></a>02964 <span class="comment">/*</span>
<a name="l02965"></a>02965 <span class="comment"> * Abstract base class for training of a &#39;bag of visual words&#39; vocabulary from a set of descriptors</span>
<a name="l02966"></a>02966 <span class="comment"> */</span>
<a name="l02967"></a><a class="code" href="classcv_1_1_b_o_w_trainer.html">02967</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_b_o_w_trainer.html">BOWTrainer</a>
<a name="l02968"></a>02968 {
<a name="l02969"></a>02969 <span class="keyword">public</span>:
<a name="l02970"></a>02970     <a class="code" href="classcv_1_1_b_o_w_trainer.html">BOWTrainer</a>();
<a name="l02971"></a>02971     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_b_o_w_trainer.html">BOWTrainer</a>();
<a name="l02972"></a>02972 
<a name="l02973"></a>02973     <span class="keywordtype">void</span> <a class="code" href="namespacecv.html#aba9e14974f8b53580964ba41ea030b40" title="adds one matrix to another (dst = src1 + src2)">add</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; descriptors );
<a name="l02974"></a>02974     <span class="keyword">const</span> vector&lt;Mat&gt;&amp; getDescriptors() <span class="keyword">const</span>;
<a name="l02975"></a>02975     <span class="keywordtype">int</span> descripotorsCount() <span class="keyword">const</span>;
<a name="l02976"></a>02976 
<a name="l02977"></a>02977     <span class="keyword">virtual</span> <span class="keywordtype">void</span> clear();
<a name="l02978"></a>02978 
<a name="l02979"></a>02979     <span class="comment">/*</span>
<a name="l02980"></a>02980 <span class="comment">     * Train visual words vocabulary, that is cluster training descriptors and</span>
<a name="l02981"></a>02981 <span class="comment">     * compute cluster centers.</span>
<a name="l02982"></a>02982 <span class="comment">     * Returns cluster centers.</span>
<a name="l02983"></a>02983 <span class="comment">     *</span>
<a name="l02984"></a>02984 <span class="comment">     * descriptors      Training descriptors computed on images keypoints.</span>
<a name="l02985"></a>02985 <span class="comment">     */</span>
<a name="l02986"></a>02986     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> cluster() <span class="keyword">const</span> = 0;
<a name="l02987"></a>02987     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> cluster( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; descriptors ) <span class="keyword">const</span> = 0;
<a name="l02988"></a>02988 
<a name="l02989"></a>02989 <span class="keyword">protected</span>:
<a name="l02990"></a><a class="code" href="classcv_1_1_b_o_w_trainer.html#af01a3706e549495d8da6b01ecc1ba598">02990</a>     vector&lt;Mat&gt; <a class="code" href="classcv_1_1_b_o_w_trainer.html#af01a3706e549495d8da6b01ecc1ba598">descriptors</a>;
<a name="l02991"></a><a class="code" href="classcv_1_1_b_o_w_trainer.html#a0aa1b9d10cb5790c13977c7ef3d60589">02991</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_b_o_w_trainer.html#a0aa1b9d10cb5790c13977c7ef3d60589">size</a>;
<a name="l02992"></a>02992 };
<a name="l02993"></a>02993 
<a name="l02994"></a>02994 <span class="comment">/*</span>
<a name="l02995"></a>02995 <span class="comment"> * This is BOWTrainer using cv::kmeans to get vocabulary.</span>
<a name="l02996"></a>02996 <span class="comment"> */</span>
<a name="l02997"></a><a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html">02997</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html">BOWKMeansTrainer</a> : <span class="keyword">public</span> <a class="code" href="classcv_1_1_b_o_w_trainer.html">BOWTrainer</a>
<a name="l02998"></a>02998 {
<a name="l02999"></a>02999 <span class="keyword">public</span>:
<a name="l03000"></a>03000     <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html">BOWKMeansTrainer</a>( <span class="keywordtype">int</span> clusterCount, <span class="keyword">const</span> <a class="code" href="classcv_1_1_term_criteria.html" title="Termination criteria in iterative algorithms.">TermCriteria</a>&amp; <a class="code" href="core__c_8h.html#ad5df871b1d714e419d2fbdc28e341c7f">termcrit</a>=<a class="code" href="classcv_1_1_term_criteria.html" title="Termination criteria in iterative algorithms.">TermCriteria</a>(),
<a name="l03001"></a>03001                       <span class="keywordtype">int</span> attempts=3, <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#ae51e3a2d4365e85db9630dd3ce9508db">flags</a>=<a class="code" href="namespacecv.html#ae52b36fc67ad9b44d4cad85a7205544da78ddd00a99cd51db10ed63c024eb1e62">KMEANS_PP_CENTERS</a> );
<a name="l03002"></a>03002     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html">BOWKMeansTrainer</a>();
<a name="l03003"></a>03003 
<a name="l03004"></a>03004     <span class="comment">// Returns trained vocabulary (i.e. cluster centers).</span>
<a name="l03005"></a>03005     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> cluster() <span class="keyword">const</span>;
<a name="l03006"></a>03006     <span class="keyword">virtual</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> cluster( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; descriptors ) <span class="keyword">const</span>;
<a name="l03007"></a>03007 
<a name="l03008"></a>03008 <span class="keyword">protected</span>:
<a name="l03009"></a>03009 
<a name="l03010"></a><a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#aec28a6dd06354f4b13462434e1f39e03">03010</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#aec28a6dd06354f4b13462434e1f39e03">clusterCount</a>;
<a name="l03011"></a><a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#a6858ee26d31e8537ce6a8ae33d883d4c">03011</a>     <a class="code" href="classcv_1_1_term_criteria.html" title="Termination criteria in iterative algorithms.">TermCriteria</a> <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#a6858ee26d31e8537ce6a8ae33d883d4c">termcrit</a>;
<a name="l03012"></a><a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#a38cc72f20413df1fd2de0f2e10ef9af2">03012</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#a38cc72f20413df1fd2de0f2e10ef9af2">attempts</a>;
<a name="l03013"></a><a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#aa0a8079aa21df8ab4d8fd7769eedf79a">03013</a>     <span class="keywordtype">int</span> <a class="code" href="classcv_1_1_b_o_w_k_means_trainer.html#aa0a8079aa21df8ab4d8fd7769eedf79a">flags</a>;
<a name="l03014"></a>03014 };
<a name="l03015"></a>03015 
<a name="l03016"></a>03016 <span class="comment">/*</span>
<a name="l03017"></a>03017 <span class="comment"> * Class to compute image descriptor using bag of visual words.</span>
<a name="l03018"></a>03018 <span class="comment"> */</span>
<a name="l03019"></a><a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html">03019</a> <span class="keyword">class </span>CV_EXPORTS <a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html">BOWImgDescriptorExtractor</a>
<a name="l03020"></a>03020 {
<a name="l03021"></a>03021 <span class="keyword">public</span>:
<a name="l03022"></a>03022     <a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html">BOWImgDescriptorExtractor</a>( <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a>&amp; dextractor,
<a name="l03023"></a>03023                                <span class="keyword">const</span> <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a>&amp; dmatcher );
<a name="l03024"></a>03024     <span class="keyword">virtual</span> ~<a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html">BOWImgDescriptorExtractor</a>();
<a name="l03025"></a>03025 
<a name="l03026"></a>03026     <span class="keywordtype">void</span> setVocabulary( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; vocabulary );
<a name="l03027"></a>03027     <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; getVocabulary() <span class="keyword">const</span>;
<a name="l03028"></a>03028     <span class="keywordtype">void</span> compute( <span class="keyword">const</span> <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; image, vector&lt;KeyPoint&gt;&amp; keypoints, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>&amp; imgDescriptor,
<a name="l03029"></a>03029                   vector&lt;vector&lt;int&gt; &gt;* pointIdxsOfClusters=0, <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a>* descriptors=0 );
<a name="l03030"></a>03030     <span class="comment">// compute() is not constant because DescriptorMatcher::match is not constant</span>
<a name="l03031"></a>03031 
<a name="l03032"></a>03032     <span class="keywordtype">int</span> descriptorSize() <span class="keyword">const</span>;
<a name="l03033"></a>03033     <span class="keywordtype">int</span> descriptorType() <span class="keyword">const</span>;
<a name="l03034"></a>03034 
<a name="l03035"></a>03035 <span class="keyword">protected</span>:
<a name="l03036"></a><a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#ab5753a53d4f4c6e2c18b61e1b4559b98">03036</a>     <a class="code" href="classcv_1_1_mat.html" title="The n-dimensional matrix class.">Mat</a> <a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#ab5753a53d4f4c6e2c18b61e1b4559b98">vocabulary</a>;
<a name="l03037"></a><a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#acd0f100ac2f377432931062ce02f16cb">03037</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorExtractor&gt;</a> <a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#acd0f100ac2f377432931062ce02f16cb">dextractor</a>;
<a name="l03038"></a><a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#a43311e57fce860293560e05a7e933424">03038</a>     <a class="code" href="classcv_1_1_ptr.html">Ptr&lt;DescriptorMatcher&gt;</a> <a class="code" href="classcv_1_1_b_o_w_img_descriptor_extractor.html#a43311e57fce860293560e05a7e933424">dmatcher</a>;
<a name="l03039"></a>03039 };
<a name="l03040"></a>03040 
<a name="l03041"></a>03041 } <span class="comment">/* namespace cv */</span>
<a name="l03042"></a>03042 
<a name="l03043"></a>03043 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
<a name="l03044"></a>03044 
<a name="l03045"></a>03045 <span class="preprocessor">#endif</span>
<a name="l03046"></a>03046 <span class="preprocessor"></span>
<a name="l03047"></a>03047 <span class="comment">/* End of file. */</span>
</pre></div></div><!-- contents -->
	<div class="footer">
		<p> </p>
	</div>
</div>	
</body>
</html>
